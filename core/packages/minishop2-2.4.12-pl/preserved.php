<?php return array (
  '102b0af7017cd9f89d415f384641e3b2' => 
  array (
    'criteria' => 
    array (
      'name' => 'minishop2',
    ),
    'object' => 
    array (
      'name' => 'minishop2',
      'path' => '{core_path}components/minishop2/',
      'assets_path' => '{base_path}extras/minishop/assets/components/minishop2/',
    ),
  ),
  '8ba964e7f01c5f03597022315120bef9' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_grid_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_grid_fields',
      'value' => 'pagetitle,article,price,weight,thumb,new,favorite,popular',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => NULL,
    ),
  ),
  'fedf6c3674226cd19c331c3aebf51e5d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_show_nested_products',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_show_nested_products',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => '2017-03-27 17:16:40',
    ),
  ),
  'eb42c913f69269d669062e5f2761a59d' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_show_comments',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_show_comments',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => NULL,
    ),
  ),
  '85209d7f125df47acfc59b808fbfdeaa' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_remember_tabs',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_remember_tabs',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => NULL,
    ),
  ),
  'c83511a3af32f4a2137470cd60bf0219' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_id_as_alias',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_id_as_alias',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => NULL,
    ),
  ),
  '630390559d16e4d6b27fea43b53f77cd' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_category_content_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_category_content_default',
      'value' => '[[!pdoPage?
	&element=`msProducts`
]]

[[!+page.nav]]',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_category',
      'editedon' => NULL,
    ),
  ),
  'f4377a00591ee09a88b10747b707247b' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_extra_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_extra_fields',
      'value' => 'color,size,vendor,new,popular,favorite,made_in,tags',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '6af194be51950376dddf1eba30490735' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_show_comments',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_show_comments',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '45eaae624ed78392b8e0c505f5503001' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_template_product_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_template_product_default',
      'value' => '7',
      'xtype' => 'modx-combo-template',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '2017-03-26 14:53:27',
    ),
  ),
  '8bc983a97006564cb645c64672f96f35' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_show_in_tree_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_show_in_tree_default',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '256322ccda8f76b07592b13e4fb9834b' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_source_default',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_source_default',
      'value' => '2',
      'xtype' => 'modx-combo-source',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => '2017-03-06 11:01:38',
    ),
  ),
  'd75eb7e1fb44fd12d69c7474647ec6a4' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_thumbnail_size',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_thumbnail_size',
      'value' => '120x90',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  'a43691ce8b6236c6f148b24a6977edf6' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_remember_tabs',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_remember_tabs',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '5f18a2bb9fb0e8fc2da44d4da18683ee' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_id_as_alias',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_id_as_alias',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  'c8f9cd85e96f512d70a954a8093893e3' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_price_format',
    ),
    'object' => 
    array (
      'key' => 'ms2_price_format',
      'value' => '[2, ".", " "]',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  'd26dc905484b5f48a07617e2b3898d5c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_weight_format',
    ),
    'object' => 
    array (
      'key' => 'ms2_weight_format',
      'value' => '[3, ".", " "]',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '7837e4962046851e00ba95d3245e7e47' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_price_format_no_zeros',
    ),
    'object' => 
    array (
      'key' => 'ms2_price_format_no_zeros',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '057fbbad9fdfdea94242e54d51bc635c' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_weight_format_no_zeros',
    ),
    'object' => 
    array (
      'key' => 'ms2_weight_format_no_zeros',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  'ffedd180e96869115e934ae8993af009' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_extra',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_extra',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  'c68cc01f934a808c65d55ce9f77a1ab9' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_gallery',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_gallery',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  '6108bdf086be670ee7ac774bfda8d69e' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_product_tab_links',
    ),
    'object' => 
    array (
      'key' => 'ms2_product_tab_links',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_product',
      'editedon' => NULL,
    ),
  ),
  'd62d7d9f081cb2f7bda60398f9a188a0' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_cart_handler_class',
    ),
    'object' => 
    array (
      'key' => 'ms2_cart_handler_class',
      'value' => 'msCartHandler',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_cart',
      'editedon' => NULL,
    ),
  ),
  '5e24ec9e62e798bf071f6e4e92110429' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_grid_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_grid_fields',
      'value' => 'id,num,customer,status,cost,weight,delivery,payment,createdon,updatedon,comment',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => NULL,
    ),
  ),
  '6317605d7eb3a2dd1c15084752ab2efe' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_address_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_address_fields',
      'value' => 'receiver,phone,index,country,region,city,metro,street,building,room,comment',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => NULL,
    ),
  ),
  'e233551690477a9bc3fbafcb04b17ec1' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_product_fields',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_product_fields',
      'value' => 'name,product_article,weight,price,count,cost',
      'xtype' => 'textarea',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => '2017-03-06 11:01:38',
    ),
  ),
  '2d8ee90ce7fcccf0e65df5d4e9f44453' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_handler_class',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_handler_class',
      'value' => 'msOrderHandler',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => NULL,
    ),
  ),
  '66d08b3f8cd0bc2d93549a56ca321c25' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_order_user_groups',
    ),
    'object' => 
    array (
      'key' => 'ms2_order_user_groups',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => NULL,
    ),
  ),
  '6ecaf2803a0b68e3e7d2ce0d1cea3147' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_date_format',
    ),
    'object' => 
    array (
      'key' => 'ms2_date_format',
      'value' => '%d.%m.%y <span class="gray">%H:%M</span>',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => NULL,
    ),
  ),
  '69b3562619db559274b1d47071112083' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_email_manager',
    ),
    'object' => 
    array (
      'key' => 'ms2_email_manager',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_order',
      'editedon' => NULL,
    ),
  ),
  'f89aeba4cd5c9f4bda19e9bbd8e2c629' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_css',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_css',
      'value' => '[[+cssUrl]]web/default.css',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => NULL,
    ),
  ),
  '482bc5f27fa2588873b17be356b7c15e' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_frontend_js',
    ),
    'object' => 
    array (
      'key' => 'ms2_frontend_js',
      'value' => '[[+jsUrl]]web/default.js',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_frontend',
      'editedon' => NULL,
    ),
  ),
  '7bb2bba48732a8947b0f119aae6a4b0b' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_api_url',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_api_url',
      'value' => 'https://api-3t.paypal.com/nvp',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  '98588dbf04598ac17bfea947a774e845' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_checkout_url',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_checkout_url',
      'value' => 'https://www.paypal.com/webscr?cmd=_express-checkout&token=',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  'b06f7ca74215102e89b52b9f6aafc618' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_currency',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_currency',
      'value' => 'USD',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  '5cc354c40d20dd417dd1fb39a95d94ed' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_user',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_user',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  '76a29c2ef4e08831987f8e4d5086e98f' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_pwd',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_pwd',
      'value' => '',
      'xtype' => 'text-password',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  '5fcee5077aa7851980892832d839e574' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_signature',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_signature',
      'value' => '',
      'xtype' => 'text-password',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  'ad0ed16099f80bc5644c8447de9114ea' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_success_id',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_success_id',
      'value' => '',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  '14d8b0ff9e7c90fdc59cc1c69ba2f415' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_cancel_id',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_cancel_id',
      'value' => '',
      'xtype' => 'numberfield',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  '0c0b8993978e8f1c7e65f29a9dffbdfe' => 
  array (
    'criteria' => 
    array (
      'key' => 'ms2_payment_paypal_cancel_order',
    ),
    'object' => 
    array (
      'key' => 'ms2_payment_paypal_cancel_order',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'minishop2',
      'area' => 'ms2_payment',
      'editedon' => NULL,
    ),
  ),
  'c71d0e08b58f89588122601cc03c9573' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeAddToCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeAddToCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'cbb0d7aa48a8398d39920fd457926be0' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAddToCart',
    ),
    'object' => 
    array (
      'name' => 'msOnAddToCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'd2fc7e14d128b4dbb3101d90535d058f' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeChangeInCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeChangeInCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'e4e8124caadd4a60476c2d7f3447c989' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnChangeInCart',
    ),
    'object' => 
    array (
      'name' => 'msOnChangeInCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '8de47a38fb06e161a5798c88788c320c' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveFromCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveFromCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '4f921b33e6473fc4663b1aaf859d225c' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveFromCart',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveFromCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '6ed22b68f28dac6a1ef692932b6bc1df' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeEmptyCart',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeEmptyCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '6b1a53029b6df1c4cf4658da23d75ea1' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnEmptyCart',
    ),
    'object' => 
    array (
      'name' => 'msOnEmptyCart',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'a83e90b9f66da81085f67ab5638b51b3' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeAddToOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeAddToOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '9c5a4d855cf153a80d6729bf224f8ae7' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnAddToOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnAddToOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '3997ea9c275d6f1ef3e924f6a1f012e0' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveFromOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveFromOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '355411265e8a678965cba490a4c0f6bd' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveFromOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveFromOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '0a4d023dcb7b9a2fcc5a3dd63f3ae879' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeEmptyOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeEmptyOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '2a6e95cc287847ea8b113fa7d746e0a9' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnEmptyOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnEmptyOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '32a87f9b2d818d67bec3a8276e008690' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeGetOrderCost',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeGetOrderCost',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '135eec96fe8a1a52b0934d0c5b92bd47' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetOrderCost',
    ),
    'object' => 
    array (
      'name' => 'msOnGetOrderCost',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '2cef75a0a31d6458d75a853a06fc225b' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeChangeOrderStatus',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeChangeOrderStatus',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '46de480cc7921f4553081a682a0a307b' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnChangeOrderStatus',
    ),
    'object' => 
    array (
      'name' => 'msOnChangeOrderStatus',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '5064ff8836b4c324cd97af5e24fb577c' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeCreateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeCreateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '186368596b6dde6a093a4ae7ce0dfece' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnCreateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnCreateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '48177c5b1dd749be91031f426d7a53dd' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeUpdateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeUpdateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'b46bd2847b365387c5bdc97b57e183bc' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnUpdateOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnUpdateOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '9c18ffaf2020469bfcfc8faa5f598854' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeRemoveOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeRemoveOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'dbd09e96611449ea0f61e20d94f0efcf' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnRemoveOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnRemoveOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'af1f637922f43a1ae6dd5a14be0a6645' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnSubmitOrder',
    ),
    'object' => 
    array (
      'name' => 'msOnSubmitOrder',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '91b2b725794c655ff7fcad70343e3aa0' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnManagerCustomCssJs',
    ),
    'object' => 
    array (
      'name' => 'msOnManagerCustomCssJs',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'f35c402a84c735c8cf7dbd22c3f0ac45' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnBeforeValidateOrderValue',
    ),
    'object' => 
    array (
      'name' => 'msOnBeforeValidateOrderValue',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'f10e803cd37cf8d93d27c29cf77de89d' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnValidateOrderValue',
    ),
    'object' => 
    array (
      'name' => 'msOnValidateOrderValue',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'a9f269d1698024798ae8ec248117653a' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetProductPrice',
    ),
    'object' => 
    array (
      'name' => 'msOnGetProductPrice',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  'a26ddd2342e46bbfa366ea1e096fea9e' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOnGetProductWeight',
    ),
    'object' => 
    array (
      'name' => 'msOnGetProductWeight',
      'service' => 6,
      'groupname' => 'miniShop2',
    ),
  ),
  '687d1e39438d2b9a76825db10dbf35ad' => 
  array (
    'criteria' => 
    array (
      'name' => 'miniShopManagerPolicy',
    ),
    'object' => 
    array (
      'id' => 13,
      'name' => 'miniShopManagerPolicy',
      'description' => 'A policy for create and update miniShop categories and products.',
      'parent' => 0,
      'template' => 8,
      'class' => '',
      'data' => '{"mscategory_save":true,"msproduct_save":true,"msorder_save":true,"msorder_view":true,"msorder_list":true,"mssetting_save":true,"mssetting_view":true,"mssetting_list":true,"msproductfile_save":true,"msproductfile_generate":true,"msproductfile_list":true}',
      'lexicon' => 'minishop2:permissions',
    ),
  ),
  '7900bc0bfe00f9e1d05bc5a96bc254a6' => 
  array (
    'criteria' => 
    array (
      'name' => 'miniShopManagerPolicyTemplate',
    ),
    'object' => 
    array (
      'id' => 8,
      'template_group' => 1,
      'name' => 'miniShopManagerPolicyTemplate',
      'description' => 'A policy for miniShop2 managers.',
      'lexicon' => 'minishop2:permissions',
    ),
  ),
  'c9e1646392bf2a6ccc3fe6e848c3e880' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'mscategory_save',
    ),
    'object' => 
    array (
      'id' => 220,
      'template' => 8,
      'name' => 'mscategory_save',
      'description' => 'mscategory_save',
      'value' => 1,
    ),
  ),
  '32b02f0d358f5adb239eb34e23b1c8d3' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msproduct_save',
    ),
    'object' => 
    array (
      'id' => 221,
      'template' => 8,
      'name' => 'msproduct_save',
      'description' => 'msproduct_save',
      'value' => 1,
    ),
  ),
  '82491adf835dcb3bdd73ab5e8b6c6419' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msorder_save',
    ),
    'object' => 
    array (
      'id' => 222,
      'template' => 8,
      'name' => 'msorder_save',
      'description' => 'msorder_save',
      'value' => 1,
    ),
  ),
  'dd7c9f1f0d7ccff1607da0ba375553de' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msorder_view',
    ),
    'object' => 
    array (
      'id' => 223,
      'template' => 8,
      'name' => 'msorder_view',
      'description' => 'msorder_view',
      'value' => 1,
    ),
  ),
  '0b8a745f4c7a154a50eff7e2b87eb706' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msorder_list',
    ),
    'object' => 
    array (
      'id' => 224,
      'template' => 8,
      'name' => 'msorder_list',
      'description' => 'msorder_list',
      'value' => 1,
    ),
  ),
  '7ce60fd62a4d07d5b97ae71b39f63324' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'mssetting_save',
    ),
    'object' => 
    array (
      'id' => 225,
      'template' => 8,
      'name' => 'mssetting_save',
      'description' => 'mssetting_save',
      'value' => 1,
    ),
  ),
  '37db5db35e398d324304d4f24c5800a1' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'mssetting_view',
    ),
    'object' => 
    array (
      'id' => 226,
      'template' => 8,
      'name' => 'mssetting_view',
      'description' => 'mssetting_view',
      'value' => 1,
    ),
  ),
  '25b341ad288e7bdf83c906d9ae796188' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'mssetting_list',
    ),
    'object' => 
    array (
      'id' => 227,
      'template' => 8,
      'name' => 'mssetting_list',
      'description' => 'mssetting_list',
      'value' => 1,
    ),
  ),
  'dfa6f840fffcbd920d7b38c06d9c209a' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msproductfile_save',
    ),
    'object' => 
    array (
      'id' => 228,
      'template' => 8,
      'name' => 'msproductfile_save',
      'description' => 'msproductfile_save',
      'value' => 1,
    ),
  ),
  'bdcf7107fb8bfeafcd5dde7bc121113c' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msproductfile_generate',
    ),
    'object' => 
    array (
      'id' => 229,
      'template' => 8,
      'name' => 'msproductfile_generate',
      'description' => 'msproductfile_generate',
      'value' => 1,
    ),
  ),
  '3fb4304612269b2edf2977c2d72d5919' => 
  array (
    'criteria' => 
    array (
      'template' => 8,
      'name' => 'msproductfile_list',
    ),
    'object' => 
    array (
      'id' => 230,
      'template' => 8,
      'name' => 'msproductfile_list',
      'description' => 'msproductfile_list',
      'value' => 1,
    ),
  ),
  '260fcbc824508a2e39408a0fbbe36be9' => 
  array (
    'criteria' => 
    array (
      'text' => 'minishop2',
    ),
    'object' => 
    array (
      'text' => 'minishop2',
      'parent' => 'components',
      'action' => '4',
      'description' => 'ms2_menu_desc',
      'icon' => '<i class="icon-shopping-cart icon icon-large"></i>',
      'menuindex' => 0,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  '138ab1da91277cebb7b6a81f41dca432' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_orders',
    ),
    'object' => 
    array (
      'text' => 'ms2_orders',
      'parent' => 'minishop2',
      'action' => '5',
      'description' => 'ms2_orders_desc',
      'icon' => '',
      'menuindex' => 0,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  'ad632c98b613835edd65307b00105441' => 
  array (
    'criteria' => 
    array (
      'text' => 'ms2_settings',
    ),
    'object' => 
    array (
      'text' => 'ms2_settings',
      'parent' => 'minishop2',
      'action' => '6',
      'description' => 'ms2_settings_desc',
      'icon' => '',
      'menuindex' => 1,
      'params' => '',
      'handler' => '',
      'permissions' => '',
      'namespace' => 'minishop2',
    ),
  ),
  '149dfac275eef83bc17fed71f4ebe304' => 
  array (
    'criteria' => 
    array (
      'category' => 'miniShop2',
    ),
    'object' => 
    array (
      'id' => 8,
      'parent' => 0,
      'category' => 'miniShop2',
      'rank' => 0,
    ),
  ),
  '423a2a4b3f0d1b7ca21713eb3cd0e7c3' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProduct.content',
    ),
    'object' => 
    array (
      'id' => 13,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProduct.content',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '<h1>[[*pagetitle]]</h1>
<div id="msProduct" class="row">
	<div class="span5 col-md-5">
		[[!msGallery]]
	</div>
	<div class="span7 col-md-7">
		<form class="form-horizontal ms2_form" method="post">
			<input type="hidden" name="id" value="[[*id]]" />
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_article]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">
						[[+article]]
					</label>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_price]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">
						[[!+price]] [[%ms2_frontend_currency]]
						[[!+old_price:gt=`0`:then=`<span class="old_price">[[+old_price]] [[%ms2_frontend_currency]]</span>`:else=``]]
					</label>
				</div>
			</div>
			<div class="form-group form-inline">
				<label class="col-sm-2 control-label" for="product_price">[[%ms2_cart_count]]:</label>
				<div class="col-sm-3">
					<input type="number" name="count" id="product_price" class="input-sm form-control" value="1" />
					[[%ms2_frontend_count_unit]]
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_weight]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">[[+weight]] [[%ms2_frontend_weight_unit]]</label>
				</div>
			</div>
			[[!msOptions?name=`color`]]
			[[!msOptions?name=`size`]]
			[[-!msOptions?name=`tags`&tplRow=``&tplOuter=``]]
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_made_in]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">[[+made_in]]</label>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-3">
					<button type="submit" class="btn btn-default" name="ms2_action" value="cart/add"><i class="glyphicon glyphicon-barcode"></i> [[%ms2_frontend_add_to_cart]]</button>
				</div>
			</div>
		</form>

	</div>
</div>
[[*content]]',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_product_content.tpl',
      'content' => '<h1>[[*pagetitle]]</h1>
<div id="msProduct" class="row">
	<div class="span5 col-md-5">
		[[!msGallery]]
	</div>
	<div class="span7 col-md-7">
		<form class="form-horizontal ms2_form" method="post">
			<input type="hidden" name="id" value="[[*id]]" />
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_article]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">
						[[+article]]
					</label>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_price]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">
						[[!+price]] [[%ms2_frontend_currency]]
						[[!+old_price:gt=`0`:then=`<span class="old_price">[[+old_price]] [[%ms2_frontend_currency]]</span>`:else=``]]
					</label>
				</div>
			</div>
			<div class="form-group form-inline">
				<label class="col-sm-2 control-label" for="product_price">[[%ms2_cart_count]]:</label>
				<div class="col-sm-3">
					<input type="number" name="count" id="product_price" class="input-sm form-control" value="1" />
					[[%ms2_frontend_count_unit]]
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_weight]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">[[+weight]] [[%ms2_frontend_weight_unit]]</label>
				</div>
			</div>
			[[!msOptions?name=`color`]]
			[[!msOptions?name=`size`]]
			[[-!msOptions?name=`tags`&tplRow=``&tplOuter=``]]
			<div class="form-group">
				<label class="col-sm-2 control-label">[[%ms2_product_made_in]]:</label>
				<div class="col-sm-3">
					<label class="checkbox">[[+made_in]]</label>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-3">
					<button type="submit" class="btn btn-default" name="ms2_action" value="cart/add"><i class="glyphicon glyphicon-barcode"></i> [[%ms2_frontend_add_to_cart]]</button>
				</div>
			</div>
		</form>

	</div>
</div>
[[*content]]',
    ),
  ),
  '4dcd9812ec27420e5666d1db5298e013' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msProducts.row',
    ),
    'object' => 
    array (
      'id' => 8,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msProducts.row',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '<div class="row ms2_product">
	<div class="span2 col-md-2"><img src="[[+thumb:default=`[[++assets_url]]components/minishop2/img/web/ms2_small.png`]]" width="120" height="90" /></div>
	<div class="row span10 col-md-10">
		<form method="post" class="ms2_form">
			<a href="[[~[[+id]]]]">[[+pagetitle]]</a>
			<span class="flags">[[+new]] [[+popular]] [[+favorite]]</span>
			<span class="price">[[+price]] [[%ms2_frontend_currency]]</span>
			[[+old_price]]
			<button class="btn btn-default" type="submit" name="ms2_action" value="cart/add"><i class="glyphicon glyphicon-barcode"></i> [[%ms2_frontend_add_to_cart]]</button>
			<input type="hidden" name="id" value="[[+id]]">
			<input type="hidden" name="count" value="1">
			<input type="hidden" name="options" value="[]">
		</form>
		<p><small>[[+introtext]]</small></p>
	</div>
</div>
<br/><br/>
<!--minishop2_popular <i class="glyphicon glyphicon-star" title="[[%ms2_frontend_popular]]"></i>-->
<!--minishop2_new <i class="glyphicon glyphicon-flag" title="[[%ms2_frontend_new]]"></i>-->
<!--minishop2_favorite <i class="glyphicon glyphicon-bookmark" title="[[%ms2_frontend_favorite]]"></i>-->
<!--minishop2_old_price <span class="old_price">[[+old_price]] [[%ms2_frontend_currency]]</span>-->',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_products_row.tpl',
      'content' => '<div class="row ms2_product">
	<div class="span2 col-md-2"><img src="[[+thumb:default=`[[++assets_url]]components/minishop2/img/web/ms2_small.png`]]" width="120" height="90" /></div>
	<div class="row span10 col-md-10">
		<form method="post" class="ms2_form">
			<a href="[[~[[+id]]]]">[[+pagetitle]]</a>
			<span class="flags">[[+new]] [[+popular]] [[+favorite]]</span>
			<span class="price">[[+price]] [[%ms2_frontend_currency]]</span>
			[[+old_price]]
			<button class="btn btn-default" type="submit" name="ms2_action" value="cart/add"><i class="glyphicon glyphicon-barcode"></i> [[%ms2_frontend_add_to_cart]]</button>
			<input type="hidden" name="id" value="[[+id]]">
			<input type="hidden" name="count" value="1">
			<input type="hidden" name="options" value="[]">
		</form>
		<p><small>[[+introtext]]</small></p>
	</div>
</div>
<br/><br/>
<!--minishop2_popular <i class="glyphicon glyphicon-star" title="[[%ms2_frontend_popular]]"></i>-->
<!--minishop2_new <i class="glyphicon glyphicon-flag" title="[[%ms2_frontend_new]]"></i>-->
<!--minishop2_favorite <i class="glyphicon glyphicon-bookmark" title="[[%ms2_frontend_favorite]]"></i>-->
<!--minishop2_old_price <span class="old_price">[[+old_price]] [[%ms2_frontend_currency]]</span>-->',
    ),
  ),
  '4185d91b8f5d71947752a7f440793bb3' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msMiniCart',
    ),
    'object' => 
    array (
      'id' => 12,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msMiniCart',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '<div id="msMiniCart" [[+total_count:isnot=`0`:then=`class="full"`:else=``]]>
	<div class="empty">
		<h5><i class="glyphicon glyphicon-shopping-cart"></i> [[%ms2_minicart]]</h5>
		[[%ms2_minicart_is_empty]]
	</div>
	<div class="not_empty">
		<h5><i class="glyphicon glyphicon-shopping-cart"></i> [[%ms2_minicart]]</h5>
		[[%ms2_minicart_goods]]: <strong class="ms2_total_count">[[+total_count]]</strong> [[%ms2_frontend_count_unit]],
		[[%ms2_minicart_cost]]: <strong class="ms2_total_cost">[[+total_cost]]</strong> [[%ms2_frontend_currency]]
	</div>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_minicart.tpl',
      'content' => '<div id="msMiniCart" [[+total_count:isnot=`0`:then=`class="full"`:else=``]]>
	<div class="empty">
		<h5><i class="glyphicon glyphicon-shopping-cart"></i> [[%ms2_minicart]]</h5>
		[[%ms2_minicart_is_empty]]
	</div>
	<div class="not_empty">
		<h5><i class="glyphicon glyphicon-shopping-cart"></i> [[%ms2_minicart]]</h5>
		[[%ms2_minicart_goods]]: <strong class="ms2_total_count">[[+total_count]]</strong> [[%ms2_frontend_count_unit]],
		[[%ms2_minicart_cost]]: <strong class="ms2_total_cost">[[+total_cost]]</strong> [[%ms2_frontend_currency]]
	</div>
</div>',
    ),
  ),
  '3461ff8dae4af168d682bf5029afa9b7' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.new.user',
    ),
    'object' => 
    array (
      'id' => 19,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.new.user',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_new_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>

[[+payment_link]]',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_new_user.tpl',
      'content' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_new_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>

[[+payment_link]]',
    ),
  ),
  '32946e01ab8f59a6ff889ff4ff0d5efb' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.new.manager',
    ),
    'object' => 
    array (
      'id' => 20,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.new.manager',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_new_manager]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_new_manager.tpl',
      'content' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_new_manager]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
    ),
  ),
  'd7946f8a5586ff38a7600e7828fa4996' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.paid.user',
    ),
    'object' => 
    array (
      'id' => 21,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.paid.user',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_paid_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_paid_user.tpl',
      'content' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_paid_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
    ),
  ),
  '1e71801df735b64277a615aea802e548' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.paid.manager',
    ),
    'object' => 
    array (
      'id' => 22,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.paid.manager',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_paid_manager]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_paid_manager.tpl',
      'content' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_paid_manager]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
    ),
  ),
  'c3e33ce94630a8b75f6e7478826b1e74' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.sent.user',
    ),
    'object' => 
    array (
      'id' => 23,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.sent.user',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_sent_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]:  <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
      'locked' => 0,
      'properties' => 'a:0:{}',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_sent_user.tpl',
      'content' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_sent_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]:  <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
    ),
  ),
  '0c07a9837dcebfcc02074b4098483c0b' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.msEmail.cancelled.user',
    ),
    'object' => 
    array (
      'id' => 24,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.msEmail.cancelled.user',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_cancelled_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/chunks/chunk.ms_email_cancelled_user.tpl',
      'content' => '[[!msGetOrder?id=`[[+id]]`]]

<h3>[[%ms2_email_subject_cancelled_user]]</h3>

<div id="msCart">
	<table class="table table-striped">
		<tr class="header">
			<th class="image span2 col-md-2">&nbsp;</th>
			<th class="title span4 col-md-4">[[%ms2_cart_title]]</th>
			<th class="count span2 col-md-2">[[%ms2_cart_count]]</th>
			<th class="weight span1 col-md-1">[[%ms2_cart_weight]]</th>
			<th class="price span1 col-md-1">[[%ms2_cart_cost]]</th>
		</tr>
		[[+goods]]
		<tr class="footer">
			<th class="total" colspan="2">[[%ms2_cart_total]]:</th>
			<th class="total_count"><span class="ms2_total_count">[[+cart_count]]</span> [[%ms2_frontend_count_unit]]</th>
			<th class="total_weight"><span class="ms2_total_weight">[[+cart_weight]]</span> [[%ms2_frontend_weight_unit]]</th>
			<th class="total_cost"><span class="ms2_total_cost">[[+cart_cost]]</span> [[%ms2_frontend_currency]]</th>
		</tr>
	</table>
	<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]</big> [[%ms2_frontend_currency]]</h4>
</div>',
    ),
  ),
  '529e31b800d8f92782535639a1bdfd87' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProducts',
    ),
    'object' => 
    array (
      'id' => 23,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProducts',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);

// You can set modResource instead of msProduct
if (empty($class)) {$scriptProperties[\'class\'] = \'msProduct\';}
if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}

/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

// Start building "Where" expression
$where = array(\'class_key\' => \'msProduct\');
if (empty($showZeroPrice)) {$where[\'Data.price:>\'] = 0;}

// Joining tables
$leftJoin = array(
    array(\'class\' => \'msProductData\', \'alias\' => \'Data\', \'on\' => \'`\'.$class.\'`.`id`=`Data`.`id`\'),
    array(\'class\' => \'msVendor\', \'alias\' => \'Vendor\', \'on\' => \'`Data`.`vendor`=`Vendor`.`id`\'),
);
$innerJoin = array();

// Include Thumbnails
$thumbsSelect = array();
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));
    if(!empty($thumbs[0])){
        foreach ($thumbs as $thumb) {
            $leftJoin[] = array(
                \'class\' => \'msProductFile\',
                \'alias\' => $thumb,
                \'on\' => "`$thumb`.`product_id` = `$class`.`id` AND `$thumb`.`parent` != 0 AND `$thumb`.`path` LIKE \'%/$thumb/\'"
            );
            $thumbsSelect[$thumb] = "`$thumb`.`url` as `$thumb`";
        }
    }
}

// include Linked products
if (!empty($link) && !empty($master)) {
    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`slave` AND `Link`.`link` = \'.$link);
    $where[\'Link.master\'] = $master;
}
else if (!empty($link) && !empty($slave)) {
    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`master` AND `Link`.`link` = \'.$link);
    $where[\'Link.slave\'] = $slave;
}

// Fields to select
$select = array(
    $class => !empty($includeContent) ?  $modx->getSelectColumns($class, $class) : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),
);
if (!empty($thumbsSelect)) {$select = array_merge($select, $thumbsSelect);}

// Add custom parameters
foreach (array(\'where\',\'leftJoin\',\'innerJoin\',\'select\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $modx->fromJSON($scriptProperties[$v]);
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}

$joinedOptions = array();
// Add filters by options
if (!empty($scriptProperties[\'optionFilters\'])) {
    $filters = $modx->fromJSON($scriptProperties[\'optionFilters\']);
    $opt_where = array();

    foreach ($filters as $key => $value) {
        $key_operator= explode(\':\', $key);
        $operator = \'=\';
        $conj = \'\';
        if ($key_operator && count($key_operator) === 2) {
            $key= $key_operator[0];
            $operator= $key_operator[1];
        }
        elseif ($key_operator && count($key_operator) === 3) {
            $conj= $key_operator[0];
            $key= $key_operator[1];
            $operator= $key_operator[2];
        }

        if (!in_array($key, $joinedOptions)) {
            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $key, \'on\' => "`{$key}`.`product_id`=`Data`.`id` AND `{$key}`.`key`=\'{$key}\'");
            $joinedOptions[] = $key;
        }

        if (!is_string($value)) {
            if (!empty($conj)) {
                $last_where = end($opt_where);
                if (is_array($last_where)) {
                    $conj = !empty($conj) ? $conj.\':\' : \'\';
                    $opt_where[] = array("{$conj}`{$key}`.`value`:{$operator}" => $value);
                } else {
                    array_splice($opt_where, -1, 1, $last_where . " {$conj} `{$key}`.`value`{$operator}{$value}");
                }
            } else {
                $opt_where[] = "`{$key}`.`value`{$operator}{$value}";
            }

        } else {
            $conj = !empty($conj) ? $conj.\':\' : \'\';
            $opt_where[] = array("{$conj}`{$key}`.`value`:{$operator}" => $value);
        }


    }
    $where[] = $opt_where;
}

// Add sorting by options
if (!empty($scriptProperties[\'sortbyOptions\'])) {
    $sorts = explode(\',\', $scriptProperties[\'sortbyOptions\']);
    foreach ($sorts as $sort) {
        $sort = explode(\':\', $sort);
        $option = $sort[0];
        $type = \'string\';
        if (isset($sort[1])) {
            $type = $sort[1];
        }

        switch ($type) {
            case \'number\':
            case \'decimal\':
                $sortbyOptions = "CAST(`{$option}`.`value` AS DECIMAL(13,3))";
                break;
            case \'integer\':
                $sortbyOptions = "CAST(`{$option}`.`value` AS UNSIGNED INTEGER)";
                break;
            case \'date\':
            case \'datetime\':
                $sortbyOptions = "CAST(`{$option}`.`value` AS DATETIME)";
                break;
            default:
                $sortbyOptions ="`{$option}`.`value`";
                break;
        }

        $scriptProperties[\'sortby\'] = str_replace($option, $sortbyOptions, $scriptProperties[\'sortby\']);

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $option, \'on\' => "`{$option}`.`product_id`=`Data`.`id` AND `{$option}`.`key`=\'{$option}\'");
            $joinedOptions[] = $option;
        }

    }
}

// Default parameters
$default = array(
    \'class\' => $class,
    \'where\' => $modx->toJSON($where),
    \'leftJoin\' => $modx->toJSON($leftJoin),
    \'innerJoin\' => $modx->toJSON($innerJoin),
    \'select\' => $modx->toJSON($select),
    \'sortby\' => $class.\'id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => $class.\'.id\',
    \'fastMode\' => false,
    \'return\' => !empty($returnIds) ? \'ids\' : \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
);

// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$rows = $pdoFetch->run();

if (!empty($returnIds)) {return $rows;}

// Processing rows
$output = array();
if (!empty($rows) && is_array($rows)) {
    $q = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\',\'msOnGetProductWeight\')));
    $q->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');
    $q->where(\'modPlugin.disabled = 0\');

    if ($modificators = $modx->getOption(\'ms2_price_snippet\', null, false, true) || $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $q)) {
        /* @var msProductData $product */
        $product = $modx->newObject(\'msProductData\');
    }
    $pdoFetch->addTime(\'Checked the active modifiers\');

    $opt_time = 0;
    foreach ($rows as $k => $row) {
        if ($modificators) {
            $product->fromArray($row, \'\', true, true);
            $tmp = $row[\'price\'];
            $row[\'price\'] = $product->getPrice($row);
            $row[\'weight\'] = $product->getWeight($row);
            if ($row[\'price\'] != $tmp) {
                $row[\'old_price\'] = $tmp;
            }
        }
        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);
        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);
        $row[\'idx\'] = $pdoFetch->idx++;

        $opt_time_start = microtime(true);
        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
        $row = array_merge($row, $options);
        $opt_time += microtime(true) - $opt_time_start;

        $tpl = $pdoFetch->defineChunk($row);
        $output[] .= empty($tpl)
            ? $pdoFetch->getChunk(\'\', $row)
            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);
    }
    $pdoFetch->addTime(\'Loaded options for products\', $opt_time);
    $pdoFetch->addTime(\'Returning processed chunks\');
}

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="msProductsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

// Return output
if (!empty($toSeparatePlaceholders)) {
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
    $modx->setPlaceholder($log, $toSeparatePlaceholders.\'log\');
}
else {
    if (empty($outputSeparator)) {$outputSeparator = "\\n";}
    $output = is_array($output) ? implode($outputSeparator, $output) : $output;
    $output .= $log;

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    }
    else {
        return $output;
    }
}',
      'locked' => 0,
      'properties' => 'a:30:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:18:"tpl.msProducts.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"limit";a:7:{s:4:"name";s:5:"limit";s:4:"desc";s:14:"ms2_prop_limit";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:10;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"offset";a:7:{s:4:"name";s:6:"offset";s:4:"desc";s:15:"ms2_prop_offset";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"depth";a:7:{s:4:"name";s:5:"depth";s:4:"desc";s:14:"ms2_prop_depth";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:10;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"sortby";a:7:{s:4:"name";s:6:"sortby";s:4:"desc";s:15:"ms2_prop_sortby";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:2:"id";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"sortbyOptions";a:7:{s:4:"name";s:13:"sortbyOptions";s:4:"desc";s:22:"ms2_prop_sortbyOptions";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"sortdir";a:7:{s:4:"name";s:7:"sortdir";s:4:"desc";s:16:"ms2_prop_sortdir";s:4:"type";s:4:"list";s:7:"options";a:2:{i:0;a:2:{s:4:"text";s:3:"ASC";s:5:"value";s:3:"ASC";}i:1;a:2:{s:4:"text";s:4:"DESC";s:5:"value";s:4:"DESC";}}s:5:"value";s:3:"ASC";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"toPlaceholder";a:7:{s:4:"name";s:13:"toPlaceholder";s:4:"desc";s:22:"ms2_prop_toPlaceholder";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:22:"toSeparatePlaceholders";a:7:{s:4:"name";s:22:"toSeparatePlaceholders";s:4:"desc";s:31:"ms2_prop_toSeparatePlaceholders";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"parents";a:7:{s:4:"name";s:7:"parents";s:4:"desc";s:16:"ms2_prop_parents";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:9:"resources";a:7:{s:4:"name";s:9:"resources";s:4:"desc";s:18:"ms2_prop_resources";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"fastMode";a:7:{s:4:"name";s:8:"fastMode";s:4:"desc";s:17:"ms2_prop_fastMode";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:14:"includeContent";a:7:{s:4:"name";s:14:"includeContent";s:4:"desc";s:23:"ms2_prop_includeContent";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"includeTVs";a:7:{s:4:"name";s:10:"includeTVs";s:4:"desc";s:19:"ms2_prop_includeTVs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"includeThumbs";a:7:{s:4:"name";s:13:"includeThumbs";s:4:"desc";s:22:"ms2_prop_includeThumbs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"optionFilters";a:7:{s:4:"name";s:13:"optionFilters";s:4:"desc";s:22:"ms2_prop_optionFilters";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"where";a:7:{s:4:"name";s:5:"where";s:4:"desc";s:14:"ms2_prop_where";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:4:"link";a:7:{s:4:"name";s:4:"link";s:4:"desc";s:13:"ms2_prop_link";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"master";a:7:{s:4:"name";s:6:"master";s:4:"desc";s:15:"ms2_prop_master";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"slave";a:7:{s:4:"name";s:5:"slave";s:4:"desc";s:14:"ms2_prop_slave";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"class";a:7:{s:4:"name";s:5:"class";s:4:"desc";s:14:"ms2_prop_class";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:9:"msProduct";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tvPrefix";a:7:{s:4:"name";s:8:"tvPrefix";s:4:"desc";s:17:"ms2_prop_tvPrefix";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"outputSeparator";a:7:{s:4:"name";s:15:"outputSeparator";s:4:"desc";s:24:"ms2_prop_outputSeparator";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:1:"
";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:9:"returnIds";a:7:{s:4:"name";s:9:"returnIds";s:4:"desc";s:18:"ms2_prop_returnIds";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"showUnpublished";a:7:{s:4:"name";s:15:"showUnpublished";s:4:"desc";s:24:"ms2_prop_showUnpublished";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"showDeleted";a:7:{s:4:"name";s:11:"showDeleted";s:4:"desc";s:20:"ms2_prop_showDeleted";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"showHidden";a:7:{s:4:"name";s:10:"showHidden";s:4:"desc";s:19:"ms2_prop_showHidden";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:1;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"showZeroPrice";a:7:{s:4:"name";s:13:"showZeroPrice";s:4:"desc";s:22:"ms2_prop_showZeroPrice";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:1;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"wrapIfEmpty";a:7:{s:4:"name";s:11:"wrapIfEmpty";s:4:"desc";s:20:"ms2_prop_wrapIfEmpty";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:1;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_products.php',
      'content' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);

// You can set modResource instead of msProduct
if (empty($class)) {$scriptProperties[\'class\'] = \'msProduct\';}
if (isset($parents) && $parents === \'\') {
    $scriptProperties[\'parents\'] = $modx->resource->id;
}

/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

// Start building "Where" expression
$where = array(\'class_key\' => \'msProduct\');
if (empty($showZeroPrice)) {$where[\'Data.price:>\'] = 0;}

// Joining tables
$leftJoin = array(
    array(\'class\' => \'msProductData\', \'alias\' => \'Data\', \'on\' => \'`\'.$class.\'`.`id`=`Data`.`id`\'),
    array(\'class\' => \'msVendor\', \'alias\' => \'Vendor\', \'on\' => \'`Data`.`vendor`=`Vendor`.`id`\'),
);
$innerJoin = array();

// Include Thumbnails
$thumbsSelect = array();
if (!empty($includeThumbs)) {
    $thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));
    if(!empty($thumbs[0])){
        foreach ($thumbs as $thumb) {
            $leftJoin[] = array(
                \'class\' => \'msProductFile\',
                \'alias\' => $thumb,
                \'on\' => "`$thumb`.`product_id` = `$class`.`id` AND `$thumb`.`parent` != 0 AND `$thumb`.`path` LIKE \'%/$thumb/\'"
            );
            $thumbsSelect[$thumb] = "`$thumb`.`url` as `$thumb`";
        }
    }
}

// include Linked products
if (!empty($link) && !empty($master)) {
    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`slave` AND `Link`.`link` = \'.$link);
    $where[\'Link.master\'] = $master;
}
else if (!empty($link) && !empty($slave)) {
    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`master` AND `Link`.`link` = \'.$link);
    $where[\'Link.slave\'] = $slave;
}

// Fields to select
$select = array(
    $class => !empty($includeContent) ?  $modx->getSelectColumns($class, $class) : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),
    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),
    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),
);
if (!empty($thumbsSelect)) {$select = array_merge($select, $thumbsSelect);}

// Add custom parameters
foreach (array(\'where\',\'leftJoin\',\'innerJoin\',\'select\') as $v) {
    if (!empty($scriptProperties[$v])) {
        $tmp = $modx->fromJSON($scriptProperties[$v]);
        if (is_array($tmp)) {
            $$v = array_merge($$v, $tmp);
        }
    }
    unset($scriptProperties[$v]);
}

$joinedOptions = array();
// Add filters by options
if (!empty($scriptProperties[\'optionFilters\'])) {
    $filters = $modx->fromJSON($scriptProperties[\'optionFilters\']);
    $opt_where = array();

    foreach ($filters as $key => $value) {
        $key_operator= explode(\':\', $key);
        $operator = \'=\';
        $conj = \'\';
        if ($key_operator && count($key_operator) === 2) {
            $key= $key_operator[0];
            $operator= $key_operator[1];
        }
        elseif ($key_operator && count($key_operator) === 3) {
            $conj= $key_operator[0];
            $key= $key_operator[1];
            $operator= $key_operator[2];
        }

        if (!in_array($key, $joinedOptions)) {
            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $key, \'on\' => "`{$key}`.`product_id`=`Data`.`id` AND `{$key}`.`key`=\'{$key}\'");
            $joinedOptions[] = $key;
        }

        if (!is_string($value)) {
            if (!empty($conj)) {
                $last_where = end($opt_where);
                if (is_array($last_where)) {
                    $conj = !empty($conj) ? $conj.\':\' : \'\';
                    $opt_where[] = array("{$conj}`{$key}`.`value`:{$operator}" => $value);
                } else {
                    array_splice($opt_where, -1, 1, $last_where . " {$conj} `{$key}`.`value`{$operator}{$value}");
                }
            } else {
                $opt_where[] = "`{$key}`.`value`{$operator}{$value}";
            }

        } else {
            $conj = !empty($conj) ? $conj.\':\' : \'\';
            $opt_where[] = array("{$conj}`{$key}`.`value`:{$operator}" => $value);
        }


    }
    $where[] = $opt_where;
}

// Add sorting by options
if (!empty($scriptProperties[\'sortbyOptions\'])) {
    $sorts = explode(\',\', $scriptProperties[\'sortbyOptions\']);
    foreach ($sorts as $sort) {
        $sort = explode(\':\', $sort);
        $option = $sort[0];
        $type = \'string\';
        if (isset($sort[1])) {
            $type = $sort[1];
        }

        switch ($type) {
            case \'number\':
            case \'decimal\':
                $sortbyOptions = "CAST(`{$option}`.`value` AS DECIMAL(13,3))";
                break;
            case \'integer\':
                $sortbyOptions = "CAST(`{$option}`.`value` AS UNSIGNED INTEGER)";
                break;
            case \'date\':
            case \'datetime\':
                $sortbyOptions = "CAST(`{$option}`.`value` AS DATETIME)";
                break;
            default:
                $sortbyOptions ="`{$option}`.`value`";
                break;
        }

        $scriptProperties[\'sortby\'] = str_replace($option, $sortbyOptions, $scriptProperties[\'sortby\']);

        if (!in_array($option, $joinedOptions)) {
            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $option, \'on\' => "`{$option}`.`product_id`=`Data`.`id` AND `{$option}`.`key`=\'{$option}\'");
            $joinedOptions[] = $option;
        }

    }
}

// Default parameters
$default = array(
    \'class\' => $class,
    \'where\' => $modx->toJSON($where),
    \'leftJoin\' => $modx->toJSON($leftJoin),
    \'innerJoin\' => $modx->toJSON($innerJoin),
    \'select\' => $modx->toJSON($select),
    \'sortby\' => $class.\'id\',
    \'sortdir\' => \'ASC\',
    \'groupby\' => $class.\'.id\',
    \'fastMode\' => false,
    \'return\' => !empty($returnIds) ? \'ids\' : \'data\',
    \'nestedChunkPrefix\' => \'minishop2_\',
);

// Merge all properties and run!
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$rows = $pdoFetch->run();

if (!empty($returnIds)) {return $rows;}

// Processing rows
$output = array();
if (!empty($rows) && is_array($rows)) {
    $q = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\',\'msOnGetProductWeight\')));
    $q->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');
    $q->where(\'modPlugin.disabled = 0\');

    if ($modificators = $modx->getOption(\'ms2_price_snippet\', null, false, true) || $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $q)) {
        /* @var msProductData $product */
        $product = $modx->newObject(\'msProductData\');
    }
    $pdoFetch->addTime(\'Checked the active modifiers\');

    $opt_time = 0;
    foreach ($rows as $k => $row) {
        if ($modificators) {
            $product->fromArray($row, \'\', true, true);
            $tmp = $row[\'price\'];
            $row[\'price\'] = $product->getPrice($row);
            $row[\'weight\'] = $product->getWeight($row);
            if ($row[\'price\'] != $tmp) {
                $row[\'old_price\'] = $tmp;
            }
        }
        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);
        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);
        $row[\'idx\'] = $pdoFetch->idx++;

        $opt_time_start = microtime(true);
        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
        $row = array_merge($row, $options);
        $opt_time += microtime(true) - $opt_time_start;

        $tpl = $pdoFetch->defineChunk($row);
        $output[] .= empty($tpl)
            ? $pdoFetch->getChunk(\'\', $row)
            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);
    }
    $pdoFetch->addTime(\'Loaded options for products\', $opt_time);
    $pdoFetch->addTime(\'Returning processed chunks\');
}

$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
    $log .= \'<pre class="msProductsLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

// Return output
if (!empty($toSeparatePlaceholders)) {
    $modx->setPlaceholders($output, $toSeparatePlaceholders);
    $modx->setPlaceholder($log, $toSeparatePlaceholders.\'log\');
}
else {
    if (empty($outputSeparator)) {$outputSeparator = "\\n";}
    $output = is_array($output) ? implode($outputSeparator, $output) : $output;
    $output .= $log;

    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {
        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);
    }

    if (!empty($toPlaceholder)) {
        $modx->setPlaceholder($toPlaceholder, $output);
    }
    else {
        return $output;
    }
}',
    ),
  ),
  '3439b251a5642111f6203513accec221' => 
  array (
    'criteria' => 
    array (
      'name' => 'msCart',
    ),
    'object' => 
    array (
      'id' => 24,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msCart',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

$cart = $miniShop2->cart->get();
$status = $miniShop2->cart->status();
if (!empty($_GET[\'msorder\'])) {
	return \'\';
}
elseif (empty($status[\'total_count\'])) {
	return !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';
}

// Include Thumbnails
$thumbsLeftJoin = \'\';
$thumbsSelect = array();
if (!empty($includeThumbs)) {
	$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));
	if(!empty($thumbs[0])){
		foreach ($thumbs as $thumb) {
			$thumbsLeftJoin .= \',{"class":"msProductFile","alias":"\'.$thumb.\'","on":"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\'%/\'.$thumb.\'/\\\'"}\';
			$thumbsSelect[] = \' "\'.$thumb.\'":"\'.$thumb.\'.url as \'.$thumb.\'" \';
		}
		$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'</b>.\');
	}
}
// End of including Thumbnails

// Fields to select
$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);
$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true);
$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);

// Tables for joining
$leftJoin = \'{"class":"msProductData","alias":"Data","on":"msProduct.id=Data.id"},{"class":"msVendor","alias":"Vendor","on":"Data.vendor=Vendor.id"}\';
if (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}
$select = \'"msProduct":"\'.$resourceColumns.\'","Data":"\'.$dataColumns.\'","Vendor":"\'.$vendorColumns.\'"\';
if (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}
$pdoFetch->addTime(\'Query parameters are prepared.\');

$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];
$pdoFetch->setConfig($scriptProperties);

// Working
$outer = array(\'goods\' => \'\', \'total_count\' => 0, \'total_weight\' => 0, \'total_cost\' => 0);
foreach ($cart as $k => $v) {

	$default = array(
		\'class\' => \'msProduct\'
		,\'where\' => \'{"msProduct.id":"\'.$v[\'id\'].\'","class_key":"msProduct"}\'
		,\'leftJoin\' => \'[\'.$leftJoin.\']\'
		,\'select\' => \'{\'.$select.\'}\'
		,\'sortby\' => \'id\'
		,\'sortdir\' => \'ASC\'
		,\'groupby\' => \'msProduct.id\'
		,\'fastMode\' => false
		,\'limit\' => 0
		,\'return\' => \'data\'
		,\'nestedChunkPrefix\' => \'minishop2_\'
	);
	// Merge all properties and run!
	$pdoFetch->config = array_merge($pdoFetch->config, $default, $scriptProperties);
	$rows = $pdoFetch->run();

	// If not empty and relevant to the context, then show
	if (!empty($rows[0]) && (empty($v[\'ctx\']) || $v[\'ctx\'] == $modx->context->key)) {
		$row = $rows[0];
		$row[\'key\'] = $k;
		$row[\'count\'] = $v[\'count\'];
		$row[\'old_price\'] = $miniShop2->formatPrice(
			$row[\'price\'] != $v[\'price\']
				? $row[\'price\']
				: $row[\'old_price\']
		);
		$row[\'price\'] = $miniShop2->formatPrice($v[\'price\']);
		$row[\'weight\'] = $miniShop2->formatWeight($v[\'weight\']);
		$row[\'cost\'] = $miniShop2->formatPrice($v[\'count\'] * $v[\'price\']);

		// Additional properties of product
		if (!empty($v[\'options\']) && is_array($v[\'options\'])) {
			foreach ($v[\'options\'] as $key => $value) {
				$row[\'option.\'.$key] = $value;
			}
		}
		unset($v[\'options\']);

        // Add option values
        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
        $row = array_merge($row, $options);

		$row[\'idx\'] = $pdoFetch->idx++;
		$tplRow = $pdoFetch->defineChunk($row);
		$outer[\'goods\'] .= empty($tplRow)
			? $pdoFetch->getChunk(\'\', $row)
			: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);

		$outer[\'total_count\'] += $v[\'count\'];
		$outer[\'total_cost\'] +=  $v[\'count\'] * $v[\'price\'];
		$outer[\'total_weight\'] += $v[\'count\'] * $v[\'weight\'];
	}
}

$outer[\'total_cost\'] = $miniShop2->formatPrice($outer[\'total_cost\']);
$outer[\'total_weight\'] = $miniShop2->formatWeight($outer[\'total_weight\']);

return empty($tplOuter)
	? $pdoFetch->getChunk(\'\', $outer)
	: $pdoFetch->getChunk($tplOuter, $outer, $pdoFetch->config[\'fastMode\']);',
      'locked' => 0,
      'properties' => 'a:5:{s:6:"tplRow";a:7:{s:4:"name";s:6:"tplRow";s:4:"desc";s:15:"ms2_prop_tplRow";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:14:"tpl.msCart.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplOuter";a:7:{s:4:"name";s:8:"tplOuter";s:4:"desc";s:17:"ms2_prop_tplOuter";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:16:"tpl.msCart.outer";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplEmpty";a:7:{s:4:"name";s:8:"tplEmpty";s:4:"desc";s:17:"ms2_prop_tplEmpty";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:16:"tpl.msCart.empty";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"includeTVs";a:7:{s:4:"name";s:10:"includeTVs";s:4:"desc";s:19:"ms2_prop_includeTVs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"includeThumbs";a:7:{s:4:"name";s:13:"includeThumbs";s:4:"desc";s:22:"ms2_prop_includeThumbs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_cart.php',
      'content' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

$cart = $miniShop2->cart->get();
$status = $miniShop2->cart->status();
if (!empty($_GET[\'msorder\'])) {
	return \'\';
}
elseif (empty($status[\'total_count\'])) {
	return !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';
}

// Include Thumbnails
$thumbsLeftJoin = \'\';
$thumbsSelect = array();
if (!empty($includeThumbs)) {
	$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));
	if(!empty($thumbs[0])){
		foreach ($thumbs as $thumb) {
			$thumbsLeftJoin .= \',{"class":"msProductFile","alias":"\'.$thumb.\'","on":"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\'%/\'.$thumb.\'/\\\'"}\';
			$thumbsSelect[] = \' "\'.$thumb.\'":"\'.$thumb.\'.url as \'.$thumb.\'" \';
		}
		$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'</b>.\');
	}
}
// End of including Thumbnails

// Fields to select
$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);
$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true);
$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);

// Tables for joining
$leftJoin = \'{"class":"msProductData","alias":"Data","on":"msProduct.id=Data.id"},{"class":"msVendor","alias":"Vendor","on":"Data.vendor=Vendor.id"}\';
if (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}
$select = \'"msProduct":"\'.$resourceColumns.\'","Data":"\'.$dataColumns.\'","Vendor":"\'.$vendorColumns.\'"\';
if (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}
$pdoFetch->addTime(\'Query parameters are prepared.\');

$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];
$pdoFetch->setConfig($scriptProperties);

// Working
$outer = array(\'goods\' => \'\', \'total_count\' => 0, \'total_weight\' => 0, \'total_cost\' => 0);
foreach ($cart as $k => $v) {

	$default = array(
		\'class\' => \'msProduct\'
		,\'where\' => \'{"msProduct.id":"\'.$v[\'id\'].\'","class_key":"msProduct"}\'
		,\'leftJoin\' => \'[\'.$leftJoin.\']\'
		,\'select\' => \'{\'.$select.\'}\'
		,\'sortby\' => \'id\'
		,\'sortdir\' => \'ASC\'
		,\'groupby\' => \'msProduct.id\'
		,\'fastMode\' => false
		,\'limit\' => 0
		,\'return\' => \'data\'
		,\'nestedChunkPrefix\' => \'minishop2_\'
	);
	// Merge all properties and run!
	$pdoFetch->config = array_merge($pdoFetch->config, $default, $scriptProperties);
	$rows = $pdoFetch->run();

	// If not empty and relevant to the context, then show
	if (!empty($rows[0]) && (empty($v[\'ctx\']) || $v[\'ctx\'] == $modx->context->key)) {
		$row = $rows[0];
		$row[\'key\'] = $k;
		$row[\'count\'] = $v[\'count\'];
		$row[\'old_price\'] = $miniShop2->formatPrice(
			$row[\'price\'] != $v[\'price\']
				? $row[\'price\']
				: $row[\'old_price\']
		);
		$row[\'price\'] = $miniShop2->formatPrice($v[\'price\']);
		$row[\'weight\'] = $miniShop2->formatWeight($v[\'weight\']);
		$row[\'cost\'] = $miniShop2->formatPrice($v[\'count\'] * $v[\'price\']);

		// Additional properties of product
		if (!empty($v[\'options\']) && is_array($v[\'options\'])) {
			foreach ($v[\'options\'] as $key => $value) {
				$row[\'option.\'.$key] = $value;
			}
		}
		unset($v[\'options\']);

        // Add option values
        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
        $row = array_merge($row, $options);

		$row[\'idx\'] = $pdoFetch->idx++;
		$tplRow = $pdoFetch->defineChunk($row);
		$outer[\'goods\'] .= empty($tplRow)
			? $pdoFetch->getChunk(\'\', $row)
			: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);

		$outer[\'total_count\'] += $v[\'count\'];
		$outer[\'total_cost\'] +=  $v[\'count\'] * $v[\'price\'];
		$outer[\'total_weight\'] += $v[\'count\'] * $v[\'weight\'];
	}
}

$outer[\'total_cost\'] = $miniShop2->formatPrice($outer[\'total_cost\']);
$outer[\'total_weight\'] = $miniShop2->formatWeight($outer[\'total_weight\']);

return empty($tplOuter)
	? $pdoFetch->getChunk(\'\', $outer)
	: $pdoFetch->getChunk($tplOuter, $outer, $pdoFetch->config[\'fastMode\']);',
    ),
  ),
  '10b0706cc08465d08141c2ef9d22c6c6' => 
  array (
    'criteria' => 
    array (
      'name' => 'msMiniCart',
    ),
    'object' => 
    array (
      'id' => 25,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msMiniCart',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);

$cart = $miniShop2->cart->status();
$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);
$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);

return !empty($tpl) ? $modx->getChunk($tpl, $cart) : print_r($cart,1);',
      'locked' => 0,
      'properties' => 'a:1:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:12:"ms2_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:14:"tpl.msMiniCart";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_minicart.php',
      'content' => '/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);

$cart = $miniShop2->cart->status();
$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);
$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);

return !empty($tpl) ? $modx->getChunk($tpl, $cart) : print_r($cart,1);',
    ),
  ),
  '74808cce3990ff096d1dc5ad4cffe32a' => 
  array (
    'criteria' => 
    array (
      'name' => 'msGallery',
    ),
    'object' => 
    array (
      'id' => 26,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msGallery',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components/minishop2/img/mgr/extensions/\', true);

/** @var msProduct $product */
$product = (!empty($product) && $product != $modx->resource->id)
	? $modx->getObject(\'msProduct\', $product)
	: $modx->resource;
if (!$product || !($product instanceof msProduct)) {return \'This resource is not instance of msProduct class.\';}

/** @var msProductData $data */
$resolution = array();
if ($data = $product->getOne(\'Data\')) {
	$data->initializeMediaSource();
	$properties = $data->mediaSource->getProperties();
	if (isset($properties[\'thumbnails\'][\'value\'])) {
		$fileTypes = $modx->fromJSON($properties[\'thumbnails\'][\'value\']);
		foreach ($fileTypes as $v) {
			$resolution[] = $v[\'w\'].\'x\'.$v[\'h\'];
		}
	}
}

if (empty($limit)) {$limit = 100;}
$where = array(
	\'product_id\' => $product->get(\'id\'),
	\'parent\' => 0,
);
if (!empty($filetype)) {
	$where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));
}
// processing additional query params
if (!empty($scriptProperties[\'where\'])) {
	$tmp = $modx->fromJSON($scriptProperties[\'where\']);
	if (is_array($tmp) && !empty($tmp)) {
		$where = array_merge($where, $tmp);
	}
}
unset($scriptProperties[\'where\']);

// Default parameters
$default = array(
	\'class\' => \'msProductFile\'
	,\'where\' => $modx->toJSON($where)
	,\'select\' => \'{"msProductFile":"all"}\'
	,\'limit\' => $limit
	,\'sortby\' => \'rank\'
	,\'sortdir\' => \'ASC\'
	,\'fastMode\' => false
	,\'return\' => \'data\'
	,\'nestedChunkPrefix\' => \'minishop2_\'
);

// Merge all properties and run!
$scriptProperties[\'tpl\'] = !empty($tplRow) ? $tplRow : \'\';
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$rows = $pdoFetch->run();

// Processing rows
$output = null; $images = array();

$pdoFetch->addTime(\'Fetching thumbnails\');
foreach ($rows as $k => $row) {
	$row[\'idx\'] = $pdoFetch->idx++;
	$images[$row[\'id\']] = $row;

	if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {
		$q = $modx->newQuery(\'msProductFile\', array(\'parent\' => $row[\'id\']));
		$q->select(\'url\');
		if ($q->prepare() && $q->stmt->execute()) {
			while ($url = $q->stmt->fetch(PDO::FETCH_COLUMN)) {
				$tmp = parse_url($url);
				if (preg_match(\'/((?:\\d{1,4}|)x(?:\\d{1,4}|))/\', $tmp[\'path\'], $size)) {
					$images[$row[\'id\']][$size[0]] = $url;
				}
			}
		}
	}
	elseif (isset($row[\'type\'])) {
		$row[\'thumbnail\'] = $row[\'url\'] =  (file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\'))
			? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'].\'.png\'
			: MODX_ASSETS_URL . $extensionsDir . \'other.png\';
		foreach ($resolution as $v) {
			$images[$row[\'id\']][$v] = $row[\'thumbnail\'];
		}
	}
}

// Processing chunks
$pdoFetch->addTime(\'Processing chunks\');
$output = array();
foreach ($images as $row) {
	$tpl = $pdoFetch->defineChunk($row);
	$output[] = empty($tpl)
		? $pdoFetch->getChunk(\'\', $row)
		: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);
}
$pdoFetch->addTime(\'Returning processed chunks\');

// Return output
$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
	$log .= \'<pre class="msGalleryLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

if (!empty($toSeparatePlaceholders)) {
	$output[\'log\'] = $log;
	$modx->setPlaceholders($output, $toSeparatePlaceholders);
}
else {
	if (count($output) === 1 && !empty($tplSingle)) {
		$output = $pdoFetch->getChunk($tplSingle, array_shift($images));
	}
	else {
		if (empty($outputSeparator)) {$outputSeparator = "\\n";}
		$output = implode($outputSeparator, $output);

		if (!empty($tplOuter) && !empty($output)) {
			$arr = array_shift($images);
			$arr[\'rows\'] = $output;
			$output = $pdoFetch->getChunk($tplOuter, $arr);
		}
		elseif (empty($output)) {
			$output = !empty($tplEmpty)
				? $pdoFetch->getChunk($tplEmpty)
				: \'\';
		}
	}

	$output .= $log;
	if (!empty($toPlaceholder)) {
		$modx->setPlaceholder($toPlaceholder, $output);
	}
	else {
		return $output;
	}
}',
      'locked' => 0,
      'properties' => 'a:14:{s:7:"product";a:7:{s:4:"name";s:7:"product";s:4:"desc";s:16:"ms2_prop_product";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"tplRow";a:7:{s:4:"name";s:6:"tplRow";s:4:"desc";s:15:"ms2_prop_tplRow";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:17:"tpl.msGallery.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplOuter";a:7:{s:4:"name";s:8:"tplOuter";s:4:"desc";s:17:"ms2_prop_tplOuter";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:19:"tpl.msGallery.outer";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplEmpty";a:7:{s:4:"name";s:8:"tplEmpty";s:4:"desc";s:17:"ms2_prop_tplEmpty";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:19:"tpl.msGallery.empty";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:9:"tplSingle";a:7:{s:4:"name";s:9:"tplSingle";s:4:"desc";s:18:"ms2_prop_tplSingle";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"limit";a:7:{s:4:"name";s:5:"limit";s:4:"desc";s:14:"ms2_prop_limit";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:100;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"offset";a:7:{s:4:"name";s:6:"offset";s:4:"desc";s:15:"ms2_prop_offset";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";i:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"sortby";a:7:{s:4:"name";s:6:"sortby";s:4:"desc";s:15:"ms2_prop_sortby";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:4:"rank";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"sortdir";a:7:{s:4:"name";s:7:"sortdir";s:4:"desc";s:16:"ms2_prop_sortdir";s:4:"type";s:4:"list";s:7:"options";a:2:{i:0;a:2:{s:4:"text";s:3:"ASC";s:5:"value";s:3:"ASC";}i:1;a:2:{s:4:"text";s:4:"DESC";s:5:"value";s:4:"DESC";}}s:5:"value";s:3:"ASC";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"toPlaceholder";a:7:{s:4:"name";s:13:"toPlaceholder";s:4:"desc";s:22:"ms2_prop_toPlaceholder";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:22:"toSeparatePlaceholders";a:7:{s:4:"name";s:22:"toSeparatePlaceholders";s:4:"desc";s:31:"ms2_prop_toSeparatePlaceholders";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:7:"showLog";a:7:{s:4:"name";s:7:"showLog";s:4:"desc";s:16:"ms2_prop_showLog";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:5:"where";a:7:{s:4:"name";s:5:"where";s:4:"desc";s:14:"ms2_prop_where";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"filetype";a:7:{s:4:"name";s:8:"filetype";s:4:"desc";s:17:"ms2_prop_filetype";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_gallery.php',
      'content' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components/minishop2/img/mgr/extensions/\', true);

/** @var msProduct $product */
$product = (!empty($product) && $product != $modx->resource->id)
	? $modx->getObject(\'msProduct\', $product)
	: $modx->resource;
if (!$product || !($product instanceof msProduct)) {return \'This resource is not instance of msProduct class.\';}

/** @var msProductData $data */
$resolution = array();
if ($data = $product->getOne(\'Data\')) {
	$data->initializeMediaSource();
	$properties = $data->mediaSource->getProperties();
	if (isset($properties[\'thumbnails\'][\'value\'])) {
		$fileTypes = $modx->fromJSON($properties[\'thumbnails\'][\'value\']);
		foreach ($fileTypes as $v) {
			$resolution[] = $v[\'w\'].\'x\'.$v[\'h\'];
		}
	}
}

if (empty($limit)) {$limit = 100;}
$where = array(
	\'product_id\' => $product->get(\'id\'),
	\'parent\' => 0,
);
if (!empty($filetype)) {
	$where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));
}
// processing additional query params
if (!empty($scriptProperties[\'where\'])) {
	$tmp = $modx->fromJSON($scriptProperties[\'where\']);
	if (is_array($tmp) && !empty($tmp)) {
		$where = array_merge($where, $tmp);
	}
}
unset($scriptProperties[\'where\']);

// Default parameters
$default = array(
	\'class\' => \'msProductFile\'
	,\'where\' => $modx->toJSON($where)
	,\'select\' => \'{"msProductFile":"all"}\'
	,\'limit\' => $limit
	,\'sortby\' => \'rank\'
	,\'sortdir\' => \'ASC\'
	,\'fastMode\' => false
	,\'return\' => \'data\'
	,\'nestedChunkPrefix\' => \'minishop2_\'
);

// Merge all properties and run!
$scriptProperties[\'tpl\'] = !empty($tplRow) ? $tplRow : \'\';
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$rows = $pdoFetch->run();

// Processing rows
$output = null; $images = array();

$pdoFetch->addTime(\'Fetching thumbnails\');
foreach ($rows as $k => $row) {
	$row[\'idx\'] = $pdoFetch->idx++;
	$images[$row[\'id\']] = $row;

	if (isset($row[\'type\']) && $row[\'type\'] == \'image\') {
		$q = $modx->newQuery(\'msProductFile\', array(\'parent\' => $row[\'id\']));
		$q->select(\'url\');
		if ($q->prepare() && $q->stmt->execute()) {
			while ($url = $q->stmt->fetch(PDO::FETCH_COLUMN)) {
				$tmp = parse_url($url);
				if (preg_match(\'/((?:\\d{1,4}|)x(?:\\d{1,4}|))/\', $tmp[\'path\'], $size)) {
					$images[$row[\'id\']][$size[0]] = $url;
				}
			}
		}
	}
	elseif (isset($row[\'type\'])) {
		$row[\'thumbnail\'] = $row[\'url\'] =  (file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\'))
			? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'].\'.png\'
			: MODX_ASSETS_URL . $extensionsDir . \'other.png\';
		foreach ($resolution as $v) {
			$images[$row[\'id\']][$v] = $row[\'thumbnail\'];
		}
	}
}

// Processing chunks
$pdoFetch->addTime(\'Processing chunks\');
$output = array();
foreach ($images as $row) {
	$tpl = $pdoFetch->defineChunk($row);
	$output[] = empty($tpl)
		? $pdoFetch->getChunk(\'\', $row)
		: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);
}
$pdoFetch->addTime(\'Returning processed chunks\');

// Return output
$log = \'\';
if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
	$log .= \'<pre class="msGalleryLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

if (!empty($toSeparatePlaceholders)) {
	$output[\'log\'] = $log;
	$modx->setPlaceholders($output, $toSeparatePlaceholders);
}
else {
	if (count($output) === 1 && !empty($tplSingle)) {
		$output = $pdoFetch->getChunk($tplSingle, array_shift($images));
	}
	else {
		if (empty($outputSeparator)) {$outputSeparator = "\\n";}
		$output = implode($outputSeparator, $output);

		if (!empty($tplOuter) && !empty($output)) {
			$arr = array_shift($images);
			$arr[\'rows\'] = $output;
			$output = $pdoFetch->getChunk($tplOuter, $arr);
		}
		elseif (empty($output)) {
			$output = !empty($tplEmpty)
				? $pdoFetch->getChunk($tplEmpty)
				: \'\';
		}
	}

	$output .= $log;
	if (!empty($toPlaceholder)) {
		$modx->setPlaceholder($toPlaceholder, $output);
	}
	else {
		return $output;
	}
}',
    ),
  ),
  'e32e33c99e471cf05956cbeb7283979d' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOptions',
    ),
    'object' => 
    array (
      'id' => 27,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msOptions',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var array $scriptProperties */
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

if (empty($product) && !empty($input)) {$product = $input;}
if (empty($selected)) {$selected = \'\';}
if (empty($outputSeparator)) {$outputSeparator = "\\n";}
if ((empty($name) || $name == \'id\') && !empty($options)) {$name = $options;}

$output = \'\';
$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;
if (!($product instanceof msProduct)) {
	$output = \'This resource is not instance of msProduct class.\';
}
elseif (!empty($name) && $options = $product->get($name)) {
    if (!is_array($options)) {
        $options = array($options);
    }
	if ($options[0] == \'\') {
		$output = !empty($tplEmpty)
			? $pdoFetch->getChunk($tplEmpty, $scriptProperties)
			: \'\';
	}
	else {
		$rows = array();
		foreach ($options as $value) {
			$pls = array(
				\'value\' => $value
				,\'selected\' => $value == $selected ? \'selected\' : \'\'
			);
			$rows[] = empty($tplRow) ? $value : $pdoFetch->getChunk($tplRow, $pls);
		}

		$rows = implode($outputSeparator, $rows);
		$output = empty($tplOuter)
			? $pdoFetch->getChunk(\'\', array(\'name\' => $name, \'rows\' => $rows))
			: $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, array(\'name\' => $name, \'rows\' => $rows)));
	}
}

return $output;',
      'locked' => 0,
      'properties' => 'a:7:{s:7:"product";a:7:{s:4:"name";s:7:"product";s:4:"desc";s:16:"ms2_prop_product";s:4:"type";s:11:"numberfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"tplRow";a:7:{s:4:"name";s:6:"tplRow";s:4:"desc";s:15:"ms2_prop_tplRow";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:17:"tpl.msOptions.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplOuter";a:7:{s:4:"name";s:8:"tplOuter";s:4:"desc";s:17:"ms2_prop_tplOuter";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:19:"tpl.msOptions.outer";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplEmpty";a:7:{s:4:"name";s:8:"tplEmpty";s:4:"desc";s:17:"ms2_prop_tplEmpty";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:4:"name";a:7:{s:4:"name";s:4:"name";s:4:"desc";s:13:"ms2_prop_name";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"selected";a:7:{s:4:"name";s:8:"selected";s:4:"desc";s:17:"ms2_prop_selected";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"outputSeparator";a:7:{s:4:"name";s:15:"outputSeparator";s:4:"desc";s:24:"ms2_prop_outputSeparator";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:1:"
";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_options.php',
      'content' => '/* @var array $scriptProperties */
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

if (empty($product) && !empty($input)) {$product = $input;}
if (empty($selected)) {$selected = \'\';}
if (empty($outputSeparator)) {$outputSeparator = "\\n";}
if ((empty($name) || $name == \'id\') && !empty($options)) {$name = $options;}

$output = \'\';
$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;
if (!($product instanceof msProduct)) {
	$output = \'This resource is not instance of msProduct class.\';
}
elseif (!empty($name) && $options = $product->get($name)) {
    if (!is_array($options)) {
        $options = array($options);
    }
	if ($options[0] == \'\') {
		$output = !empty($tplEmpty)
			? $pdoFetch->getChunk($tplEmpty, $scriptProperties)
			: \'\';
	}
	else {
		$rows = array();
		foreach ($options as $value) {
			$pls = array(
				\'value\' => $value
				,\'selected\' => $value == $selected ? \'selected\' : \'\'
			);
			$rows[] = empty($tplRow) ? $value : $pdoFetch->getChunk($tplRow, $pls);
		}

		$rows = implode($outputSeparator, $rows);
		$output = empty($tplOuter)
			? $pdoFetch->getChunk(\'\', array(\'name\' => $name, \'rows\' => $rows))
			: $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, array(\'name\' => $name, \'rows\' => $rows)));
	}
}

return $output;',
    ),
  ),
  '9cf1b36b2822eef0d5e7959f200dd76e' => 
  array (
    'criteria' => 
    array (
      'name' => 'msOrder',
    ),
    'object' => 
    array (
      'id' => 28,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msOrder',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);
$pdoFetch->addTime(\'pdoTools loaded.\');

if (!empty($_GET[\'msorder\'])) {
	if ($order = $modx->getObject(\'msOrder\', $_GET[\'msorder\'])) {
		if ((!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($_GET[\'msorder\'], $_SESSION[\'minishop2\'][\'orders\'])) || $order->get(\'user_id\') == $modx->user->id || $modx->context->key == \'mgr\') {
			if (empty($tplSuccess)) {$tplSuccess = \'tpl.msOrder.success\';}
			return $pdoFetch->getChunk($tplSuccess, array(\'id\' => $_GET[\'msorder\']));
		}
	}
}

$cart = $miniShop2->cart->get();
$status = $miniShop2->cart->status();
$order = $miniShop2->order->get();
if (empty($status[\'total_count\'])) {
	return !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';
}

$deliveryColumns = $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\');
$paymentColumns = $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\');

// Default parameters
$default = array(
	\'class\' => \'msDelivery\'
	,\'where\' => \'{"active":1}\'
	,\'select\' => \'{"msDelivery":"all"}\'
	,\'sortby\' => \'rank\'
	,\'sortdir\' => \'ASC\'
	,\'return\' => \'data\'
	,\'fastMode\' => false
	,\'nestedChunkPrefix\' => \'minishop2_\'
);

// Merge all properties and run!
$pdoFetch->addTime(\'Query parameters are prepared.\');
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$deliveries = $pdoFetch->run();
$pdoFetch->addTime(\'Fetched deliveries.\');

$arrays = array(\'deliveries\' => array(),\'payments\' => array());
if (!empty($deliveries)) {
	foreach ($deliveries as $di => $delivery) {
		$did = $delivery[\'id\'];
		if (empty($order[\'delivery\']) && $di == 0) {
			$miniShop2->order->add(\'delivery\', $did);
			$order = $miniShop2->order->get();
		}

		$delivery[\'payments\'] = array();
		$pdoFetch->config = array_merge($pdoFetch->config, array(
			\'class\' => \'msPayment\'
			,\'innerJoin\' => \'[{"class":"msDeliveryMember","alias":"Member","on":"Member.delivery_id=\'.$delivery[\'id\'].\' AND Member.payment_id=msPayment.id"}]\'
			,\'select\' => \'{"msPayment":"all"}\'
		));
		$pdoFetch->addTime(\'Fetched payments for delivery \'.$delivery[\'name\'].\'.\');
		$payments = $pdoFetch->run();
		if (!empty($payments)) {
			foreach ($payments as $pi => $payment) {
				$pdoFetch->addTime(\'Processing payment \'.$payment[\'name\'].\'.\');
				$pid = $payment[\'id\'];
				if (empty($order[\'payment\']) && $pi == 0) {
					$miniShop2->order->add(\'payment\', $pid);
					$order = $miniShop2->order->get();
				}
				if (!array_key_exists($pid, $arrays[\'payments\'])) {
					$payment[\'checked\'] = !empty($order[\'payment\']) && $order[\'payment\'] == $pid ? \'checked\' : \'\';
					$arrays[\'payments\'][$pid] = empty($tplPayment)
						? $pdoFetch->getChunk(\'\', $payment)
						: $pdoFetch->getChunk($tplPayment, $payment);
				}
				$delivery[\'payments\'][] = $pid;
			}
		}

		$pdoFetch->addTime(\'Processing delivery \'.$delivery[\'name\'].\'.\');
		$delivery[\'checked\'] = !empty($order[\'delivery\']) && $order[\'delivery\'] == $did ? \'checked\' : \'\';
		$delivery[\'payments\'] = $modx->toJSON($delivery[\'payments\']);
		$arrays[\'deliveries\'][$did] = empty($tplDelivery)
			? $pdoFetch->getChunk(\'\', $delivery)
			: $pdoFetch->getChunk($tplDelivery, $delivery);
	}
}

$order_cost = $miniShop2->order->getcost();
$deliveries = implode(\'\', $arrays[\'deliveries\']);
$payments = implode(\'\', $arrays[\'payments\']);
$form = array(
	\'deliveries\' => $deliveries
	,\'payments\' => $payments
	,\'order_cost\' => $miniShop2->formatPrice($order_cost[\'data\'][\'cost\'])
);

// Setting user fields
if ($isAuthenticated = $modx->user->isAuthenticated()) {
	$profile = $modx->user->Profile->toArray();
}
$user_fields = array(
	\'receiver\' => \'fullname\',
	\'phone\' => \'phone\',
	\'email\' => \'email\',
	\'comment\' => \'extended[comment]\',
	\'index\' => \'zip\',
	\'country\' => \'country\',
	\'region\' => \'state\',
	\'city\' => \'city\',
	\'street\' => \'address\',
	\'building\' => \'extended[building]\',
	\'room\' => \'extended[room]\',
);
foreach ($user_fields as $key => $value) {
	if (!empty($profile) && !empty($value)) {
		if (strpos($value, \'extended\') !== false) {
			$tmp = substr($value, 9, -1);
			$value = !empty($profile[\'extended\'][$tmp])
				? $profile[\'extended\'][$tmp]
				: \'\';
		}
		else {
			$value = $profile[$value];
		}
		$tmp = $miniShop2->order->add($key, $value);
		if ($tmp[\'success\'] && !empty($tmp[\'data\'][$key])) {
			$form[$key] = $tmp[\'data\'][$key];
		}
	}
	if (empty($form[$key]) && !empty($order[$key])) {
		$form[$key] = $order[$key];
		unset($order[$key]);
	}
}
$form = array_merge($order, $form);
$form[\'errors\'] = array();

if (!empty($_POST)) {
	$response = $miniShop2->order->getDeliveryRequiresFields();
	$requires = $response[\'data\'][\'requires\'];

	foreach ($_POST as $field => $val) {
		$validated = $miniShop2->order->validate($field, $val);
		if ((in_array($field, $requires) && empty($validated))) {
			$form[\'errors\'][$field] = \'error\';
		}
	}
}

$output = empty($tplOuter)
	? $pdoFetch->getChunk(\'\', $form)
	: $pdoFetch->getChunk($tplOuter, $form);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
	$output .= \'<pre class="msOrderLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

return $output;',
      'locked' => 0,
      'properties' => 'a:5:{s:8:"tplOuter";a:7:{s:4:"name";s:8:"tplOuter";s:4:"desc";s:17:"ms2_prop_tplOuter";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:17:"tpl.msOrder.outer";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"tplPayment";a:7:{s:4:"name";s:10:"tplPayment";s:4:"desc";s:19:"ms2_prop_tplPayment";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:19:"tpl.msOrder.payment";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:11:"tplDelivery";a:7:{s:4:"name";s:11:"tplDelivery";s:4:"desc";s:20:"ms2_prop_tplDelivery";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:20:"tpl.msOrder.delivery";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplEmpty";a:7:{s:4:"name";s:8:"tplEmpty";s:4:"desc";s:17:"ms2_prop_tplEmpty";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"tplSuccess";a:7:{s:4:"name";s:10:"tplSuccess";s:4:"desc";s:19:"ms2_prop_tplSuccess";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:19:"tpl.msOrder.success";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_order.php',
      'content' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);
$pdoFetch->addTime(\'pdoTools loaded.\');

if (!empty($_GET[\'msorder\'])) {
	if ($order = $modx->getObject(\'msOrder\', $_GET[\'msorder\'])) {
		if ((!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($_GET[\'msorder\'], $_SESSION[\'minishop2\'][\'orders\'])) || $order->get(\'user_id\') == $modx->user->id || $modx->context->key == \'mgr\') {
			if (empty($tplSuccess)) {$tplSuccess = \'tpl.msOrder.success\';}
			return $pdoFetch->getChunk($tplSuccess, array(\'id\' => $_GET[\'msorder\']));
		}
	}
}

$cart = $miniShop2->cart->get();
$status = $miniShop2->cart->status();
$order = $miniShop2->order->get();
if (empty($status[\'total_count\'])) {
	return !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';
}

$deliveryColumns = $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\');
$paymentColumns = $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\');

// Default parameters
$default = array(
	\'class\' => \'msDelivery\'
	,\'where\' => \'{"active":1}\'
	,\'select\' => \'{"msDelivery":"all"}\'
	,\'sortby\' => \'rank\'
	,\'sortdir\' => \'ASC\'
	,\'return\' => \'data\'
	,\'fastMode\' => false
	,\'nestedChunkPrefix\' => \'minishop2_\'
);

// Merge all properties and run!
$pdoFetch->addTime(\'Query parameters are prepared.\');
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$deliveries = $pdoFetch->run();
$pdoFetch->addTime(\'Fetched deliveries.\');

$arrays = array(\'deliveries\' => array(),\'payments\' => array());
if (!empty($deliveries)) {
	foreach ($deliveries as $di => $delivery) {
		$did = $delivery[\'id\'];
		if (empty($order[\'delivery\']) && $di == 0) {
			$miniShop2->order->add(\'delivery\', $did);
			$order = $miniShop2->order->get();
		}

		$delivery[\'payments\'] = array();
		$pdoFetch->config = array_merge($pdoFetch->config, array(
			\'class\' => \'msPayment\'
			,\'innerJoin\' => \'[{"class":"msDeliveryMember","alias":"Member","on":"Member.delivery_id=\'.$delivery[\'id\'].\' AND Member.payment_id=msPayment.id"}]\'
			,\'select\' => \'{"msPayment":"all"}\'
		));
		$pdoFetch->addTime(\'Fetched payments for delivery \'.$delivery[\'name\'].\'.\');
		$payments = $pdoFetch->run();
		if (!empty($payments)) {
			foreach ($payments as $pi => $payment) {
				$pdoFetch->addTime(\'Processing payment \'.$payment[\'name\'].\'.\');
				$pid = $payment[\'id\'];
				if (empty($order[\'payment\']) && $pi == 0) {
					$miniShop2->order->add(\'payment\', $pid);
					$order = $miniShop2->order->get();
				}
				if (!array_key_exists($pid, $arrays[\'payments\'])) {
					$payment[\'checked\'] = !empty($order[\'payment\']) && $order[\'payment\'] == $pid ? \'checked\' : \'\';
					$arrays[\'payments\'][$pid] = empty($tplPayment)
						? $pdoFetch->getChunk(\'\', $payment)
						: $pdoFetch->getChunk($tplPayment, $payment);
				}
				$delivery[\'payments\'][] = $pid;
			}
		}

		$pdoFetch->addTime(\'Processing delivery \'.$delivery[\'name\'].\'.\');
		$delivery[\'checked\'] = !empty($order[\'delivery\']) && $order[\'delivery\'] == $did ? \'checked\' : \'\';
		$delivery[\'payments\'] = $modx->toJSON($delivery[\'payments\']);
		$arrays[\'deliveries\'][$did] = empty($tplDelivery)
			? $pdoFetch->getChunk(\'\', $delivery)
			: $pdoFetch->getChunk($tplDelivery, $delivery);
	}
}

$order_cost = $miniShop2->order->getcost();
$deliveries = implode(\'\', $arrays[\'deliveries\']);
$payments = implode(\'\', $arrays[\'payments\']);
$form = array(
	\'deliveries\' => $deliveries
	,\'payments\' => $payments
	,\'order_cost\' => $miniShop2->formatPrice($order_cost[\'data\'][\'cost\'])
);

// Setting user fields
if ($isAuthenticated = $modx->user->isAuthenticated()) {
	$profile = $modx->user->Profile->toArray();
}
$user_fields = array(
	\'receiver\' => \'fullname\',
	\'phone\' => \'phone\',
	\'email\' => \'email\',
	\'comment\' => \'extended[comment]\',
	\'index\' => \'zip\',
	\'country\' => \'country\',
	\'region\' => \'state\',
	\'city\' => \'city\',
	\'street\' => \'address\',
	\'building\' => \'extended[building]\',
	\'room\' => \'extended[room]\',
);
foreach ($user_fields as $key => $value) {
	if (!empty($profile) && !empty($value)) {
		if (strpos($value, \'extended\') !== false) {
			$tmp = substr($value, 9, -1);
			$value = !empty($profile[\'extended\'][$tmp])
				? $profile[\'extended\'][$tmp]
				: \'\';
		}
		else {
			$value = $profile[$value];
		}
		$tmp = $miniShop2->order->add($key, $value);
		if ($tmp[\'success\'] && !empty($tmp[\'data\'][$key])) {
			$form[$key] = $tmp[\'data\'][$key];
		}
	}
	if (empty($form[$key]) && !empty($order[$key])) {
		$form[$key] = $order[$key];
		unset($order[$key]);
	}
}
$form = array_merge($order, $form);
$form[\'errors\'] = array();

if (!empty($_POST)) {
	$response = $miniShop2->order->getDeliveryRequiresFields();
	$requires = $response[\'data\'][\'requires\'];

	foreach ($_POST as $field => $val) {
		$validated = $miniShop2->order->validate($field, $val);
		if ((in_array($field, $requires) && empty($validated))) {
			$form[\'errors\'][$field] = \'error\';
		}
	}
}

$output = empty($tplOuter)
	? $pdoFetch->getChunk(\'\', $form)
	: $pdoFetch->getChunk($tplOuter, $form);

if ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {
	$output .= \'<pre class="msOrderLog">\' . print_r($pdoFetch->getTime(), 1) . \'</pre>\';
}

return $output;',
    ),
  ),
  '27b4fb91c5665a70fdda9b55ccb4be40' => 
  array (
    'criteria' => 
    array (
      'name' => 'msGetOrder',
    ),
    'object' => 
    array (
      'id' => 29,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msGetOrder',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => 'if (empty($id)) {return $modx->lexicon(\'ms2_err_order_nf\');}
/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

/* @var msOrder $order */
if (!$order = $modx->getObject(\'msOrder\', $id)) {return $modx->lexicon(\'ms2_err_order_nf\');}
if ((empty($_SESSION[\'minishop2\'][\'orders\']) || !in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) && $order->get(\'user_id\') != $modx->user->id && $modx->context->key != \'mgr\') {
	return !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';
}

$user = $order->getOne(\'User\');
if ($user) {
	$user = $user->getOne(\'Profile\');
}
$address = $order->getOne(\'Address\');
$delivery = $order->getOne(\'Delivery\');
$payment = $order->getOne(\'Payment\');
$outer = array_merge($order->toArray(), array(
	\'user\' => $user ? $user->toArray() : array(),
	\'address\' => $address ? $address->toArray() : array(),
	\'delivery\' => $delivery ? $delivery->toArray() : array(),
	\'payment\' => $payment ? $payment->toArray() : array(),
));

$outer[\'goods\'] = \'\';
$outer[\'cart_count\'] = 0;
$outer[\'cost\'] = $miniShop2->formatPrice($outer[\'cost\']);
$outer[\'cart_cost\'] = $miniShop2->formatPrice($outer[\'cart_cost\']);
$outer[\'delivery_cost\'] = $miniShop2->formatPrice($outer[\'delivery_cost\']);
$outer[\'weight\'] = $outer[\'cart_weight\'] = $miniShop2->formatWeight($outer[\'weight\']);

// Include Thumbnails
$thumbsLeftJoin = \'\';
$thumbsSelect = array();
if (!empty($includeThumbs)) {
	$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));
	if(!empty($thumbs[0])){
		foreach ($thumbs as $thumb) {
			$thumbsLeftJoin .= \',{"class":"msProductFile","alias":"\'.$thumb.\'","on":"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\'%/\'.$thumb.\'/\\\'"}\';
			$thumbsSelect[] = \' "\'.$thumb.\'":"\'.$thumb.\'.url as \'.$thumb.\'" \';
		}
		$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'</b>.\');
	}
}
// End of including Thumbnails

// Fields to select
$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);
$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true) . \',`Data`.`price` as `original_price`\';
$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);
$orderProductColumns = $modx->getSelectColumns(\'msOrderProduct\', \'msOrderProduct\', \'\', array(\'id\'), true);

// Tables for joining
$leftJoin = \'{"class":"msProduct","alias":"msProduct","on":"msProduct.id=msOrderProduct.product_id"},{"class":"msProductData","alias":"Data","on":"msProduct.id=Data.id"},{"class":"msVendor","alias":"Vendor","on":"Data.vendor=Vendor.id"}\';
if (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}
$select = \'"msProduct":"\'.$resourceColumns.\'","Data":"\'.$dataColumns.\'","OrderProduct":"\'.$orderProductColumns.\'","Vendor":"\'.$vendorColumns.\'"\';
if (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}

$default = array(
	\'class\' => \'msOrderProduct\'
	,\'where\' => \'{"msOrderProduct.order_id":"\'.$id.\'"}\'
	,\'leftJoin\' => \'[\'.$leftJoin.\']\'
	,\'select\' => \'{\'.$select.\'}\'
	,\'sortby\' => \'id\'
	,\'sortdir\' => \'ASC\'
	,\'groupby\' => \'msOrderProduct.id\'
	,\'fastMode\' => false
	,\'limit\' => 0
	,\'return\' => \'data\'
	,\'nestedChunkPrefix\' => \'minishop2_\'
);
// Merge all properties and run!
$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$rows = $pdoFetch->run();

/** @var msOrderProduct $row */
foreach ($rows as $row) {
	$outer[\'cart_count\'] += $row[\'count\'];
	$row[\'old_price\'] = $miniShop2->formatPrice(
		$row[\'original_price\'] != $row[\'price\']
			? $row[\'original_price\']
			: $row[\'old_price\']
	);
	$row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
	$row[\'cost\'] = $miniShop2->formatPrice($row[\'cost\']);
	$row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);

	$row[\'id\'] = (integer) $row[\'id\'];
	if (empty($row[\'name\'])) {
		$row[\'name\'] = $row[\'pagetitle\'];
	}
	else {
		$row[\'pagetitle\'] = $row[\'name\'];
	}
	$row[\'link\'] = !empty($row[\'id\'])
		? $row[\'link\'] = $modx->makeUrl($row[\'id\'], \'\', \'\', \'full\')
		: \'\';

	// Additional properties of product
	$options = !is_array($row[\'options\'])
		? $modx->fromJSON($row[\'options\'])
		: $row[\'options\'];
	if (!empty($options) && is_array($options)) {
		foreach ($options as $key => $value) {
			$row[\'option.\'.$key] = $value;
		}
	}

    // Add option values
    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
    $row = array_merge($row, $options);

	$row[\'idx\'] = $pdoFetch->idx++;
	$tplRow = $pdoFetch->defineChunk($row);
	$outer[\'goods\'] .= empty($tplRow)
		? $pdoFetch->getChunk(\'\', $row)
		: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);
}

if (empty($tplOuter)) {
	$modx->toPlaceholders($outer);
}
else {
	return $pdoFetch->getChunk($tplOuter, $outer);
}',
      'locked' => 0,
      'properties' => 'a:5:{s:6:"tplRow";a:7:{s:4:"name";s:6:"tplRow";s:4:"desc";s:15:"ms2_prop_tplRow";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:18:"tpl.msGetOrder.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplOuter";a:7:{s:4:"name";s:8:"tplOuter";s:4:"desc";s:17:"ms2_prop_tplOuter";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplEmpty";a:7:{s:4:"name";s:8:"tplEmpty";s:4:"desc";s:17:"ms2_prop_tplEmpty";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:10:"includeTVs";a:7:{s:4:"name";s:10:"includeTVs";s:4:"desc";s:19:"ms2_prop_includeTVs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"includeThumbs";a:7:{s:4:"name";s:13:"includeThumbs";s:4:"desc";s:22:"ms2_prop_includeThumbs";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_get_order.php',
      'content' => 'if (empty($id)) {return $modx->lexicon(\'ms2_err_order_nf\');}
/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);
/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

/* @var msOrder $order */
if (!$order = $modx->getObject(\'msOrder\', $id)) {return $modx->lexicon(\'ms2_err_order_nf\');}
if ((empty($_SESSION[\'minishop2\'][\'orders\']) || !in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) && $order->get(\'user_id\') != $modx->user->id && $modx->context->key != \'mgr\') {
	return !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';
}

$user = $order->getOne(\'User\');
if ($user) {
	$user = $user->getOne(\'Profile\');
}
$address = $order->getOne(\'Address\');
$delivery = $order->getOne(\'Delivery\');
$payment = $order->getOne(\'Payment\');
$outer = array_merge($order->toArray(), array(
	\'user\' => $user ? $user->toArray() : array(),
	\'address\' => $address ? $address->toArray() : array(),
	\'delivery\' => $delivery ? $delivery->toArray() : array(),
	\'payment\' => $payment ? $payment->toArray() : array(),
));

$outer[\'goods\'] = \'\';
$outer[\'cart_count\'] = 0;
$outer[\'cost\'] = $miniShop2->formatPrice($outer[\'cost\']);
$outer[\'cart_cost\'] = $miniShop2->formatPrice($outer[\'cart_cost\']);
$outer[\'delivery_cost\'] = $miniShop2->formatPrice($outer[\'delivery_cost\']);
$outer[\'weight\'] = $outer[\'cart_weight\'] = $miniShop2->formatWeight($outer[\'weight\']);

// Include Thumbnails
$thumbsLeftJoin = \'\';
$thumbsSelect = array();
if (!empty($includeThumbs)) {
	$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));
	if(!empty($thumbs[0])){
		foreach ($thumbs as $thumb) {
			$thumbsLeftJoin .= \',{"class":"msProductFile","alias":"\'.$thumb.\'","on":"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\'%/\'.$thumb.\'/\\\'"}\';
			$thumbsSelect[] = \' "\'.$thumb.\'":"\'.$thumb.\'.url as \'.$thumb.\'" \';
		}
		$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'</b>.\');
	}
}
// End of including Thumbnails

// Fields to select
$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);
$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true) . \',`Data`.`price` as `original_price`\';
$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);
$orderProductColumns = $modx->getSelectColumns(\'msOrderProduct\', \'msOrderProduct\', \'\', array(\'id\'), true);

// Tables for joining
$leftJoin = \'{"class":"msProduct","alias":"msProduct","on":"msProduct.id=msOrderProduct.product_id"},{"class":"msProductData","alias":"Data","on":"msProduct.id=Data.id"},{"class":"msVendor","alias":"Vendor","on":"Data.vendor=Vendor.id"}\';
if (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}
$select = \'"msProduct":"\'.$resourceColumns.\'","Data":"\'.$dataColumns.\'","OrderProduct":"\'.$orderProductColumns.\'","Vendor":"\'.$vendorColumns.\'"\';
if (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}

$default = array(
	\'class\' => \'msOrderProduct\'
	,\'where\' => \'{"msOrderProduct.order_id":"\'.$id.\'"}\'
	,\'leftJoin\' => \'[\'.$leftJoin.\']\'
	,\'select\' => \'{\'.$select.\'}\'
	,\'sortby\' => \'id\'
	,\'sortdir\' => \'ASC\'
	,\'groupby\' => \'msOrderProduct.id\'
	,\'fastMode\' => false
	,\'limit\' => 0
	,\'return\' => \'data\'
	,\'nestedChunkPrefix\' => \'minishop2_\'
);
// Merge all properties and run!
$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];
$pdoFetch->setConfig(array_merge($default, $scriptProperties));
$rows = $pdoFetch->run();

/** @var msOrderProduct $row */
foreach ($rows as $row) {
	$outer[\'cart_count\'] += $row[\'count\'];
	$row[\'old_price\'] = $miniShop2->formatPrice(
		$row[\'original_price\'] != $row[\'price\']
			? $row[\'original_price\']
			: $row[\'old_price\']
	);
	$row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);
	$row[\'cost\'] = $miniShop2->formatPrice($row[\'cost\']);
	$row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);

	$row[\'id\'] = (integer) $row[\'id\'];
	if (empty($row[\'name\'])) {
		$row[\'name\'] = $row[\'pagetitle\'];
	}
	else {
		$row[\'pagetitle\'] = $row[\'name\'];
	}
	$row[\'link\'] = !empty($row[\'id\'])
		? $row[\'link\'] = $modx->makeUrl($row[\'id\'], \'\', \'\', \'full\')
		: \'\';

	// Additional properties of product
	$options = !is_array($row[\'options\'])
		? $modx->fromJSON($row[\'options\'])
		: $row[\'options\'];
	if (!empty($options) && is_array($options)) {
		foreach ($options as $key => $value) {
			$row[\'option.\'.$key] = $value;
		}
	}

    // Add option values
    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));
    $row = array_merge($row, $options);

	$row[\'idx\'] = $pdoFetch->idx++;
	$tplRow = $pdoFetch->defineChunk($row);
	$outer[\'goods\'] .= empty($tplRow)
		? $pdoFetch->getChunk(\'\', $row)
		: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);
}

if (empty($tplOuter)) {
	$modx->toPlaceholders($outer);
}
else {
	return $pdoFetch->getChunk($tplOuter, $outer);
}',
    ),
  ),
  'b8b35b4abf13872c5dff6f6e4be1d013' => 
  array (
    'criteria' => 
    array (
      'name' => 'msProductOptions',
    ),
    'object' => 
    array (
      'id' => 30,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'msProductOptions',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'snippet' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);

/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

$output = \'\';

if (empty($product) && !empty($input)) {$product = $input;}
if (empty($outputSeparator)) {$outputSeparator = "\\n";}
$options = explode(",",$modx->getOption(\'options\',$scriptProperties,\'\'));

$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;
if (!($product instanceof msProduct)) {
    $output = \'This resource is not instance of msProduct class.\';
}

$optionKeys = $product->getOptionKeys();
$productData = $product->toArray();

$ignoreOptions = explode(\',\', trim($modx->getOption(\'ignoreOptions\', $scriptProperties, \'\')));

if (!empty($groups)) {
    $groups = explode(\',\', trim($groups));
    $groups = array_map(\'trim\', $groups);
} else if ($groups === \'0\') {
    $groups = array(0);
}

$rows = array();
if(count($optionKeys) > 0) {
    foreach ($optionKeys as $key) {
        if (in_array($key, $ignoreOptions)) continue;
        $productOption = array();
        foreach ($productData as $dataKey => $dataValue) {
            $dataKey = explode(\'.\', $dataKey);
            if ($dataKey[0] == $key && (count($dataKey) > 1)) {
                $productOption[$dataKey[1]] = $dataValue;
            }
        }

        // ,        &groups
        if (!empty($groups) && !in_array($productOption[\'category\'], $groups) && !in_array($productOption[\'category_name\'], $groups)) continue;
        if (isset($groups[0]) && ($groups[0] == 0) && ($productOption[\'category\'] != 0)) continue;

        if (is_array($productData[$key])) {
            $values = array();
            foreach ($productData[$key] as $value) {
                $params = array_merge($productData, $productOption, array(\'value\' => $value));
                $values[] = $pdoFetch->getChunk($tplValue, $params);
            }
            $productOption[\'value\'] = implode($valuesSeparator, $values);
        } else {
            $productOption[\'value\'] = $productData[$key];
        }

        // ,   
        if ($hideEmpty && empty($productOption[\'value\'])) continue;

        $rows[] = $pdoFetch->getChunk($tplRow, array_merge($productData, $productOption));
    }
}

if (count($rows) > 0) {
    $rows = implode($outputSeparator, $rows);
    $output = empty($tplOuter)
        ? $pdoFetch->getChunk(\'\', array_merge($productData, array(\'rows\' => $rows)))
        : $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, $productData, array(\'rows\' => $rows)));
}
else{
    $output = !empty($tplEmpty)
        ? $pdoFetch->getChunk($tplEmpty, array_merge($scriptProperties, $productData))
        : \'\';
}

return $output;',
      'locked' => 0,
      'properties' => 'a:9:{s:7:"product";a:7:{s:4:"name";s:7:"product";s:4:"desc";s:16:"ms2_prop_product";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"tplRow";a:7:{s:4:"name";s:6:"tplRow";s:4:"desc";s:15:"ms2_prop_tplRow";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:24:"tpl.msProductOptions.row";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplOuter";a:7:{s:4:"name";s:8:"tplOuter";s:4:"desc";s:17:"ms2_prop_tplOuter";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:26:"tpl.msProductOptions.outer";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"valuesSeparator";a:7:{s:4:"name";s:15:"valuesSeparator";s:4:"desc";s:24:"ms2_prop_valuesSeparator";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:2:", ";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:15:"outputSeparator";a:7:{s:4:"name";s:15:"outputSeparator";s:4:"desc";s:24:"ms2_prop_outputSeparator";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:1:"
";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:13:"ignoreOptions";a:7:{s:4:"name";s:13:"ignoreOptions";s:4:"desc";s:22:"ms2_prop_ignoreOptions";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:9:"hideEmpty";a:7:{s:4:"name";s:9:"hideEmpty";s:4:"desc";s:18:"ms2_prop_hideEmpty";s:4:"type";s:13:"combo-boolean";s:7:"options";a:0:{}s:5:"value";b:0;s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:6:"groups";a:7:{s:4:"name";s:6:"groups";s:4:"desc";s:15:"ms2_prop_groups";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:0:"";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}s:8:"tplValue";a:7:{s:4:"name";s:8:"tplValue";s:4:"desc";s:17:"ms2_prop_tplValue";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:18:"@INLINE [[+value]]";s:7:"lexicon";s:20:"minishop2:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/snippets/snippet.ms_product_options.php',
      'content' => '/* @var array $scriptProperties */
/* @var miniShop2 $miniShop2 */
$miniShop2 = $modx->getService(\'minishop2\');
$miniShop2->initialize($modx->context->key);

/* @var pdoFetch $pdoFetch */
if (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components/pdotools/model/pdotools/\', false, true)) {return false;}
$pdoFetch = new pdoFetch($modx, $scriptProperties);

$output = \'\';

if (empty($product) && !empty($input)) {$product = $input;}
if (empty($outputSeparator)) {$outputSeparator = "\\n";}
$options = explode(",",$modx->getOption(\'options\',$scriptProperties,\'\'));

$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;
if (!($product instanceof msProduct)) {
    $output = \'This resource is not instance of msProduct class.\';
}

$optionKeys = $product->getOptionKeys();
$productData = $product->toArray();

$ignoreOptions = explode(\',\', trim($modx->getOption(\'ignoreOptions\', $scriptProperties, \'\')));

if (!empty($groups)) {
    $groups = explode(\',\', trim($groups));
    $groups = array_map(\'trim\', $groups);
} else if ($groups === \'0\') {
    $groups = array(0);
}

$rows = array();
if(count($optionKeys) > 0) {
    foreach ($optionKeys as $key) {
        if (in_array($key, $ignoreOptions)) continue;
        $productOption = array();
        foreach ($productData as $dataKey => $dataValue) {
            $dataKey = explode(\'.\', $dataKey);
            if ($dataKey[0] == $key && (count($dataKey) > 1)) {
                $productOption[$dataKey[1]] = $dataValue;
            }
        }

        // ,        &groups
        if (!empty($groups) && !in_array($productOption[\'category\'], $groups) && !in_array($productOption[\'category_name\'], $groups)) continue;
        if (isset($groups[0]) && ($groups[0] == 0) && ($productOption[\'category\'] != 0)) continue;

        if (is_array($productData[$key])) {
            $values = array();
            foreach ($productData[$key] as $value) {
                $params = array_merge($productData, $productOption, array(\'value\' => $value));
                $values[] = $pdoFetch->getChunk($tplValue, $params);
            }
            $productOption[\'value\'] = implode($valuesSeparator, $values);
        } else {
            $productOption[\'value\'] = $productData[$key];
        }

        // ,   
        if ($hideEmpty && empty($productOption[\'value\'])) continue;

        $rows[] = $pdoFetch->getChunk($tplRow, array_merge($productData, $productOption));
    }
}

if (count($rows) > 0) {
    $rows = implode($outputSeparator, $rows);
    $output = empty($tplOuter)
        ? $pdoFetch->getChunk(\'\', array_merge($productData, array(\'rows\' => $rows)))
        : $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, $productData, array(\'rows\' => $rows)));
}
else{
    $output = !empty($tplEmpty)
        ? $pdoFetch->getChunk($tplEmpty, array_merge($scriptProperties, $productData))
        : \'\';
}

return $output;',
    ),
  ),
  '5814f67dee3882cb3e2329ce9070b9a4' => 
  array (
    'criteria' => 
    array (
      'name' => 'miniShop2',
    ),
    'object' => 
    array (
      'id' => 6,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'miniShop2',
      'description' => '',
      'editor_type' => 0,
      'category' => 8,
      'cache_type' => 0,
      'plugincode' => 'switch ($modx->event->name) {

	case \'OnManagerPageBeforeRender\':
		$modx23 = !empty($modx->version) && version_compare($modx->version[\'full_version\'], \'2.3.0\', \'>=\');
		$modx->controller->addHtml(\'<script type="text/javascript">
			Ext.onReady(function() {
				MODx.modx23 = \'.(int)$modx23.\';
			});
		</script>\');
		if (!$modx23) {
			$modx->controller->addCss(MODX_ASSETS_URL . \'components/minishop2/css/mgr/bootstrap.min.css\');
		}
		$modx->controller->addCss(MODX_ASSETS_URL . \'components/minishop2/css/mgr/main.css\');
		break;

	case \'OnHandleRequest\':
	case \'OnLoadWebDocument\':
		$isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';

		if (empty($_REQUEST[\'ms2_action\']) || ($isAjax && $modx->event->name != \'OnHandleRequest\') || (!$isAjax && $modx->event->name != \'OnLoadWebDocument\')) {return;}
		$action = trim($_REQUEST[\'ms2_action\']);
		$ctx = !empty($_REQUEST[\'ctx\']) ? (string) $_REQUEST[\'ctx\'] : \'web\';
		if ($ctx != \'web\') {$modx->switchContext($ctx);}

		/* @var miniShop2 $miniShop2 */
		$miniShop2 = $modx->getService(\'minishop2\');
		$miniShop2->initialize($ctx, array(\'json_response\' => $isAjax));
		if (!($miniShop2 instanceof miniShop2)) {
			@session_write_close();
			exit(\'Could not initialize miniShop2\');
		}

		switch ($action) {
			case \'cart/add\': $response = $miniShop2->cart->add(@$_POST[\'id\'], @$_POST[\'count\'], @$_POST[\'options\']); break;
			case \'cart/change\': $response = $miniShop2->cart->change(@$_POST[\'key\'], @$_POST[\'count\']); break;
			case \'cart/remove\': $response = $miniShop2->cart->remove(@$_POST[\'key\']); break;
			case \'cart/clean\': $response = $miniShop2->cart->clean(); break;
			case \'cart/get\': $response = $miniShop2->cart->get(); break;
			case \'order/add\': $response = $miniShop2->order->add(@$_POST[\'key\'], @$_POST[\'value\']); break;
			case \'order/submit\': $response = $miniShop2->order->submit($_POST); break;
			case \'order/getcost\': $response = $miniShop2->order->getcost(); break;
			case \'order/getrequired\': $response = $miniShop2->order->getDeliveryRequiresFields(@$_POST[\'id\']); break;
			case \'order/clean\': $response = $miniShop2->order->clean(); break;
			case \'order/get\': $response = $miniShop2->order->get(); break;
			default:
				$message = ($_REQUEST[\'ms2_action\'] != $action)
					? \'ms2_err_register_globals\'
					: \'ms2_err_unknown\';
				$response = $miniShop2->error($message);
		}

		if ($isAjax) {
			@session_write_close();
			exit($response);
		}
		break;

	case \'OnWebPageInit\':
		/* @var msCustomerProfile $profile */
		$referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);
		$cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);
		$cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);

		if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {
			$code = trim($_REQUEST[$referrerVar]);
			if ($profile = $modx->getObject(\'msCustomerProfile\', array(\'referrer_code\' => $code))) {
				$referrer = $profile->id;
				setcookie($cookieVar, $referrer, time() + $cookieTime);
			}
		}
		elseif ($modx->user->isAuthenticated() && !empty($_COOKIE[$cookieVar])) {
			if ($profile = $modx->getObject(\'msCustomerProfile\', $modx->user->id)) {
				if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $modx->user->id) {
					$profile->set(\'referrer_id\', $_COOKIE[$cookieVar]);
					$profile->save();
				}
			}
			setcookie($cookieVar, \'\', time() - $cookieTime);
		}
		break;

	case \'msOnChangeOrderStatus\':
		if (empty($status) || $status != 2) {return;}

		/** @var modUser $user */
		if ($user = $order->getOne(\'User\')) {
			$q = $modx->newQuery(\'msOrder\', array(\'type\' => 0));
			$q->innerJoin(\'modUser\', \'modUser\', array(\'`modUser`.`id` = `msOrder`.`user_id`\'));
			$q->innerJoin(\'msOrderLog\', \'msOrderLog\', array(
				\'`msOrderLog`.`order_id` = `msOrder`.`id`\',
				\'msOrderLog.action\' => \'status\',
				\'msOrderLog.entry\' => $status,
			));
			$q->where(array(\'msOrder.user_id\' => $user->id));
			$q->groupby(\'msOrder.user_id\');
			$q->select(\'SUM(`msOrder`.`cost`)\');
			if ($q->prepare() && $q->stmt->execute()) {
				$spent = $q->stmt->fetch(PDO::FETCH_COLUMN);
				/** @var msCustomerProfile $profile */
				if ($profile = $modx->getObject(\'msCustomerProfile\', $user->id)) {
					$profile->set(\'spent\', $spent);
					$profile->save();
				}
			}
		}
		break;
}',
      'locked' => 0,
      'properties' => NULL,
      'disabled' => 0,
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/minishop2/elements/plugins/plugin.minishop2.php',
      'content' => 'switch ($modx->event->name) {

	case \'OnManagerPageBeforeRender\':
		$modx23 = !empty($modx->version) && version_compare($modx->version[\'full_version\'], \'2.3.0\', \'>=\');
		$modx->controller->addHtml(\'<script type="text/javascript">
			Ext.onReady(function() {
				MODx.modx23 = \'.(int)$modx23.\';
			});
		</script>\');
		if (!$modx23) {
			$modx->controller->addCss(MODX_ASSETS_URL . \'components/minishop2/css/mgr/bootstrap.min.css\');
		}
		$modx->controller->addCss(MODX_ASSETS_URL . \'components/minishop2/css/mgr/main.css\');
		break;

	case \'OnHandleRequest\':
	case \'OnLoadWebDocument\':
		$isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';

		if (empty($_REQUEST[\'ms2_action\']) || ($isAjax && $modx->event->name != \'OnHandleRequest\') || (!$isAjax && $modx->event->name != \'OnLoadWebDocument\')) {return;}
		$action = trim($_REQUEST[\'ms2_action\']);
		$ctx = !empty($_REQUEST[\'ctx\']) ? (string) $_REQUEST[\'ctx\'] : \'web\';
		if ($ctx != \'web\') {$modx->switchContext($ctx);}

		/* @var miniShop2 $miniShop2 */
		$miniShop2 = $modx->getService(\'minishop2\');
		$miniShop2->initialize($ctx, array(\'json_response\' => $isAjax));
		if (!($miniShop2 instanceof miniShop2)) {
			@session_write_close();
			exit(\'Could not initialize miniShop2\');
		}

		switch ($action) {
			case \'cart/add\': $response = $miniShop2->cart->add(@$_POST[\'id\'], @$_POST[\'count\'], @$_POST[\'options\']); break;
			case \'cart/change\': $response = $miniShop2->cart->change(@$_POST[\'key\'], @$_POST[\'count\']); break;
			case \'cart/remove\': $response = $miniShop2->cart->remove(@$_POST[\'key\']); break;
			case \'cart/clean\': $response = $miniShop2->cart->clean(); break;
			case \'cart/get\': $response = $miniShop2->cart->get(); break;
			case \'order/add\': $response = $miniShop2->order->add(@$_POST[\'key\'], @$_POST[\'value\']); break;
			case \'order/submit\': $response = $miniShop2->order->submit($_POST); break;
			case \'order/getcost\': $response = $miniShop2->order->getcost(); break;
			case \'order/getrequired\': $response = $miniShop2->order->getDeliveryRequiresFields(@$_POST[\'id\']); break;
			case \'order/clean\': $response = $miniShop2->order->clean(); break;
			case \'order/get\': $response = $miniShop2->order->get(); break;
			default:
				$message = ($_REQUEST[\'ms2_action\'] != $action)
					? \'ms2_err_register_globals\'
					: \'ms2_err_unknown\';
				$response = $miniShop2->error($message);
		}

		if ($isAjax) {
			@session_write_close();
			exit($response);
		}
		break;

	case \'OnWebPageInit\':
		/* @var msCustomerProfile $profile */
		$referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);
		$cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);
		$cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);

		if (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {
			$code = trim($_REQUEST[$referrerVar]);
			if ($profile = $modx->getObject(\'msCustomerProfile\', array(\'referrer_code\' => $code))) {
				$referrer = $profile->id;
				setcookie($cookieVar, $referrer, time() + $cookieTime);
			}
		}
		elseif ($modx->user->isAuthenticated() && !empty($_COOKIE[$cookieVar])) {
			if ($profile = $modx->getObject(\'msCustomerProfile\', $modx->user->id)) {
				if (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $modx->user->id) {
					$profile->set(\'referrer_id\', $_COOKIE[$cookieVar]);
					$profile->save();
				}
			}
			setcookie($cookieVar, \'\', time() - $cookieTime);
		}
		break;

	case \'msOnChangeOrderStatus\':
		if (empty($status) || $status != 2) {return;}

		/** @var modUser $user */
		if ($user = $order->getOne(\'User\')) {
			$q = $modx->newQuery(\'msOrder\', array(\'type\' => 0));
			$q->innerJoin(\'modUser\', \'modUser\', array(\'`modUser`.`id` = `msOrder`.`user_id`\'));
			$q->innerJoin(\'msOrderLog\', \'msOrderLog\', array(
				\'`msOrderLog`.`order_id` = `msOrder`.`id`\',
				\'msOrderLog.action\' => \'status\',
				\'msOrderLog.entry\' => $status,
			));
			$q->where(array(\'msOrder.user_id\' => $user->id));
			$q->groupby(\'msOrder.user_id\');
			$q->select(\'SUM(`msOrder`.`cost`)\');
			if ($q->prepare() && $q->stmt->execute()) {
				$spent = $q->stmt->fetch(PDO::FETCH_COLUMN);
				/** @var msCustomerProfile $profile */
				if ($profile = $modx->getObject(\'msCustomerProfile\', $user->id)) {
					$profile->set(\'spent\', $spent);
					$profile->save();
				}
			}
		}
		break;
}',
    ),
  ),
  '110b74b7c6d0989eccda1781252ffc94' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 6,
      'event' => 'OnHandleRequest',
    ),
    'object' => 
    array (
      'pluginid' => 6,
      'event' => 'OnHandleRequest',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '845d0d4d3db20b31d1fec8dfdeebbe1e' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 6,
      'event' => 'OnLoadWebDocument',
    ),
    'object' => 
    array (
      'pluginid' => 6,
      'event' => 'OnLoadWebDocument',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '2f721e82a91b2bdb499806b04abae324' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 6,
      'event' => 'OnWebPageInit',
    ),
    'object' => 
    array (
      'pluginid' => 6,
      'event' => 'OnWebPageInit',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '06a977635a9f2dd577b03b97766f4e82' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 6,
      'event' => 'msOnChangeOrderStatus',
    ),
    'object' => 
    array (
      'pluginid' => 6,
      'event' => 'msOnChangeOrderStatus',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
);