<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      '39eef0c4da30e5c8509d90c468aa958a' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mSearch2.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"mse2-row\\">\\n\\t[[+idx]]. <a href=\\"[[+uri]]\\" class=\\"search-link\\">[[+pagetitle]]<\\/a>[[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight  ([[%mse2_weight]]: [[+weight]])-->\\n<!--msearch2_intro <p>[[+intro]]<\\/p>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.msearch2.row.tpl","content":"<div class=\\"mse2-row\\">\\n\\t[[+idx]]. <a href=\\"[[+uri]]\\" class=\\"search-link\\">[[+pagetitle]]<\\/a>[[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight  ([[%mse2_weight]]: [[+weight]])-->\\n<!--msearch2_intro <p>[[+intro]]<\\/p>-->"}',
        'guid' => '2fb3d8cf6c17a87f7745b34d44662129',
        'native_key' => 0,
        'signature' => '5d505544a45dc45e65a5b25c5396e66f',
      ),
      'be40a064f681bb6bf2fe768d32da5837' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mSearch2.form","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form action=\\"[[~[[+pageId]]]]\\" method=\\"get\\" class=\\"well msearch2\\" id=\\"mse2_form\\">\\n\\t<div class=\\"row\\">\\n\\t\\t<div class=\\"form-group col-md-10\\">\\n\\t\\t\\t<input type=\\"text\\" class=\\"form-control\\" name=\\"[[+queryVar]]\\" placeholder=\\"[[%mse2_search]]\\" value=\\"[[+mse2_query]]\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<button type=\\"submit\\" class=\\"btn btn-default\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-search\\"><\\/i> [[%search]]\\n\\t\\t<\\/button>\\n\\t<\\/div>\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.msearch2.form.tpl","content":"<form action=\\"[[~[[+pageId]]]]\\" method=\\"get\\" class=\\"well msearch2\\" id=\\"mse2_form\\">\\n\\t<div class=\\"row\\">\\n\\t\\t<div class=\\"form-group col-md-10\\">\\n\\t\\t\\t<input type=\\"text\\" class=\\"form-control\\" name=\\"[[+queryVar]]\\" placeholder=\\"[[%mse2_search]]\\" value=\\"[[+mse2_query]]\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<button type=\\"submit\\" class=\\"btn btn-default\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-search\\"><\\/i> [[%search]]\\n\\t\\t<\\/button>\\n\\t<\\/div>\\n<\\/form>"}',
        'guid' => '5573106433915b3310f45b968bfb40cb',
        'native_key' => 0,
        'signature' => '74c153d67ce46819a43b74c418575af3',
      ),
      'b069afcf8fe6a384da1852171d75921d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mSearch2.ac","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"mse2-ac-item\\">\\n\\t[[+idx]]. [[+pagetitle]] [[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight <span class=\\"mse2-ac-weight\\"><small>[[%mse2_weight]]: [[+weight]]<\\/small><\\/span>-->\\n<!--msearch2_intro <br\\/><small>[[+intro]]<\\/small>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.msearch2.ac.tpl","content":"<div class=\\"mse2-ac-item\\">\\n\\t[[+idx]]. [[+pagetitle]] [[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight <span class=\\"mse2-ac-weight\\"><small>[[%mse2_weight]]: [[+weight]]<\\/small><\\/span>-->\\n<!--msearch2_intro <br\\/><small>[[+intro]]<\\/small>-->"}',
        'guid' => '3c5c700ce2cfc52100949231bb978934',
        'native_key' => 0,
        'signature' => '395664f11e712aa59e2a8faccf5a6631',
      ),
      '27d628b0811b8748a53affab18aa5b21' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"row msearch2\\" id=\\"mse2_mfilter\\">\\n\\t<div class=\\"span3 col-md-3\\">\\n\\t\\t<form action=\\"[[~[[*id]]]]\\" method=\\"post\\" id=\\"mse2_filters\\">\\n\\t\\t\\t[[+filters]]\\n\\t\\t\\t<br\\/>\\n\\t\\t\\t[[+filters:isnot=``:then=`\\n\\t\\t\\t\\t<button type=\\"reset\\" class=\\"btn btn-default hidden\\">[[%mse2_reset]]<\\/button>\\n\\t\\t\\t\\t<button type=\\"submit\\" class=\\"btn btn-success pull-right hidden\\">[[%mse2_submit]]<\\/button>\\n\\t\\t\\t\\t<div class=\\"clearfix\\"><\\/div>\\n\\t\\t\\t`]]\\n\\t\\t<\\/form>\\n\\n\\t\\t<br\\/><br\\/>\\n\\t\\t<div>[[%mse2_limit]]\\n\\t\\t\\t<select name=\\"mse_limit\\" id=\\"mse2_limit\\">\\n\\t\\t\\t\\t<option value=\\"10\\" [[+limit:is=`10`:then=`selected`]]>10<\\/option>\\n\\t\\t\\t\\t<option value=\\"25\\" [[+limit:is=`25`:then=`selected`]]>25<\\/option>\\n\\t\\t\\t\\t<option value=\\"50\\" [[+limit:is=`50`:then=`selected`]]>50<\\/option>\\n\\t\\t\\t\\t<option value=\\"100\\" [[+limit:is=`100`:then=`selected`]]>100<\\/option>\\n\\t\\t\\t<\\/select>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\n\\t<div class=\\"span9 col-md-9\\">\\n\\t\\t<h3>[[%mse2_filter_total]] <span id=\\"mse2_total\\">[[+total:default=`0`]]<\\/span><\\/h3>\\n\\n\\t\\t<div class=\\"row\\">\\n\\t\\t\\t<div id=\\"mse2_sort\\" class=\\"span5 col-md-5\\">\\n\\t\\t\\t\\t[[%mse2_sort]]\\n\\t\\t\\t\\t<a href=\\"#\\" data-sort=\\"resource|publishedon\\" data-dir=\\"[[+mse2_sort:is=`resource|publishedon:desc`:then=`desc`]]\\" data-default=\\"desc\\" class=\\"sort\\">[[%mse2_sort_publishedon]] <span><\\/span><\\/a>\\n\\t\\t\\t<\\/div>\\n\\n\\t\\t\\t[[+tpls:notempty=`\\n\\t\\t\\t<div id=\\"mse2_tpl\\" class=\\"span4 col-md-4\\">\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"0\\" class=\\"[[+tpl0]]\\">[[%mse2_chunk_default]]<\\/a> \\/\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"1\\" class=\\"[[+tpl1]]\\">[[%mse2_chunk_alternate]]<\\/a>\\n\\t\\t\\t<\\/div>\\n\\t\\t\\t`]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_selected_wrapper\\">\\n\\t\\t\\t<div id=\\"mse2_selected\\">[[%mse2_selected]]:\\n\\t\\t\\t\\t<span><\\/span>\\n\\t\\t\\t<\\/div>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_results\\">\\n\\t\\t\\t[[+results]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"mse2_pagination\\">\\n\\t\\t\\t[[!+page.nav]]\\n\\t\\t<\\/div>\\n\\n\\t<\\/div>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.outer.tpl","content":"<div class=\\"row msearch2\\" id=\\"mse2_mfilter\\">\\n\\t<div class=\\"span3 col-md-3\\">\\n\\t\\t<form action=\\"[[~[[*id]]]]\\" method=\\"post\\" id=\\"mse2_filters\\">\\n\\t\\t\\t[[+filters]]\\n\\t\\t\\t<br\\/>\\n\\t\\t\\t[[+filters:isnot=``:then=`\\n\\t\\t\\t\\t<button type=\\"reset\\" class=\\"btn btn-default hidden\\">[[%mse2_reset]]<\\/button>\\n\\t\\t\\t\\t<button type=\\"submit\\" class=\\"btn btn-success pull-right hidden\\">[[%mse2_submit]]<\\/button>\\n\\t\\t\\t\\t<div class=\\"clearfix\\"><\\/div>\\n\\t\\t\\t`]]\\n\\t\\t<\\/form>\\n\\n\\t\\t<br\\/><br\\/>\\n\\t\\t<div>[[%mse2_limit]]\\n\\t\\t\\t<select name=\\"mse_limit\\" id=\\"mse2_limit\\">\\n\\t\\t\\t\\t<option value=\\"10\\" [[+limit:is=`10`:then=`selected`]]>10<\\/option>\\n\\t\\t\\t\\t<option value=\\"25\\" [[+limit:is=`25`:then=`selected`]]>25<\\/option>\\n\\t\\t\\t\\t<option value=\\"50\\" [[+limit:is=`50`:then=`selected`]]>50<\\/option>\\n\\t\\t\\t\\t<option value=\\"100\\" [[+limit:is=`100`:then=`selected`]]>100<\\/option>\\n\\t\\t\\t<\\/select>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\n\\t<div class=\\"span9 col-md-9\\">\\n\\t\\t<h3>[[%mse2_filter_total]] <span id=\\"mse2_total\\">[[+total:default=`0`]]<\\/span><\\/h3>\\n\\n\\t\\t<div class=\\"row\\">\\n\\t\\t\\t<div id=\\"mse2_sort\\" class=\\"span5 col-md-5\\">\\n\\t\\t\\t\\t[[%mse2_sort]]\\n\\t\\t\\t\\t<a href=\\"#\\" data-sort=\\"resource|publishedon\\" data-dir=\\"[[+mse2_sort:is=`resource|publishedon:desc`:then=`desc`]]\\" data-default=\\"desc\\" class=\\"sort\\">[[%mse2_sort_publishedon]] <span><\\/span><\\/a>\\n\\t\\t\\t<\\/div>\\n\\n\\t\\t\\t[[+tpls:notempty=`\\n\\t\\t\\t<div id=\\"mse2_tpl\\" class=\\"span4 col-md-4\\">\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"0\\" class=\\"[[+tpl0]]\\">[[%mse2_chunk_default]]<\\/a> \\/\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"1\\" class=\\"[[+tpl1]]\\">[[%mse2_chunk_alternate]]<\\/a>\\n\\t\\t\\t<\\/div>\\n\\t\\t\\t`]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_selected_wrapper\\">\\n\\t\\t\\t<div id=\\"mse2_selected\\">[[%mse2_selected]]:\\n\\t\\t\\t\\t<span><\\/span>\\n\\t\\t\\t<\\/div>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_results\\">\\n\\t\\t\\t[[+results]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"mse2_pagination\\">\\n\\t\\t\\t[[!+page.nav]]\\n\\t\\t<\\/div>\\n\\n\\t<\\/div>\\n<\\/div>"}',
        'guid' => 'd2b6713f09454afd3ad9bc86147a98e2',
        'native_key' => 0,
        'signature' => '90c99fc3372e80975167ece02be40842',
      ),
      '2b79facbf670a957f7506b1919a7f71e' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4 class=\\"filter_title\\">[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t[[+rows]]\\n<\\/fieldset>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.outer.tpl","content":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4 class=\\"filter_title\\">[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t[[+rows]]\\n<\\/fieldset>"}',
        'guid' => '9f721484081ee0cfc3347e89c9030995',
        'native_key' => 0,
        'signature' => '7fd7d3c5802b5b0d944e54fb4f96af39',
      ),
      '66c2036cdba0cf8cbfd8c73b2927c3c9' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.slider","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4 class=\\"filter_title\\">[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<div class=\\"mse2_number_slider\\"><\\/div>\\n\\t<div class=\\"mse2_number_inputs\\">\\n\\t\\t[[+rows]]\\n\\t<\\/div>\\n<\\/fieldset>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.slider.tpl","content":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4 class=\\"filter_title\\">[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<div class=\\"mse2_number_slider\\"><\\/div>\\n\\t<div class=\\"mse2_number_inputs\\">\\n\\t\\t[[+rows]]\\n\\t<\\/div>\\n<\\/fieldset>"}',
        'guid' => 'a3cc957ea3e22413f384853feee8da34',
        'native_key' => 0,
        'signature' => 'b57299cd6d0c8a5aab66d595a7e63eef',
      ),
      '7c1f8e5eb88c771266dd07de843fe6be' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.select","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4 class=\\"filter_title\\">[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<select name=\\"[[+filter_key]]\\" id=\\"[[+table]][[+delimeter]][[+filter]]_0\\">\\n\\t\\t<option value=\\"\\" selected>[[%mse2_select]]<\\/option>\\n\\t\\t[[+rows]]\\n\\t<\\/select>\\n<\\/fieldset>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.select.tpl","content":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4 class=\\"filter_title\\">[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<select name=\\"[[+filter_key]]\\" id=\\"[[+table]][[+delimeter]][[+filter]]_0\\">\\n\\t\\t<option value=\\"\\" selected>[[%mse2_select]]<\\/option>\\n\\t\\t[[+rows]]\\n\\t<\\/select>\\n<\\/fieldset>"}',
        'guid' => '513e5b58a72ec0ca859b254ffed43e8d',
        'native_key' => 0,
        'signature' => 'a15f7b9593caddf84646dc57e3b0d810',
      ),
      '1209bc0a665c9cc7ab0a7bea0677779c' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.checkbox","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"checkbox\\" name=\\"[[+filter_key]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.checkbox.tpl","content":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"checkbox\\" name=\\"[[+filter_key]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>"}',
        'guid' => 'a2ece68a69a678b598e2ec35eac1db3b',
        'native_key' => 0,
        'signature' => 'f596bcbd503d8db7fa030bf380ce3ca8',
      ),
      'ec3700d61a88b4e6baa15505ea6b9601' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.number","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"form-group col-md-6\\">\\n\\t<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\">[[+title]]\\n\\t\\t<input type=\\"text\\" name=\\"[[+filter_key]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" class=\\"form-control input-sm\\" \\/>\\n\\t<\\/label>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.number.tpl","content":"<div class=\\"form-group col-md-6\\">\\n\\t<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\">[[+title]]\\n\\t\\t<input type=\\"text\\" name=\\"[[+filter_key]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" class=\\"form-control input-sm\\" \\/>\\n\\t<\\/label>\\n<\\/div>"}',
        'guid' => '97e9b85243b43bdd6507ef4cc0126ffb',
        'native_key' => 0,
        'signature' => 'e5a2d5520e049a6f6e81b14cb5605042',
      ),
      'fb66212ebf1506b8a08ea770fd1fff01' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.radio","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"radio\\" name=\\"[[+filter_key]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.radio.tpl","content":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"radio\\" name=\\"[[+filter_key]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>"}',
        'guid' => 'f8d2750f2f690ff7a117d9f63444409c',
        'native_key' => 0,
        'signature' => 'b9f7e4f8fa1b5ffb837fd76f049f126a',
      ),
      'e26a987bdd32ef68d0572740c02800ff' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.option","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<option value=\\"[[+value]]\\" [[+selected]] [[+disabled]] class=\\"[[+disabled]]\\">[[+title]]&nbsp;([[+num]])<\\/option>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.option.tpl","content":"<option value=\\"[[+value]]\\" [[+selected]] [[+disabled]] class=\\"[[+disabled]]\\">[[+title]]&nbsp;([[+num]])<\\/option>"}',
        'guid' => '1af1848c21691d2d1c51b141d8438318',
        'native_key' => 0,
        'signature' => '008953d007cec77a60e5c25d9777f22e',
      ),
    ),
    'Snippets' => 
    array (
      'bc3942fd32160d70db6adc579c39785c' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mSearch2","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties);\\n$mSearch2->pdoTools->setConfig($scriptProperties);\\n$mSearch2->pdoTools->addTime(\'pdoTools loaded.\');\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($htagOpen)) {$htagOpen = \'<b>\';}\\nif (empty($htagClose)) {$htagClose = \'<\\/b>\';}\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\n$returnIds = !empty($returnIds);\\n$fastMode = !empty($fastMode);\\n\\n$class = \'modResource\';\\n$found = array();\\n$output = null;\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? $mSearch2->getQuery(rawurldecode($_REQUEST[$queryVar]))\\n\\t: \'\';\\n\\nif (empty($resources)) {\\n\\tif (empty($query) && isset($_REQUEST[$queryVar])) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query\');\\n\\t}\\n\\telseif (empty($query) && !empty($forceSearch)) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query_var\');\\n\\t}\\n\\telseif (!empty($query) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_min_query\');\\n\\t}\\n\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\tif (!empty($output)) {\\n\\t\\treturn !$returnIds\\n\\t\\t\\t? $output\\n\\t\\t\\t: \'\';\\n\\t}\\n\\telseif (!empty($query)) {\\n\\t\\t$found = $mSearch2->Search($query);\\n\\t\\t$ids = array_keys($found);\\n\\t\\t$resources = implode(\',\', $ids);\\n\\t\\tif (empty($found)) {\\n\\t\\t\\tif ($returnIds) {\\n\\t\\t\\t\\treturn \'\';\\n\\t\\t\\t}\\n\\t\\t\\telseif (!empty($query)) {\\n\\t\\t\\t\\t$output = $modx->lexicon(\'mse2_err_no_results\');\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($tplWrapper) && !empty($wrapIfEmpty)) {\\n\\t\\t\\t\\t$output = $mSearch2->pdoTools->getChunk(\\n\\t\\t\\t\\t\\t$tplWrapper,\\n\\t\\t\\t\\t\\tarray(\\n\\t\\t\\t\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\\t\\t\\t\'total\' => 0,\\n\\t\\t\\t\\t\\t\\t\'query\' => $query,\\n\\t\\t\\t\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t$fastMode\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t\\t\\t$output .= \'<pre class=\\"mSearchLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($toPlaceholder)) {\\n\\t\\t\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\treturn $output;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\nelseif (strpos($resources, \'{\') === 0) {\\n\\t$found = $modx->fromJSON($resources);\\n\\t$resources = implode(\',\', array_keys($found));\\n\\tunset($scriptProperties[\'resources\']);\\n}\\n\\/*----------------------------------------------------------------------------------*\\/\\nif (empty($returnIds)) {\\n    \\/\\/ Joining tables\\n    $leftJoin = array(\\n        \'mseIntro\' => array(\\n            \'class\' => \'mseIntro\',\\n            \'alias\' => \'Intro\',\\n            \'on\' => $class . \'.id = Intro.resource\'\\n        )\\n    );\\n    \\/\\/ Fields to select\\n    $resourceColumns = !empty($includeContent)\\n        ? $modx->getSelectColumns($class, $class)\\n        : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true);\\n    $select = array(\\n        $class => $resourceColumns,\\n        \'Intro\' => \'intro\'\\n    );\\n    $groupby = $class.\'.id, Intro.intro\';\\n} else {\\n    $leftJoin = array();\\n    $select = array($class . \'id\');\\n    $groupby = $class.\'.id\';\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $modx->fromJSON($scriptProperties[$v]);\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'leftJoin\' => $leftJoin,\\n\\t\'select\' => $select,\\n\\t\'groupby\' => $groupby,\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t? \'ids\'\\n\\t\\t: \'data\',\\n    \'fastMode\' => $fastMode,\\n    \'nestedChunkPrefix\' => \'msearch2_\',\\n);\\nif (!empty($resources)) {\\n\\t$default[\'resources\'] = is_array($resources)\\n\\t\\t? implode(\',\', $resources)\\n\\t\\t: $resources;\\n}\\n\\n\\/\\/ Merge all properties and run!\\n$mSearch2->pdoTools->setConfig(array_merge($default, $scriptProperties), false);\\n$mSearch2->pdoTools->addTime(\'Query parameters are prepared.\');\\n$rows = $mSearch2->pdoTools->run();\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"mSearchLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Processing results\\nif (!empty($returnIds)) {\\n\\t$modx->setPlaceholder(\'mSearch.log\', $log);\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $rows);\\n\\t\\treturn \'\';\\n\\t}\\n\\telse {\\n\\t\\treturn $rows;\\n\\t}\\n}\\nelseif (!empty($rows) && is_array($rows)) {\\n\\t$output = array();\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$row[\'weight\'] = isset($found[$row[\'id\']]) ? $found[$row[\'id\']] : \'\';\\n\\t\\t$row[\'intro\'] = $mSearch2->Highlight($row[\'intro\'], $query, $htagOpen, $htagClose);\\n\\n\\t\\t$row[\'idx\'] = $mSearch2->pdoTools->idx++;\\n\\t\\t$tplRow = $mSearch2->pdoTools->defineChunk($row);\\n\\t\\t$output[] .= empty($tplRow)\\n\\t\\t\\t? $mSearch2->pdoTools->getChunk(\'\', $row)\\n\\t\\t\\t: $mSearch2->pdoTools->getChunk($tplRow, $row, $fastMode);\\n\\t}\\n\\t$mSearch2->pdoTools->addTime(\'Returning processed chunks\');\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t}\\n\\telse {\\n\\t\\t$output = implode($outputSeparator, $output) . $log;\\n\\t}\\n}\\nelse {\\n\\t$output = $modx->lexicon(\'mse2_err_no_results\') . $log;\\n}\\n\\n\\/\\/ Return output\\nif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t$output = $mSearch2->pdoTools->getChunk(\\n\\t\\t$tplWrapper,\\n\\t\\tarray(\\n\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\'total\' => $modx->getPlaceholder($mSearch2->pdoTools->config[\'totalVar\']),\\n\\t\\t\\t\'query\' => $modx->getPlaceholder($plPrefix.$queryVar),\\n\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t),\\n\\t\\t$fastMode\\n\\t);\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:32:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:13:\\"mse2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:16:\\"tpl.mSearch2.row\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:19:\\"mse2_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:17:\\"mse2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:18:\\"mse2_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:15:\\"mse2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:16:\\"mse2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:15:\\"mse2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:25:\\"mse2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:23:\\"mse2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:32:\\"mse2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:17:\\"mse2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:20:\\"mse2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:18:\\"mse2_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:15:\\"mse2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:25:\\"mse2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:21:\\"mse2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:20:\\"mse2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:24:\\"mse2_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"introCutBefore\\";a:7:{s:4:\\"name\\";s:14:\\"introCutBefore\\";s:4:\\"desc\\";s:24:\\"mse2_prop_introCutBefore\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:50;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"introCutAfter\\";a:7:{s:4:\\"name\\";s:13:\\"introCutAfter\\";s:4:\\"desc\\";s:23:\\"mse2_prop_introCutAfter\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:250;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"htagOpen\\";a:7:{s:4:\\"name\\";s:8:\\"htagOpen\\";s:4:\\"desc\\";s:18:\\"mse2_prop_htagOpen\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"<b>\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"htagClose\\";a:7:{s:4:\\"name\\";s:9:\\"htagClose\\";s:4:\\"desc\\";s:19:\\"mse2_prop_htagClose\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"<\\/b>\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"parentsVar\\";a:7:{s:4:\\"name\\";s:10:\\"parentsVar\\";s:4:\\"desc\\";s:20:\\"mse2_prop_parentsVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"parents\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"queryVar\\";a:7:{s:4:\\"name\\";s:8:\\"queryVar\\";s:4:\\"desc\\";s:18:\\"mse2_prop_queryVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"query\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:20:\\"mse2_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:21:\\"mse2_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"forceSearch\\";a:7:{s:4:\\"name\\";s:11:\\"forceSearch\\";s:4:\\"desc\\";s:21:\\"mse2_prop_forceSearch\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"minQuery\\";a:7:{s:4:\\"name\\";s:8:\\"minQuery\\";s:4:\\"desc\\";s:18:\\"mse2_prop_minQuery\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"fields\\";a:7:{s:4:\\"name\\";s:6:\\"fields\\";s:4:\\"desc\\";s:16:\\"mse2_prop_fields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"onlyIndex\\";a:7:{s:4:\\"name\\";s:9:\\"onlyIndex\\";s:4:\\"desc\\";s:19:\\"mse2_prop_onlyIndex\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"onlyAllWords\\";a:7:{s:4:\\"name\\";s:12:\\"onlyAllWords\\";s:4:\\"desc\\";s:22:\\"mse2_prop_onlyAllWords\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"showSearchLog\\";a:7:{s:4:\\"name\\";s:13:\\"showSearchLog\\";s:4:\\"desc\\";s:23:\\"mse2_prop_showSearchLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/snippets\\/snippet.msearch2.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties);\\n$mSearch2->pdoTools->setConfig($scriptProperties);\\n$mSearch2->pdoTools->addTime(\'pdoTools loaded.\');\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($htagOpen)) {$htagOpen = \'<b>\';}\\nif (empty($htagClose)) {$htagClose = \'<\\/b>\';}\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\n$returnIds = !empty($returnIds);\\n$fastMode = !empty($fastMode);\\n\\n$class = \'modResource\';\\n$found = array();\\n$output = null;\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? $mSearch2->getQuery(rawurldecode($_REQUEST[$queryVar]))\\n\\t: \'\';\\n\\nif (empty($resources)) {\\n\\tif (empty($query) && isset($_REQUEST[$queryVar])) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query\');\\n\\t}\\n\\telseif (empty($query) && !empty($forceSearch)) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query_var\');\\n\\t}\\n\\telseif (!empty($query) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_min_query\');\\n\\t}\\n\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\tif (!empty($output)) {\\n\\t\\treturn !$returnIds\\n\\t\\t\\t? $output\\n\\t\\t\\t: \'\';\\n\\t}\\n\\telseif (!empty($query)) {\\n\\t\\t$found = $mSearch2->Search($query);\\n\\t\\t$ids = array_keys($found);\\n\\t\\t$resources = implode(\',\', $ids);\\n\\t\\tif (empty($found)) {\\n\\t\\t\\tif ($returnIds) {\\n\\t\\t\\t\\treturn \'\';\\n\\t\\t\\t}\\n\\t\\t\\telseif (!empty($query)) {\\n\\t\\t\\t\\t$output = $modx->lexicon(\'mse2_err_no_results\');\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($tplWrapper) && !empty($wrapIfEmpty)) {\\n\\t\\t\\t\\t$output = $mSearch2->pdoTools->getChunk(\\n\\t\\t\\t\\t\\t$tplWrapper,\\n\\t\\t\\t\\t\\tarray(\\n\\t\\t\\t\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\\t\\t\\t\'total\' => 0,\\n\\t\\t\\t\\t\\t\\t\'query\' => $query,\\n\\t\\t\\t\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t$fastMode\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t\\t\\t$output .= \'<pre class=\\"mSearchLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($toPlaceholder)) {\\n\\t\\t\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\treturn $output;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\nelseif (strpos($resources, \'{\') === 0) {\\n\\t$found = $modx->fromJSON($resources);\\n\\t$resources = implode(\',\', array_keys($found));\\n\\tunset($scriptProperties[\'resources\']);\\n}\\n\\/*----------------------------------------------------------------------------------*\\/\\nif (empty($returnIds)) {\\n    \\/\\/ Joining tables\\n    $leftJoin = array(\\n        \'mseIntro\' => array(\\n            \'class\' => \'mseIntro\',\\n            \'alias\' => \'Intro\',\\n            \'on\' => $class . \'.id = Intro.resource\'\\n        )\\n    );\\n    \\/\\/ Fields to select\\n    $resourceColumns = !empty($includeContent)\\n        ? $modx->getSelectColumns($class, $class)\\n        : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true);\\n    $select = array(\\n        $class => $resourceColumns,\\n        \'Intro\' => \'intro\'\\n    );\\n    $groupby = $class.\'.id, Intro.intro\';\\n} else {\\n    $leftJoin = array();\\n    $select = array($class . \'id\');\\n    $groupby = $class.\'.id\';\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'leftJoin\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $modx->fromJSON($scriptProperties[$v]);\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'leftJoin\' => $leftJoin,\\n\\t\'select\' => $select,\\n\\t\'groupby\' => $groupby,\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t? \'ids\'\\n\\t\\t: \'data\',\\n    \'fastMode\' => $fastMode,\\n    \'nestedChunkPrefix\' => \'msearch2_\',\\n);\\nif (!empty($resources)) {\\n\\t$default[\'resources\'] = is_array($resources)\\n\\t\\t? implode(\',\', $resources)\\n\\t\\t: $resources;\\n}\\n\\n\\/\\/ Merge all properties and run!\\n$mSearch2->pdoTools->setConfig(array_merge($default, $scriptProperties), false);\\n$mSearch2->pdoTools->addTime(\'Query parameters are prepared.\');\\n$rows = $mSearch2->pdoTools->run();\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"mSearchLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Processing results\\nif (!empty($returnIds)) {\\n\\t$modx->setPlaceholder(\'mSearch.log\', $log);\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $rows);\\n\\t\\treturn \'\';\\n\\t}\\n\\telse {\\n\\t\\treturn $rows;\\n\\t}\\n}\\nelseif (!empty($rows) && is_array($rows)) {\\n\\t$output = array();\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$row[\'weight\'] = isset($found[$row[\'id\']]) ? $found[$row[\'id\']] : \'\';\\n\\t\\t$row[\'intro\'] = $mSearch2->Highlight($row[\'intro\'], $query, $htagOpen, $htagClose);\\n\\n\\t\\t$row[\'idx\'] = $mSearch2->pdoTools->idx++;\\n\\t\\t$tplRow = $mSearch2->pdoTools->defineChunk($row);\\n\\t\\t$output[] .= empty($tplRow)\\n\\t\\t\\t? $mSearch2->pdoTools->getChunk(\'\', $row)\\n\\t\\t\\t: $mSearch2->pdoTools->getChunk($tplRow, $row, $fastMode);\\n\\t}\\n\\t$mSearch2->pdoTools->addTime(\'Returning processed chunks\');\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t}\\n\\telse {\\n\\t\\t$output = implode($outputSeparator, $output) . $log;\\n\\t}\\n}\\nelse {\\n\\t$output = $modx->lexicon(\'mse2_err_no_results\') . $log;\\n}\\n\\n\\/\\/ Return output\\nif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t$output = $mSearch2->pdoTools->getChunk(\\n\\t\\t$tplWrapper,\\n\\t\\tarray(\\n\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\'total\' => $modx->getPlaceholder($mSearch2->pdoTools->config[\'totalVar\']),\\n\\t\\t\\t\'query\' => $modx->getPlaceholder($plPrefix.$queryVar),\\n\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t),\\n\\t\\t$fastMode\\n\\t);\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => '3eda669b95bd490b313631c2bf49e6da',
        'native_key' => 0,
        'signature' => 'df5fd0f9380d297212cec63766aed944',
      ),
      '500955d8e64e775bc75a84af3ca3662c' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mSearchForm","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoTools $pdoTools *\\/\\n$pdoTools = $modx->getService(\'pdoTools\');\\n$pdoTools->setConfig($scriptProperties);\\n$pdoTools->addTime(\'pdoTools loaded.\');\\n\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx);\\n$mSearch2->initialize($modx->context->key);\\n\\n$config = array(\\n\\t\'autocomplete\' => !empty($autocomplete) ? $autocomplete : \'\',\\n\\t\'queryVar\' => !empty($queryVar) ? $queryVar : \'query\',\\n\\t\'minQuery\' => !empty($minQuery) ? (integer) $minQuery : 3,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n);\\n$scriptProperties = array_merge($scriptProperties, $config);\\n\\nif (empty($tplForm)) {$tplForm = \'tpl.mSearch2.form\';}\\n$form = $pdoTools->getChunk($tplForm, $scriptProperties);\\n\\nif (!empty($config[\'autocomplete\'])) {\\n\\t$hash = sha1(serialize($scriptProperties));\\n\\t$_SESSION[\'mSearch2\'][$hash] = $scriptProperties;\\n\\n\\t$form = str_ireplace(\'<form\', \'<form data-key=\\"\'.$hash.\'\\"\', $form);\\n\\t\\/\\/ Place for enabled log\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$form = str_ireplace(\'<\\/form>\', \\"<\\/form>\\\\n<pre class=\\\\\\"mSearchFormLog\\\\\\"><\\/pre>\\", $form);\\n\\t}\\n\\n\\t\\/\\/ Setting values for frontend javascript\\n\\t$main_config = array(\\n\\t\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n\\t);\\n\\n\\t$modx->regClientStartupScript(\'\\n\\t<script type=\\"text\\/javascript\\">\\n\\t\\tif (typeof mse2Config == \\"undefined\\") {mse2Config = \' . $modx->toJSON($main_config) . \';}\\n\\t\\tif (typeof mse2FormConfig == \\"undefined\\") {mse2FormConfig = {};}\\n\\t\\tmse2FormConfig[\\"\' . $hash . \'\\"] = \' . $modx->toJSON($config) . \';\\n\\t<\\/script>\', true);\\n\\t$modx->regClientScript(\'\\n\\t<script type=\\"text\\/javascript\\">\\n\\t\\tif ($(\\"form.msearch2\\").length) {\\n\\t\\t\\tmSearch2.Form.initialize(\\"form.msearch2\\");\\n\\t\\t}\\n\\t<\\/script>\', true);\\n}\\n\\nreturn $form;","locked":0,"properties":"a:10:{s:6:\\"pageId\\";a:7:{s:4:\\"name\\";s:6:\\"pageId\\";s:4:\\"desc\\";s:16:\\"mse2_prop_pageId\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplForm\\";a:7:{s:4:\\"name\\";s:7:\\"tplForm\\";s:4:\\"desc\\";s:17:\\"mse2_prop_tplForm\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:17:\\"tpl.mSearch2.form\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:13:\\"mse2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:15:\\"tpl.mSearch2.ac\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"element\\";a:7:{s:4:\\"name\\";s:7:\\"element\\";s:4:\\"desc\\";s:17:\\"mse2_prop_element\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"mSearch2\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:15:\\"mse2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:5;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"autocomplete\\";a:7:{s:4:\\"name\\";s:12:\\"autocomplete\\";s:4:\\"desc\\";s:22:\\"mse2_prop_autocomplete\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:8:\\"Disabled\\";s:5:\\"value\\";i:0;}i:1;a:2:{s:4:\\"text\\";s:7:\\"Results\\";s:5:\\"value\\";s:7:\\"results\\";}i:2;a:2:{s:4:\\"text\\";s:7:\\"Queries\\";s:5:\\"value\\";s:7:\\"queries\\";}}s:5:\\"value\\";s:7:\\"results\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"queryVar\\";a:7:{s:4:\\"name\\";s:8:\\"queryVar\\";s:4:\\"desc\\";s:18:\\"mse2_prop_queryVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"query\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"minQuery\\";a:7:{s:4:\\"name\\";s:8:\\"minQuery\\";s:4:\\"desc\\";s:18:\\"mse2_prop_minQuery\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"fields\\";a:7:{s:4:\\"name\\";s:6:\\"fields\\";s:4:\\"desc\\";s:16:\\"mse2_prop_fields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"onlyIndex\\";a:7:{s:4:\\"name\\";s:9:\\"onlyIndex\\";s:4:\\"desc\\";s:19:\\"mse2_prop_onlyIndex\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/snippets\\/snippet.msearchform.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoTools $pdoTools *\\/\\n$pdoTools = $modx->getService(\'pdoTools\');\\n$pdoTools->setConfig($scriptProperties);\\n$pdoTools->addTime(\'pdoTools loaded.\');\\n\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx);\\n$mSearch2->initialize($modx->context->key);\\n\\n$config = array(\\n\\t\'autocomplete\' => !empty($autocomplete) ? $autocomplete : \'\',\\n\\t\'queryVar\' => !empty($queryVar) ? $queryVar : \'query\',\\n\\t\'minQuery\' => !empty($minQuery) ? (integer) $minQuery : 3,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n);\\n$scriptProperties = array_merge($scriptProperties, $config);\\n\\nif (empty($tplForm)) {$tplForm = \'tpl.mSearch2.form\';}\\n$form = $pdoTools->getChunk($tplForm, $scriptProperties);\\n\\nif (!empty($config[\'autocomplete\'])) {\\n\\t$hash = sha1(serialize($scriptProperties));\\n\\t$_SESSION[\'mSearch2\'][$hash] = $scriptProperties;\\n\\n\\t$form = str_ireplace(\'<form\', \'<form data-key=\\"\'.$hash.\'\\"\', $form);\\n\\t\\/\\/ Place for enabled log\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$form = str_ireplace(\'<\\/form>\', \\"<\\/form>\\\\n<pre class=\\\\\\"mSearchFormLog\\\\\\"><\\/pre>\\", $form);\\n\\t}\\n\\n\\t\\/\\/ Setting values for frontend javascript\\n\\t$main_config = array(\\n\\t\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n\\t);\\n\\n\\t$modx->regClientStartupScript(\'\\n\\t<script type=\\"text\\/javascript\\">\\n\\t\\tif (typeof mse2Config == \\"undefined\\") {mse2Config = \' . $modx->toJSON($main_config) . \';}\\n\\t\\tif (typeof mse2FormConfig == \\"undefined\\") {mse2FormConfig = {};}\\n\\t\\tmse2FormConfig[\\"\' . $hash . \'\\"] = \' . $modx->toJSON($config) . \';\\n\\t<\\/script>\', true);\\n\\t$modx->regClientScript(\'\\n\\t<script type=\\"text\\/javascript\\">\\n\\t\\tif ($(\\"form.msearch2\\").length) {\\n\\t\\t\\tmSearch2.Form.initialize(\\"form.msearch2\\");\\n\\t\\t}\\n\\t<\\/script>\', true);\\n}\\n\\nreturn $form;"}',
        'guid' => '34105266b9ad6e1e43290f9b9649684a',
        'native_key' => 0,
        'signature' => '5cf34e5974941a337af7cb7829bbfdd9',
      ),
      '03cc81a718b5a7cb25a884d199cc2190' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mFilter2","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties);\\n$mSearch2->initialize($modx->context->key);\\n$mSearch2->pdoTools->setConfig($scriptProperties);\\n$mSearch2->pdoTools->addTime(\'pdoTools loaded.\');\\n$savedProperties = array();\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($classActive)) {$classActive = \'active\';}\\nif (isset($scriptProperties[\'disableSuggestions\'])) {$scriptProperties[\'suggestions\'] = empty($scriptProperties[\'disableSuggestions\']);}\\nif (empty($toPlaceholders) && !empty($toPlaceholder)) {$toPlaceholders = $toPlaceholder;}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\nif (isset($_REQUEST[\'limit\']) && is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {$limit = abs($_REQUEST[\'limit\']);}\\nelseif (!isset($limit) || $limit === \'\') {$limit = 10;}\\nif (!isset($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n$fastMode = !empty($fastMode);\\n\\/\\/ All templates of filters are converted to lowercase\\nforeach ($scriptProperties as $k => $v) {\\n\\tif (strpos($k, \'tplFilter\') === 0) {\\n\\t\\t$tmp = \'tplFilter.\' . strtolower(substr($k, 10));\\n\\t\\tif ($tmp != $k) {\\n\\t\\t\\tunset($scriptProperties[$k]);\\n\\t\\t\\t$scriptProperties[$tmp] = $v;\\n\\t\\t}\\n\\t}\\n}\\n\\n$class = \'modResource\';\\n$output = array(\'filters\' => array(), \'results\' => array(), \'total\' => 0, \'limit\' => $limit);\\n$ids = $found = $log = $where = array();\\n\\n\\/\\/ ---------------------- Retrieving ids of resources for filter\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? $mSearch2->getQuery(rawurldecode($_REQUEST[$queryVar]))\\n\\t: \'\';\\n\\n\\/\\/ Filter by ids\\nif (!empty($resources)) {\\n\\t$ids = array_map(\'trim\', explode(\',\', $resources));\\n}\\nelseif (isset($_REQUEST[$queryVar]) && empty($query)) {\\n\\t$output[\'results\'] =  $modx->lexicon(\'mse2_err_no_query\');\\n}\\nelseif (empty($query) && !empty($forceSearch)) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_query_var\');\\n}\\nelseif (isset($_REQUEST[$queryVar]) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_min_query\');\\n}\\nelseif (isset($_REQUEST[$queryVar])) {\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\t$found = $mSearch2->Search($query);\\n\\t$ids = array_keys($found);\\n    \\/*\\n\\tif (!empty($ids)) {\\n\\t\\t$tmp = $scriptProperties;\\n\\t\\t$tmp[\'returnIds\'] = 1;\\n\\t\\t$tmp[\'resources\'] = implode(\',\', $ids);\\n\\t\\t$tmp[\'parents\'] = $scriptProperties[\'parents\'];\\n\\t\\t$tmp[\'limit\'] = 0;\\n        $mSearch2->pdoTools->addTime(\'Pass ids to the snippet \'.$scriptProperties[\'element\'].\': \\"\'.$tmp[\'resources\'].\'\\"\');\\n\\t\\t$ids = explode(\',\', $modx->runSnippet($scriptProperties[\'element\'], $tmp));\\n\\t\\t$mSearch2->pdoTools->addTime($scriptProperties[\'element\'] . \' returned ids: \\"\'.implode(\',\',$ids).\'\\"\');\\n\\t}\\n\\tif (empty($ids[0])) {\\n\\t\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');\\n\\t}\\n    *\\/\\n}\\n\\n$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\/\\/ Has error message - exit\\nif (!empty($output[\'results\'])) {\\n\\t$log = \'\';\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n\\t}\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output = $mSearch2->pdoTools->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\t\\treturn $output;\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking resources by status and custom \\"where\\" parameter\\n\\/\\/ Support for specifying property set in the element name\\n$elementName = $scriptProperties[\'element\'];\\n$elementSet = array();\\nif (strpos($elementName, \'@\') !== false) {\\n\\tlist($elementName, $elementSet) = explode(\'@\', $elementName);\\n}\\n\\/** @var modSnippet $snippet *\\/\\nif (!empty($elementName) && $element = $modx->getObject(\'modSnippet\', array(\'name\' => $elementName))) {\\n\\t$elementProperties = $element->getProperties();\\n\\t$elementPropertySet = !empty($elementSet)\\n\\t\\t? $element->getPropertySet($elementSet)\\n\\t\\t: array();\\n\\tif (!is_array($elementPropertySet)) {$elementPropertySet = array();}\\n\\t$params = array_merge(\\n\\t\\t$elementProperties,\\n\\t\\t$elementPropertySet,\\n\\t\\t$scriptProperties,\\n\\t\\tarray(\\n\\t\\t\\t\'parents\' => empty($scriptProperties[$parentsVar]) && !empty($_REQUEST[$parentsVar])\\n\\t\\t\\t\\t? $_REQUEST[$parentsVar]\\n\\t\\t\\t\\t: $scriptProperties[$parentsVar],\\n\\t\\t\\t\'returnIds\' => 1,\\n\\t\\t\\t\'limit\' => 0,\\n\\t\\t)\\n\\t);\\n\\tif (!empty($ids)) {\\n\\t\\t$params[\'resources\'] = implode(\',\', $ids);\\n\\t}\\n\\t$element->setCacheable(false);\\n\\tif ($tmp = $element->process($params)) {\\n        $ids = explode(\',\', $tmp);\\n\\t}\\n\\t$mSearch2->pdoTools->addTime(\'Fetched \'.count($ids).\' ids for building filters from element \\"\'.$elementName.\'\\"\');\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find main snippet with name: \\"\'.$elementName.\'\\"\');\\n\\treturn \'\';\\n}\\n\\n\\/\\/ ---------------------- Nothing to filter, exit\\nif (empty($ids)) {\\n    $log = $modx->user->hasSessionContext(\'mgr\') && !empty($showLog)\\n\\t\\t? \'<pre class=\\"mFilterLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\'\\n        : \'\';\\n\\t$output = array_merge($output, array(\\n\\t\\t\'filters\' => $modx->lexicon(\'mse2_err_no_filters\'),\\n\\t\\t\'results\' => $modx->lexicon(\'mse2_err_no_results\'),\\n\\t\\t\'log\' => $log\\n\\t));\\n\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output[\'results\'] .= $log;\\n\\t\\treturn $mSearch2->pdoTools->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking for suggestions processing\\n\\/\\/ Checking by results count\\nif (!empty($scriptProperties[\'suggestionsMaxResults\']) && count($ids) > $scriptProperties[\'suggestionsMaxResults\']) {\\n\\t$scriptProperties[\'suggestions\'] = false;\\n\\t$mSearch2->pdoTools->addTime(\'Suggestions disabled by \\"suggestionsMaxResults\\" parameter: results count is \'.count($ids).\', max allowed is \'.$scriptProperties[\'suggestionsMaxResults\']);\\n}\\nelse {\\n\\t$mSearch2->pdoTools->addTime(\'Total number of results: \'.count($ids));\\n}\\n\\n\\/\\/ Then get filters\\n$mSearch2->pdoTools->addTime(\'Getting filters for \'.count($ids).\' ids\');\\n$filters = $mSearch2->getFilters($ids);\\n\\/\\/ And checking by filters count\\n$count = 0;\\nif (!empty($filters) && $scriptProperties[\'suggestions\']) {\\n    foreach ($filters as $tmp) {\\n        if (!is_array($tmp)) {continue;}\\n        $count += count(array_values($tmp));\\n    }\\n    if (!empty($scriptProperties[\'suggestionsMaxFilters\']) && $count > $scriptProperties[\'suggestionsMaxFilters\']) {\\n        $scriptProperties[\'suggestions\'] = false;\\n        $mSearch2->pdoTools->addTime(\'Suggestions disabled by \\"suggestionsMaxFilters\\" parameter: filters count is \'.$count.\', max allowed is \'.$scriptProperties[\'suggestionsMaxFilters\']);\\n    }\\n    else {\\n        $mSearch2->pdoTools->addTime(\'Total number of filters: \'.$count);\\n    }\\n}\\n$modx->setPlaceholder($plPrefix . \'filters_count\', $count );\\n\\n\\n\\/\\/ ---------------------- Loading results\\n$start_sort = implode(\',\', array_map(\'trim\' , explode(\',\', $scriptProperties[\'sort\'])));\\n$start_limit = 0;\\n$suggestions = array();\\n$page = $sort = \'\';\\n\\n\\/\\/ Support for specifying property set in the paginator name\\n$paginatorName = $scriptProperties[\'paginator\'];\\n$paginatorSet = array();\\nif (strpos($paginatorName, \'@\') !== false) {\\n\\tlist($paginatorName, $paginatorSet) = explode(\'@\', $paginatorName);\\n}\\n\\n\\/** @var modSnippet $paginator *\\/\\nif (!$paginator = $modx->getObject(\'modSnippet\', array(\'name\' => $paginatorName))) {\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n\\n    return \'\';\\n}\\n$paginatorProperties = $paginator->getProperties();\\n$paginatorPropertySet = !empty($paginatorSet)\\n    ? $paginator->getPropertySet($paginatorSet)\\n    : array();\\nif (!is_array($paginatorPropertySet)) {$paginatorPropertySet = array();}\\n$paginatorProperties = array_merge(\\n    $paginatorProperties,\\n    $paginatorPropertySet,\\n    $elementPropertySet,\\n    $scriptProperties,\\n    array(\\n        \'resources\' => implode(\',\', $ids),\\n        \'parents\' => \'0\',\\n        \'element\' => $elementName,\\n        \'defaultSort\' => $start_sort,\\n        \'toPlaceholder\' => false,\\n        \'limit\' => $limit,\\n        \'ajaxMode\' => \'\',\\n        \'ajax\' => 0,\\n        \'frontend_js\' => \'\',\\n        \'frontend_css\' => \'\',\\n    )\\n);\\n\\n\\/\\/ Switching chunk for rows, if specified\\nif (!empty($scriptProperties[\'tpls\'])) {\\n    $tmp = isset($_REQUEST[\'tpl\']) ? (integer) $_REQUEST[\'tpl\'] : 0;\\n    $tpls = array_map(\'trim\', explode(\',\', $scriptProperties[\'tpls\']));\\n    $paginatorProperties[\'tpls\'] = $tpls;\\n    if (isset($tpls[$tmp])) {\\n        $paginatorProperties[\'tpl\'] = $tpls[$tmp];\\n        $paginatorProperties[\'tpl_idx\'] = $tmp;\\n    }\\n}\\n\\n\\/\\/ Trying to save weight of found ids if using mSearch2\\n$weight = false;\\nif (!empty($found) && strtolower($elementName) == \'msearch2\') {\\n    $tmp = array();\\n    foreach ($ids as $v) {\\n        $tmp[$v] = isset($found[$v])\\n            ? $found[$v]\\n            : 0;\\n    }\\n    $paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n    $weight = true;\\n}\\n\\nif (!empty($_REQUEST[\'sort\'])) {$sort = $_REQUEST[\'sort\'];}\\nelseif (!empty($start_sort)) {$sort = $start_sort;}\\n\\/*\\nelse {\\n    $sortby = !empty($scriptProperties[\'sortby\']) ? $scriptProperties[\'sortby\'] : \'\';\\n    if (!empty($sortby)) {\\n        $sortdir = !empty($scriptProperties[\'sortdir\']) ? $scriptProperties[\'sortdir\'] : \'asc\';\\n        $sort = $sortby.$mSearch2->config[\'method_delimeter\'].$sortdir;\\n    }\\n}*\\/\\nif (!empty($_REQUEST[$paginatorProperties[\'pageVarKey\']])) {\\n    $page = (int) $_REQUEST[$paginatorProperties[\'pageVarKey\']];\\n}\\nif (!empty($sort)) {\\n    $paginatorProperties[\'sortby\'] = $mSearch2->getSortFields($sort);\\n    $paginatorProperties[\'sortdir\'] = \'\';\\n}\\n\\n$start_limit = !empty($scriptProperties[\'limit\'])\\n        ? $scriptProperties[\'limit\']\\n        : $paginatorProperties[\'limit\'];\\n$paginatorProperties[\'start_limit\'] = $start_limit;\\n$savedProperties[\'paginatorProperties\'] = $paginatorProperties;\\n\\n\\/\\/ We have a delimiters in $_GET, so need to filter resources\\nif (strpos(implode(array_keys($_GET)), $mSearch2->config[\'filter_delimeter\']) !== false || !empty($mSearch2->aliases)) {\\n    $matched = $mSearch2->Filter($ids, $_REQUEST);\\n    $matched = array_intersect($ids, $matched);\\n    if ($scriptProperties[\'suggestions\']) {\\n        $suggestions = $mSearch2->getSuggestions($ids, $_REQUEST, $matched);\\n        $mSearch2->pdoTools->addTime(\'Suggestions retrieved.\');\\n    }\\n    \\/\\/ Trying to save weight of found ids again\\n    if ($weight) {\\n        $tmp = array();\\n        foreach ($matched as $v) {$tmp[$v] = isset($found[$v]) ? $found[$v] : 0;}\\n        $paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n    }\\n    else {\\n        $paginatorProperties[\'resources\'] = implode(\',\', $matched);\\n    }\\n}\\n\\/\\/ Saving log\\n$log = $mSearch2->pdoTools->timings;\\n$mSearch2->pdoTools->timings = array();\\n\\n\\/\\/$paginator->setProperties($paginatorProperties);\\n$paginator->setCacheable(false);\\n$output[\'results\'] = !empty($paginatorProperties[\'resources\'])\\n    ? $paginator->process($paginatorProperties)\\n    : $modx->lexicon(\'mse2_err_no_results\');\\n$output[\'total\'] = $modx->getPlaceholder($paginatorProperties[\'totalVar\']);\\n\\n\\/\\/ ----------------------  Loading filters\\n$mSearch2->pdoTools->timings = $log;\\nif (!empty($paginator)) {\\n\\t$mSearch2->pdoTools->addTime(\'Fired paginator: \\"\'.$paginatorName.\'\\"\');\\n}\\nelse {\\n\\t$mSearch2->pdoTools->addTime(\'Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n}\\nif (empty($filters)) {\\n\\t$mSearch2->pdoTools->addTime(\'No filters retrieved\');\\n\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n}\\nelse {\\n\\t$mSearch2->pdoTools->addTime(\'Filters retrieved\');\\n\\t$request = array();\\n\\tforeach ($_GET as $k => $v) {\\n\\t\\t$tmp = explode($mSearch2->config[\'values_delimeter\'], $v);\\n\\t\\t$request[$k] = array();\\n\\t\\tforeach ($tmp as $v2) {\\n\\t\\t\\t$request[$k][] = str_replace(\'\\"\', \'&quot;\', $v2);\\n\\t\\t}\\n\\t}\\n\\n\\t$aliases = $mSearch2->aliases;\\n\\tforeach ($filters as $filter => $data) {\\n\\t\\tif (empty($data) || !is_array($data)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\t$rows = $has_active = \'\';\\n\\t\\tlist($table, $method) = explode($mSearch2->config[\'filter_delimeter\'], $filter);\\n\\t\\t$filter_key = !empty($aliases[$filter])\\n\\t\\t\\t? $aliases[$filter]\\n\\t\\t\\t: $filter;\\n\\n\\t\\t$tplOuter = !empty($scriptProperties[\'tplFilter.outer.\' . $filter_key])\\n\\t\\t\\t? $scriptProperties[\'tplFilter.outer.\' . $filter_key]\\n\\t\\t\\t: $scriptProperties[\'tplFilter.outer.default\'];\\n\\t\\t$tplRow = !empty($scriptProperties[\'tplFilter.row.\' . $filter_key])\\n\\t\\t\\t? $scriptProperties[\'tplFilter.row.\' . $filter_key]\\n\\t\\t\\t: $scriptProperties[\'tplFilter.row.default\'];\\n\\t\\t$tplEmpty = !empty($scriptProperties[\'tplFilter.empty.\' . $filter_key])\\n\\t\\t\\t? $scriptProperties[\'tplFilter.empty.\' . $filter_key]\\n\\t\\t\\t: \'\';\\n\\n\\t\\t$idx = 0;\\n\\t\\tforeach ($data as $v) {\\n\\t\\t\\tif (empty($v)) {continue;}\\n\\t\\t\\t$checked = isset($request[$filter_key]) && in_array((string)$v[\'value\'], $request[$filter_key], true) && isset($v[\'type\']) && $v[\'type\'] != \'number\';\\n\\t\\t\\tif ($scriptProperties[\'suggestions\']) {\\n\\t\\t\\t\\tif ($checked) {\\n\\t\\t\\t\\t\\t$num = \'\';\\n\\t\\t\\t\\t\\t$has_active = \'has_active\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telseif (isset($suggestions[$filter_key][$v[\'value\']])) {\\n\\t\\t\\t\\t\\t$num = $suggestions[$filter_key][$v[\'value\']];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$num = !empty($v[\'resources\'])\\n\\t\\t\\t\\t\\t\\t? count($v[\'resources\'])\\n\\t\\t\\t\\t\\t\\t: \'\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$num = \'\';\\n\\t\\t\\t}\\n\\n\\t\\t\\t$rows .= $mSearch2->pdoTools->getChunk($tplRow, array(\\n\\t\\t\\t\\t\'filter\' => $method,\\n\\t\\t\\t\\t\'table\' => $table,\\n\\t\\t\\t\\t\'title\' => $v[\'title\'],\\n\\t\\t\\t\\t\'value\' => $v[\'value\'],\\n\\t\\t\\t\\t\'type\' => $v[\'type\'],\\n\\t\\t\\t\\t\'checked\' => $checked\\n\\t\\t\\t\\t\\t? \'checked\'\\n\\t\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\\t\'selected\' => $checked\\n\\t\\t\\t\\t\\t? \'selected\'\\n\\t\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\\t\'disabled\' => !$checked && empty($num) && $scriptProperties[\'suggestions\']\\n\\t\\t\\t\\t\\t? \'disabled\'\\n\\t\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\\t\'delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\\t\\t\\t\'idx\' => $idx++,\\n\\t\\t\\t\\t\'num\' => $num,\\n\\t\\t\\t\\t\'filter_key\' => $filter_key,\\n\\t\\t\\t), $fastMode);\\n\\t\\t}\\n\\n\\t\\t$tpl = empty($rows) ? $tplEmpty : $tplOuter;\\n\\t\\tif (!isset($output[\'filters\'][$filter])) {\\n\\t\\t\\t$output[\'filters\'][$filter] = \'\';\\n\\t\\t}\\n\\t\\t$output[\'filters\'][$filter] = $mSearch2->pdoTools->getChunk($tpl, array(\\n\\t\\t\\t\'filter\' => $method,\\n\\t\\t\\t\'table\' => $table,\\n\\t\\t\\t\'rows\' => $rows,\\n\\t\\t\\t\'has_active\' => $has_active,\\n\\t\\t\\t\'delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\\t\\t\'filter_key\' => $filter_key,\\n\\t\\t), $fastMode);\\n\\t}\\n\\n\\tif (empty($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\t\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n\\t}\\n\\telse {\\n\\t\\t$mSearch2->pdoTools->addTime(\'Filters templated\');\\n\\t}\\n}\\n$mSearch2->pdoTools->addTime(\'Total filter operations: \'.$mSearch2->filter_operations);\\n\\n\\/\\/ Saving params into cache for ajax requests\\n$savedProperties[\'scriptProperties\'] = $scriptProperties;\\n$hash = sha1(serialize($savedProperties));\\n$_SESSION[\'mSearch2\'][$hash] = $savedProperties;\\n\\n\\/\\/ Active class for sort links\\nif (!empty($sort)) {$output[$sort] = $classActive;}\\nif (isset($paginatorProperties[\'tpl_idx\'])) {\\n\\t$output[\'tpl\'.$paginatorProperties[\'tpl_idx\']] = $classActive;\\n\\t$output[\'tpls\'] = 1;\\n}\\n\\n\\/\\/ Setting values for frontend javascript\\n$config = array(\\n\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n\\t\'queryVar\' => $mSearch2->config[\'queryVar\'],\\n\\t\'idVar\' => $modx->getOption(\'request_param_id\', null, \'id\'),\\n\\t\'filter_delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\'method_delimeter\' => $mSearch2->config[\'method_delimeter\'],\\n\\t\'values_delimeter\' => $mSearch2->config[\'values_delimeter\'],\\n\\t\'start_sort\' => $start_sort,\\n\\t\'start_limit\' => $start_limit,\\n\\t\'start_page\' => 1,\\n\\t\'start_tpl\' => \'\',\\n\\t\'sort\' => $sort == $start_sort ? \'\' : $sort,\\n\\t\'limit\' => $limit == $start_limit ? \'\' : $limit,\\n\\t\'page\' => $page,\\n\\t\'pageVar\' => $paginatorProperties[\'pageVarKey\'],\\n\\t\'tpl\' => !empty($paginatorProperties[\'tpl_idx\'])\\n\\t\\t\\t? $paginatorProperties[\'tpl_idx\']\\n\\t\\t\\t: \'\',\\n\\t\'parentsVar\' => $parentsVar,\\n\\t\'key\' => $hash,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n\\t$queryVar => isset($_REQUEST[$queryVar]) ? $_REQUEST[$queryVar] : \'\',\\n\\t$parentsVar => isset($_REQUEST[$parentsVar]) ? $_REQUEST[$parentsVar] : \'\',\\n\\t\'aliases\' => array_flip($mSearch2->aliases),\\n\\t\'options\' => array(),\\n\\t\'mode\' => in_array($scriptProperties[\'ajaxMode\'], array(\'button\', \'scroll\')) ? $scriptProperties[\'ajaxMode\'] : \'\',\\n\\t\'moreText\' => $modx->lexicon(\'mse2_more\'),\\n);\\nif (!empty($scriptProperties[\'filterOptions\'])) {\\n\\t$filterOptions = $modx->fromJSON($scriptProperties[\'filterOptions\']);\\n\\tif (is_array($filterOptions)) {\\n\\t\\t$config[\'filterOptions\'] = $filterOptions;\\n\\t}\\n}\\nif (empty($noJsConfig)) {\\n$modx->regClientStartupScript(\'\\n<script type=\\"text\\/javascript\\">mse2Config = \' . json_encode($config) . \';<\\/script>\', true);\\n}\\nif (empty($noJsInitialize)) {\\n$modx->regClientScript(\'\\n<script type=\\"text\\/javascript\\">\\n    if ($(\\"#mse2_mfilter\\").length) {\\n        if (window.location.hash != \\"\\" && mSearch2.Hash.oldbrowser()) {\\n            var uri = window.location.hash.replace(\\"#\\", \\"?\\");\\n            window.location.href = document.location.pathname + uri;\\n        }\\n        else {\\n            mSearch2.initialize(\\"body\\");\\n        }\\n    }\\n    <\\/script>\', true);\\n}\\n$modx->setPlaceholders($config, $plPrefix);\\n\\n\\/\\/ Prepare output\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$modx->setPlaceholders($output[\'filters\'], $toSeparatePlaceholders);\\n\\t$output[\'log\'] = $log;\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\n\\t$pcre = \'#^\' . preg_quote($toSeparatePlaceholders) . \'(\\\\d+)$#\';\\n\\t$tmp = array();\\n\\tforeach ($modx->placeholders as $k => $v) {\\n\\t\\tif (preg_match($pcre, $k)) {\\n\\t\\t\\t$tmp[] = $v;\\n\\t\\t}\\n\\t}\\n\\n\\t$output[\'results\'] = !empty($tmp)\\n\\t\\t? implode($outputSeparator, $tmp)\\n\\t\\t: $modx->lexicon(\'mse2_err_no_results\');\\n\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\tif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t}\\n\\telse {\\n\\t\\t$output = $mSearch2->pdoTools->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:37:{s:9:\\"paginator\\";a:7:{s:4:\\"name\\";s:9:\\"paginator\\";s:4:\\"desc\\";s:19:\\"mse2_prop_paginator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"pdoPage\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"element\\";a:7:{s:4:\\"name\\";s:7:\\"element\\";s:4:\\"desc\\";s:17:\\"mse2_prop_element\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"mSearch2\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"sort\\";a:7:{s:4:\\"name\\";s:4:\\"sort\\";s:4:\\"desc\\";s:14:\\"mse2_prop_sort\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"filters\\";a:7:{s:4:\\"name\\";s:7:\\"filters\\";s:4:\\"desc\\";s:17:\\"mse2_prop_filters\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:23:\\"resource|parent:parents\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"aliases\\";a:7:{s:4:\\"name\\";s:7:\\"aliases\\";s:4:\\"desc\\";s:17:\\"mse2_prop_aliases\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"showEmptyFilters\\";a:7:{s:4:\\"name\\";s:16:\\"showEmptyFilters\\";s:4:\\"desc\\";s:26:\\"mse2_prop_showEmptyFilters\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:19:\\"mse2_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:17:\\"mse2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:15:\\"mse2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:18:\\"mse2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.mFilter2.outer\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:23:\\"tplFilter.outer.default\\";a:7:{s:4:\\"name\\";s:23:\\"tplFilter.outer.default\\";s:4:\\"desc\\";s:33:\\"mse2_prop_tplFilter.outer.default\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:25:\\"tpl.mFilter2.filter.outer\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"tplFilter.row.default\\";a:7:{s:4:\\"name\\";s:21:\\"tplFilter.row.default\\";s:4:\\"desc\\";s:31:\\"mse2_prop_tplFilter.row.default\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.mFilter2.filter.checkbox\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:20:\\"mse2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:21:\\"mse2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:25:\\"mse2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:24:\\"mse2_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:17:\\"mse2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:18:\\"mse2_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"suggestions\\";a:7:{s:4:\\"name\\";s:11:\\"suggestions\\";s:4:\\"desc\\";s:21:\\"mse2_prop_suggestions\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"suggestionsMaxFilters\\";a:7:{s:4:\\"name\\";s:21:\\"suggestionsMaxFilters\\";s:4:\\"desc\\";s:31:\\"mse2_prop_suggestionsMaxFilters\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:400;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"suggestionsMaxResults\\";a:7:{s:4:\\"name\\";s:21:\\"suggestionsMaxResults\\";s:4:\\"desc\\";s:31:\\"mse2_prop_suggestionsMaxResults\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:2000;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"suggestionsRadio\\";a:7:{s:4:\\"name\\";s:16:\\"suggestionsRadio\\";s:4:\\"desc\\";s:26:\\"mse2_prop_suggestionsRadio\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"toPlaceholders\\";a:7:{s:4:\\"name\\";s:14:\\"toPlaceholders\\";s:4:\\"desc\\";s:24:\\"mse2_prop_toPlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:32:\\"mse2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"filter_delimeter\\";a:7:{s:4:\\"name\\";s:16:\\"filter_delimeter\\";s:4:\\"desc\\";s:26:\\"mse2_prop_filter_delimeter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"|\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"method_delimeter\\";a:7:{s:4:\\"name\\";s:16:\\"method_delimeter\\";s:4:\\"desc\\";s:26:\\"mse2_prop_method_delimeter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\":\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"values_delimeter\\";a:7:{s:4:\\"name\\";s:16:\\"values_delimeter\\";s:4:\\"desc\\";s:26:\\"mse2_prop_values_delimeter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\",\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"tpls\\";a:7:{s:4:\\"name\\";s:4:\\"tpls\\";s:4:\\"desc\\";s:14:\\"mse2_prop_tpls\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"forceSearch\\";a:7:{s:4:\\"name\\";s:11:\\"forceSearch\\";s:4:\\"desc\\";s:21:\\"mse2_prop_forceSearch\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"fields\\";a:7:{s:4:\\"name\\";s:6:\\"fields\\";s:4:\\"desc\\";s:16:\\"mse2_prop_fields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"onlyIndex\\";a:7:{s:4:\\"name\\";s:9:\\"onlyIndex\\";s:4:\\"desc\\";s:19:\\"mse2_prop_onlyIndex\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"onlyAllWords\\";a:7:{s:4:\\"name\\";s:12:\\"onlyAllWords\\";s:4:\\"desc\\";s:22:\\"mse2_prop_onlyAllWords\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"showSearchLog\\";a:7:{s:4:\\"name\\";s:13:\\"showSearchLog\\";s:4:\\"desc\\";s:23:\\"mse2_prop_showSearchLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"filterOptions\\";a:7:{s:4:\\"name\\";s:13:\\"filterOptions\\";s:4:\\"desc\\";s:23:\\"mse2_prop_filterOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"suggestionsSliders\\";a:7:{s:4:\\"name\\";s:18:\\"suggestionsSliders\\";s:4:\\"desc\\";s:28:\\"mse2_prop_suggestionsSliders\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"ajaxMode\\";a:7:{s:4:\\"name\\";s:8:\\"ajaxMode\\";s:4:\\"desc\\";s:18:\\"mse2_prop_ajaxMode\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:7:\\"Default\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:6:\\"Scroll\\";s:5:\\"value\\";s:6:\\"scroll\\";}i:2;a:2:{s:4:\\"text\\";s:6:\\"Button\\";s:5:\\"value\\";s:6:\\"button\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:19:\\"mse2_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/snippets\\/snippet.mfilter2.php","content":"\\/** @var modX $modx *\\/\\n\\/** @var array $scriptProperties *\\/\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties);\\n$mSearch2->initialize($modx->context->key);\\n$mSearch2->pdoTools->setConfig($scriptProperties);\\n$mSearch2->pdoTools->addTime(\'pdoTools loaded.\');\\n$savedProperties = array();\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($classActive)) {$classActive = \'active\';}\\nif (isset($scriptProperties[\'disableSuggestions\'])) {$scriptProperties[\'suggestions\'] = empty($scriptProperties[\'disableSuggestions\']);}\\nif (empty($toPlaceholders) && !empty($toPlaceholder)) {$toPlaceholders = $toPlaceholder;}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\nif (isset($_REQUEST[\'limit\']) && is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {$limit = abs($_REQUEST[\'limit\']);}\\nelseif (!isset($limit) || $limit === \'\') {$limit = 10;}\\nif (!isset($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n$fastMode = !empty($fastMode);\\n\\/\\/ All templates of filters are converted to lowercase\\nforeach ($scriptProperties as $k => $v) {\\n\\tif (strpos($k, \'tplFilter\') === 0) {\\n\\t\\t$tmp = \'tplFilter.\' . strtolower(substr($k, 10));\\n\\t\\tif ($tmp != $k) {\\n\\t\\t\\tunset($scriptProperties[$k]);\\n\\t\\t\\t$scriptProperties[$tmp] = $v;\\n\\t\\t}\\n\\t}\\n}\\n\\n$class = \'modResource\';\\n$output = array(\'filters\' => array(), \'results\' => array(), \'total\' => 0, \'limit\' => $limit);\\n$ids = $found = $log = $where = array();\\n\\n\\/\\/ ---------------------- Retrieving ids of resources for filter\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? $mSearch2->getQuery(rawurldecode($_REQUEST[$queryVar]))\\n\\t: \'\';\\n\\n\\/\\/ Filter by ids\\nif (!empty($resources)) {\\n\\t$ids = array_map(\'trim\', explode(\',\', $resources));\\n}\\nelseif (isset($_REQUEST[$queryVar]) && empty($query)) {\\n\\t$output[\'results\'] =  $modx->lexicon(\'mse2_err_no_query\');\\n}\\nelseif (empty($query) && !empty($forceSearch)) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_query_var\');\\n}\\nelseif (isset($_REQUEST[$queryVar]) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_min_query\');\\n}\\nelseif (isset($_REQUEST[$queryVar])) {\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\t$found = $mSearch2->Search($query);\\n\\t$ids = array_keys($found);\\n    \\/*\\n\\tif (!empty($ids)) {\\n\\t\\t$tmp = $scriptProperties;\\n\\t\\t$tmp[\'returnIds\'] = 1;\\n\\t\\t$tmp[\'resources\'] = implode(\',\', $ids);\\n\\t\\t$tmp[\'parents\'] = $scriptProperties[\'parents\'];\\n\\t\\t$tmp[\'limit\'] = 0;\\n        $mSearch2->pdoTools->addTime(\'Pass ids to the snippet \'.$scriptProperties[\'element\'].\': \\"\'.$tmp[\'resources\'].\'\\"\');\\n\\t\\t$ids = explode(\',\', $modx->runSnippet($scriptProperties[\'element\'], $tmp));\\n\\t\\t$mSearch2->pdoTools->addTime($scriptProperties[\'element\'] . \' returned ids: \\"\'.implode(\',\',$ids).\'\\"\');\\n\\t}\\n\\tif (empty($ids[0])) {\\n\\t\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');\\n\\t}\\n    *\\/\\n}\\n\\n$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\/\\/ Has error message - exit\\nif (!empty($output[\'results\'])) {\\n\\t$log = \'\';\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n\\t}\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output = $mSearch2->pdoTools->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\t\\treturn $output;\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking resources by status and custom \\"where\\" parameter\\n\\/\\/ Support for specifying property set in the element name\\n$elementName = $scriptProperties[\'element\'];\\n$elementSet = array();\\nif (strpos($elementName, \'@\') !== false) {\\n\\tlist($elementName, $elementSet) = explode(\'@\', $elementName);\\n}\\n\\/** @var modSnippet $snippet *\\/\\nif (!empty($elementName) && $element = $modx->getObject(\'modSnippet\', array(\'name\' => $elementName))) {\\n\\t$elementProperties = $element->getProperties();\\n\\t$elementPropertySet = !empty($elementSet)\\n\\t\\t? $element->getPropertySet($elementSet)\\n\\t\\t: array();\\n\\tif (!is_array($elementPropertySet)) {$elementPropertySet = array();}\\n\\t$params = array_merge(\\n\\t\\t$elementProperties,\\n\\t\\t$elementPropertySet,\\n\\t\\t$scriptProperties,\\n\\t\\tarray(\\n\\t\\t\\t\'parents\' => empty($scriptProperties[$parentsVar]) && !empty($_REQUEST[$parentsVar])\\n\\t\\t\\t\\t? $_REQUEST[$parentsVar]\\n\\t\\t\\t\\t: $scriptProperties[$parentsVar],\\n\\t\\t\\t\'returnIds\' => 1,\\n\\t\\t\\t\'limit\' => 0,\\n\\t\\t)\\n\\t);\\n\\tif (!empty($ids)) {\\n\\t\\t$params[\'resources\'] = implode(\',\', $ids);\\n\\t}\\n\\t$element->setCacheable(false);\\n\\tif ($tmp = $element->process($params)) {\\n        $ids = explode(\',\', $tmp);\\n\\t}\\n\\t$mSearch2->pdoTools->addTime(\'Fetched \'.count($ids).\' ids for building filters from element \\"\'.$elementName.\'\\"\');\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find main snippet with name: \\"\'.$elementName.\'\\"\');\\n\\treturn \'\';\\n}\\n\\n\\/\\/ ---------------------- Nothing to filter, exit\\nif (empty($ids)) {\\n    $log = $modx->user->hasSessionContext(\'mgr\') && !empty($showLog)\\n\\t\\t? \'<pre class=\\"mFilterLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\'\\n        : \'\';\\n\\t$output = array_merge($output, array(\\n\\t\\t\'filters\' => $modx->lexicon(\'mse2_err_no_filters\'),\\n\\t\\t\'results\' => $modx->lexicon(\'mse2_err_no_results\'),\\n\\t\\t\'log\' => $log\\n\\t));\\n\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output[\'results\'] .= $log;\\n\\t\\treturn $mSearch2->pdoTools->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking for suggestions processing\\n\\/\\/ Checking by results count\\nif (!empty($scriptProperties[\'suggestionsMaxResults\']) && count($ids) > $scriptProperties[\'suggestionsMaxResults\']) {\\n\\t$scriptProperties[\'suggestions\'] = false;\\n\\t$mSearch2->pdoTools->addTime(\'Suggestions disabled by \\"suggestionsMaxResults\\" parameter: results count is \'.count($ids).\', max allowed is \'.$scriptProperties[\'suggestionsMaxResults\']);\\n}\\nelse {\\n\\t$mSearch2->pdoTools->addTime(\'Total number of results: \'.count($ids));\\n}\\n\\n\\/\\/ Then get filters\\n$mSearch2->pdoTools->addTime(\'Getting filters for \'.count($ids).\' ids\');\\n$filters = $mSearch2->getFilters($ids);\\n\\/\\/ And checking by filters count\\n$count = 0;\\nif (!empty($filters) && $scriptProperties[\'suggestions\']) {\\n    foreach ($filters as $tmp) {\\n        if (!is_array($tmp)) {continue;}\\n        $count += count(array_values($tmp));\\n    }\\n    if (!empty($scriptProperties[\'suggestionsMaxFilters\']) && $count > $scriptProperties[\'suggestionsMaxFilters\']) {\\n        $scriptProperties[\'suggestions\'] = false;\\n        $mSearch2->pdoTools->addTime(\'Suggestions disabled by \\"suggestionsMaxFilters\\" parameter: filters count is \'.$count.\', max allowed is \'.$scriptProperties[\'suggestionsMaxFilters\']);\\n    }\\n    else {\\n        $mSearch2->pdoTools->addTime(\'Total number of filters: \'.$count);\\n    }\\n}\\n$modx->setPlaceholder($plPrefix . \'filters_count\', $count );\\n\\n\\n\\/\\/ ---------------------- Loading results\\n$start_sort = implode(\',\', array_map(\'trim\' , explode(\',\', $scriptProperties[\'sort\'])));\\n$start_limit = 0;\\n$suggestions = array();\\n$page = $sort = \'\';\\n\\n\\/\\/ Support for specifying property set in the paginator name\\n$paginatorName = $scriptProperties[\'paginator\'];\\n$paginatorSet = array();\\nif (strpos($paginatorName, \'@\') !== false) {\\n\\tlist($paginatorName, $paginatorSet) = explode(\'@\', $paginatorName);\\n}\\n\\n\\/** @var modSnippet $paginator *\\/\\nif (!$paginator = $modx->getObject(\'modSnippet\', array(\'name\' => $paginatorName))) {\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n\\n    return \'\';\\n}\\n$paginatorProperties = $paginator->getProperties();\\n$paginatorPropertySet = !empty($paginatorSet)\\n    ? $paginator->getPropertySet($paginatorSet)\\n    : array();\\nif (!is_array($paginatorPropertySet)) {$paginatorPropertySet = array();}\\n$paginatorProperties = array_merge(\\n    $paginatorProperties,\\n    $paginatorPropertySet,\\n    $elementPropertySet,\\n    $scriptProperties,\\n    array(\\n        \'resources\' => implode(\',\', $ids),\\n        \'parents\' => \'0\',\\n        \'element\' => $elementName,\\n        \'defaultSort\' => $start_sort,\\n        \'toPlaceholder\' => false,\\n        \'limit\' => $limit,\\n        \'ajaxMode\' => \'\',\\n        \'ajax\' => 0,\\n        \'frontend_js\' => \'\',\\n        \'frontend_css\' => \'\',\\n    )\\n);\\n\\n\\/\\/ Switching chunk for rows, if specified\\nif (!empty($scriptProperties[\'tpls\'])) {\\n    $tmp = isset($_REQUEST[\'tpl\']) ? (integer) $_REQUEST[\'tpl\'] : 0;\\n    $tpls = array_map(\'trim\', explode(\',\', $scriptProperties[\'tpls\']));\\n    $paginatorProperties[\'tpls\'] = $tpls;\\n    if (isset($tpls[$tmp])) {\\n        $paginatorProperties[\'tpl\'] = $tpls[$tmp];\\n        $paginatorProperties[\'tpl_idx\'] = $tmp;\\n    }\\n}\\n\\n\\/\\/ Trying to save weight of found ids if using mSearch2\\n$weight = false;\\nif (!empty($found) && strtolower($elementName) == \'msearch2\') {\\n    $tmp = array();\\n    foreach ($ids as $v) {\\n        $tmp[$v] = isset($found[$v])\\n            ? $found[$v]\\n            : 0;\\n    }\\n    $paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n    $weight = true;\\n}\\n\\nif (!empty($_REQUEST[\'sort\'])) {$sort = $_REQUEST[\'sort\'];}\\nelseif (!empty($start_sort)) {$sort = $start_sort;}\\n\\/*\\nelse {\\n    $sortby = !empty($scriptProperties[\'sortby\']) ? $scriptProperties[\'sortby\'] : \'\';\\n    if (!empty($sortby)) {\\n        $sortdir = !empty($scriptProperties[\'sortdir\']) ? $scriptProperties[\'sortdir\'] : \'asc\';\\n        $sort = $sortby.$mSearch2->config[\'method_delimeter\'].$sortdir;\\n    }\\n}*\\/\\nif (!empty($_REQUEST[$paginatorProperties[\'pageVarKey\']])) {\\n    $page = (int) $_REQUEST[$paginatorProperties[\'pageVarKey\']];\\n}\\nif (!empty($sort)) {\\n    $paginatorProperties[\'sortby\'] = $mSearch2->getSortFields($sort);\\n    $paginatorProperties[\'sortdir\'] = \'\';\\n}\\n\\n$start_limit = !empty($scriptProperties[\'limit\'])\\n        ? $scriptProperties[\'limit\']\\n        : $paginatorProperties[\'limit\'];\\n$paginatorProperties[\'start_limit\'] = $start_limit;\\n$savedProperties[\'paginatorProperties\'] = $paginatorProperties;\\n\\n\\/\\/ We have a delimiters in $_GET, so need to filter resources\\nif (strpos(implode(array_keys($_GET)), $mSearch2->config[\'filter_delimeter\']) !== false || !empty($mSearch2->aliases)) {\\n    $matched = $mSearch2->Filter($ids, $_REQUEST);\\n    $matched = array_intersect($ids, $matched);\\n    if ($scriptProperties[\'suggestions\']) {\\n        $suggestions = $mSearch2->getSuggestions($ids, $_REQUEST, $matched);\\n        $mSearch2->pdoTools->addTime(\'Suggestions retrieved.\');\\n    }\\n    \\/\\/ Trying to save weight of found ids again\\n    if ($weight) {\\n        $tmp = array();\\n        foreach ($matched as $v) {$tmp[$v] = isset($found[$v]) ? $found[$v] : 0;}\\n        $paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n    }\\n    else {\\n        $paginatorProperties[\'resources\'] = implode(\',\', $matched);\\n    }\\n}\\n\\/\\/ Saving log\\n$log = $mSearch2->pdoTools->timings;\\n$mSearch2->pdoTools->timings = array();\\n\\n\\/\\/$paginator->setProperties($paginatorProperties);\\n$paginator->setCacheable(false);\\n$output[\'results\'] = !empty($paginatorProperties[\'resources\'])\\n    ? $paginator->process($paginatorProperties)\\n    : $modx->lexicon(\'mse2_err_no_results\');\\n$output[\'total\'] = $modx->getPlaceholder($paginatorProperties[\'totalVar\']);\\n\\n\\/\\/ ----------------------  Loading filters\\n$mSearch2->pdoTools->timings = $log;\\nif (!empty($paginator)) {\\n\\t$mSearch2->pdoTools->addTime(\'Fired paginator: \\"\'.$paginatorName.\'\\"\');\\n}\\nelse {\\n\\t$mSearch2->pdoTools->addTime(\'Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n}\\nif (empty($filters)) {\\n\\t$mSearch2->pdoTools->addTime(\'No filters retrieved\');\\n\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n}\\nelse {\\n\\t$mSearch2->pdoTools->addTime(\'Filters retrieved\');\\n\\t$request = array();\\n\\tforeach ($_GET as $k => $v) {\\n\\t\\t$tmp = explode($mSearch2->config[\'values_delimeter\'], $v);\\n\\t\\t$request[$k] = array();\\n\\t\\tforeach ($tmp as $v2) {\\n\\t\\t\\t$request[$k][] = str_replace(\'\\"\', \'&quot;\', $v2);\\n\\t\\t}\\n\\t}\\n\\n\\t$aliases = $mSearch2->aliases;\\n\\tforeach ($filters as $filter => $data) {\\n\\t\\tif (empty($data) || !is_array($data)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\t$rows = $has_active = \'\';\\n\\t\\tlist($table, $method) = explode($mSearch2->config[\'filter_delimeter\'], $filter);\\n\\t\\t$filter_key = !empty($aliases[$filter])\\n\\t\\t\\t? $aliases[$filter]\\n\\t\\t\\t: $filter;\\n\\n\\t\\t$tplOuter = !empty($scriptProperties[\'tplFilter.outer.\' . $filter_key])\\n\\t\\t\\t? $scriptProperties[\'tplFilter.outer.\' . $filter_key]\\n\\t\\t\\t: $scriptProperties[\'tplFilter.outer.default\'];\\n\\t\\t$tplRow = !empty($scriptProperties[\'tplFilter.row.\' . $filter_key])\\n\\t\\t\\t? $scriptProperties[\'tplFilter.row.\' . $filter_key]\\n\\t\\t\\t: $scriptProperties[\'tplFilter.row.default\'];\\n\\t\\t$tplEmpty = !empty($scriptProperties[\'tplFilter.empty.\' . $filter_key])\\n\\t\\t\\t? $scriptProperties[\'tplFilter.empty.\' . $filter_key]\\n\\t\\t\\t: \'\';\\n\\n\\t\\t$idx = 0;\\n\\t\\tforeach ($data as $v) {\\n\\t\\t\\tif (empty($v)) {continue;}\\n\\t\\t\\t$checked = isset($request[$filter_key]) && in_array((string)$v[\'value\'], $request[$filter_key], true) && isset($v[\'type\']) && $v[\'type\'] != \'number\';\\n\\t\\t\\tif ($scriptProperties[\'suggestions\']) {\\n\\t\\t\\t\\tif ($checked) {\\n\\t\\t\\t\\t\\t$num = \'\';\\n\\t\\t\\t\\t\\t$has_active = \'has_active\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telseif (isset($suggestions[$filter_key][$v[\'value\']])) {\\n\\t\\t\\t\\t\\t$num = $suggestions[$filter_key][$v[\'value\']];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$num = !empty($v[\'resources\'])\\n\\t\\t\\t\\t\\t\\t? count($v[\'resources\'])\\n\\t\\t\\t\\t\\t\\t: \'\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$num = \'\';\\n\\t\\t\\t}\\n\\n\\t\\t\\t$rows .= $mSearch2->pdoTools->getChunk($tplRow, array(\\n\\t\\t\\t\\t\'filter\' => $method,\\n\\t\\t\\t\\t\'table\' => $table,\\n\\t\\t\\t\\t\'title\' => $v[\'title\'],\\n\\t\\t\\t\\t\'value\' => $v[\'value\'],\\n\\t\\t\\t\\t\'type\' => $v[\'type\'],\\n\\t\\t\\t\\t\'checked\' => $checked\\n\\t\\t\\t\\t\\t? \'checked\'\\n\\t\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\\t\'selected\' => $checked\\n\\t\\t\\t\\t\\t? \'selected\'\\n\\t\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\\t\'disabled\' => !$checked && empty($num) && $scriptProperties[\'suggestions\']\\n\\t\\t\\t\\t\\t? \'disabled\'\\n\\t\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\\t\'delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\\t\\t\\t\'idx\' => $idx++,\\n\\t\\t\\t\\t\'num\' => $num,\\n\\t\\t\\t\\t\'filter_key\' => $filter_key,\\n\\t\\t\\t), $fastMode);\\n\\t\\t}\\n\\n\\t\\t$tpl = empty($rows) ? $tplEmpty : $tplOuter;\\n\\t\\tif (!isset($output[\'filters\'][$filter])) {\\n\\t\\t\\t$output[\'filters\'][$filter] = \'\';\\n\\t\\t}\\n\\t\\t$output[\'filters\'][$filter] = $mSearch2->pdoTools->getChunk($tpl, array(\\n\\t\\t\\t\'filter\' => $method,\\n\\t\\t\\t\'table\' => $table,\\n\\t\\t\\t\'rows\' => $rows,\\n\\t\\t\\t\'has_active\' => $has_active,\\n\\t\\t\\t\'delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\\t\\t\'filter_key\' => $filter_key,\\n\\t\\t), $fastMode);\\n\\t}\\n\\n\\tif (empty($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\t\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n\\t}\\n\\telse {\\n\\t\\t$mSearch2->pdoTools->addTime(\'Filters templated\');\\n\\t}\\n}\\n$mSearch2->pdoTools->addTime(\'Total filter operations: \'.$mSearch2->filter_operations);\\n\\n\\/\\/ Saving params into cache for ajax requests\\n$savedProperties[\'scriptProperties\'] = $scriptProperties;\\n$hash = sha1(serialize($savedProperties));\\n$_SESSION[\'mSearch2\'][$hash] = $savedProperties;\\n\\n\\/\\/ Active class for sort links\\nif (!empty($sort)) {$output[$sort] = $classActive;}\\nif (isset($paginatorProperties[\'tpl_idx\'])) {\\n\\t$output[\'tpl\'.$paginatorProperties[\'tpl_idx\']] = $classActive;\\n\\t$output[\'tpls\'] = 1;\\n}\\n\\n\\/\\/ Setting values for frontend javascript\\n$config = array(\\n\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n\\t\'queryVar\' => $mSearch2->config[\'queryVar\'],\\n\\t\'idVar\' => $modx->getOption(\'request_param_id\', null, \'id\'),\\n\\t\'filter_delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\'method_delimeter\' => $mSearch2->config[\'method_delimeter\'],\\n\\t\'values_delimeter\' => $mSearch2->config[\'values_delimeter\'],\\n\\t\'start_sort\' => $start_sort,\\n\\t\'start_limit\' => $start_limit,\\n\\t\'start_page\' => 1,\\n\\t\'start_tpl\' => \'\',\\n\\t\'sort\' => $sort == $start_sort ? \'\' : $sort,\\n\\t\'limit\' => $limit == $start_limit ? \'\' : $limit,\\n\\t\'page\' => $page,\\n\\t\'pageVar\' => $paginatorProperties[\'pageVarKey\'],\\n\\t\'tpl\' => !empty($paginatorProperties[\'tpl_idx\'])\\n\\t\\t\\t? $paginatorProperties[\'tpl_idx\']\\n\\t\\t\\t: \'\',\\n\\t\'parentsVar\' => $parentsVar,\\n\\t\'key\' => $hash,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n\\t$queryVar => isset($_REQUEST[$queryVar]) ? $_REQUEST[$queryVar] : \'\',\\n\\t$parentsVar => isset($_REQUEST[$parentsVar]) ? $_REQUEST[$parentsVar] : \'\',\\n\\t\'aliases\' => array_flip($mSearch2->aliases),\\n\\t\'options\' => array(),\\n\\t\'mode\' => in_array($scriptProperties[\'ajaxMode\'], array(\'button\', \'scroll\')) ? $scriptProperties[\'ajaxMode\'] : \'\',\\n\\t\'moreText\' => $modx->lexicon(\'mse2_more\'),\\n);\\nif (!empty($scriptProperties[\'filterOptions\'])) {\\n\\t$filterOptions = $modx->fromJSON($scriptProperties[\'filterOptions\']);\\n\\tif (is_array($filterOptions)) {\\n\\t\\t$config[\'filterOptions\'] = $filterOptions;\\n\\t}\\n}\\nif (empty($noJsConfig)) {\\n$modx->regClientStartupScript(\'\\n<script type=\\"text\\/javascript\\">mse2Config = \' . json_encode($config) . \';<\\/script>\', true);\\n}\\nif (empty($noJsInitialize)) {\\n$modx->regClientScript(\'\\n<script type=\\"text\\/javascript\\">\\n    if ($(\\"#mse2_mfilter\\").length) {\\n        if (window.location.hash != \\"\\" && mSearch2.Hash.oldbrowser()) {\\n            var uri = window.location.hash.replace(\\"#\\", \\"?\\");\\n            window.location.href = document.location.pathname + uri;\\n        }\\n        else {\\n            mSearch2.initialize(\\"body\\");\\n        }\\n    }\\n    <\\/script>\', true);\\n}\\n$modx->setPlaceholders($config, $plPrefix);\\n\\n\\/\\/ Prepare output\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($mSearch2->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$modx->setPlaceholders($output[\'filters\'], $toSeparatePlaceholders);\\n\\t$output[\'log\'] = $log;\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\n\\t$pcre = \'#^\' . preg_quote($toSeparatePlaceholders) . \'(\\\\d+)$#\';\\n\\t$tmp = array();\\n\\tforeach ($modx->placeholders as $k => $v) {\\n\\t\\tif (preg_match($pcre, $k)) {\\n\\t\\t\\t$tmp[] = $v;\\n\\t\\t}\\n\\t}\\n\\n\\t$output[\'results\'] = !empty($tmp)\\n\\t\\t? implode($outputSeparator, $tmp)\\n\\t\\t: $modx->lexicon(\'mse2_err_no_results\');\\n\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\tif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t}\\n\\telse {\\n\\t\\t$output = $mSearch2->pdoTools->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => '83c0b15f0ccd0dfcf2b7525b02ac7b3f',
        'native_key' => 0,
        'signature' => 'bd8ec04034bc67141c346210a34b0c7d',
      ),
    ),
    'Plugins' => 
    array (
      '03296e894f4e0aab92872543543f924f' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mSearch2","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"$id = 0;\\n\\nswitch ($modx->event->name) {\\n\\n\\tcase \'OnDocFormSave\':\\n\\tcase \'OnResourceDelete\':\\n\\tcase \'OnResourceUndelete\':\\n\\t\\t\\/* @var modResource $modResource *\\/\\n\\t\\tif (!empty($resource) && $resource instanceof modResource) {\\n\\t\\t\\t$id = $resource->get(\'id\');\\n\\t\\t}\\n\\tbreak;\\n\\n\\tcase \'OnCommentSave\':\\n\\tcase \'OnCommentRemove\':\\n\\tcase \'OnCommentDelete\':\\n\\t\\t\\/* @var TicketComment $TicketComment *\\/\\n\\t\\tif (!empty($TicketComment) && $TicketComment instanceof TicketComment) {\\n\\t\\t\\t$id = $TicketComment->getOne(\'Thread\')->get(\'resource\');\\n\\t\\t}\\n\\tbreak;\\n\\n}\\n\\n\\nif (!empty($id)) {\\n\\t\\/* @var modProcessorResponse $response *\\/\\n\\t$response = $modx->runProcessor(\'mgr\\/index\\/update\', array(\'id\' => $id), array(\'processors_path\' => MODX_CORE_PATH . \'components\\/msearch2\\/processors\\/\'));\\n\\n\\tif ($response->isError()) {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, print_r($response->getAllErrors(), true));\\n\\t}\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/plugins\\/plugin.msearch2.php","content":"$id = 0;\\n\\nswitch ($modx->event->name) {\\n\\n\\tcase \'OnDocFormSave\':\\n\\tcase \'OnResourceDelete\':\\n\\tcase \'OnResourceUndelete\':\\n\\t\\t\\/* @var modResource $modResource *\\/\\n\\t\\tif (!empty($resource) && $resource instanceof modResource) {\\n\\t\\t\\t$id = $resource->get(\'id\');\\n\\t\\t}\\n\\tbreak;\\n\\n\\tcase \'OnCommentSave\':\\n\\tcase \'OnCommentRemove\':\\n\\tcase \'OnCommentDelete\':\\n\\t\\t\\/* @var TicketComment $TicketComment *\\/\\n\\t\\tif (!empty($TicketComment) && $TicketComment instanceof TicketComment) {\\n\\t\\t\\t$id = $TicketComment->getOne(\'Thread\')->get(\'resource\');\\n\\t\\t}\\n\\tbreak;\\n\\n}\\n\\n\\nif (!empty($id)) {\\n\\t\\/* @var modProcessorResponse $response *\\/\\n\\t$response = $modx->runProcessor(\'mgr\\/index\\/update\', array(\'id\' => $id), array(\'processors_path\' => MODX_CORE_PATH . \'components\\/msearch2\\/processors\\/\'));\\n\\n\\tif ($response->isError()) {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, print_r($response->getAllErrors(), true));\\n\\t}\\n}"}',
        'guid' => '802c67bfb1df0d90b08d9f8d0f1df9ac',
        'native_key' => 0,
        'signature' => 'd31b3c7bb911a084b2482ecc5ec9aa55',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '0042f13b42b7cf26cbb933268fed2b62' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormSave","priority":1,"propertyset":0}',
              'guid' => '0644e77d0fdd36914c63d63ebbb2e809',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormSave',
              ),
              'signature' => '4c1fe353546c1e10f13451f5af11ff2b',
            ),
            'a326314495aa456d23de77411ba16338' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnResourceDelete","priority":1,"propertyset":0}',
              'guid' => 'e684e1f6c9abf8bacb85ff4ae88c7fff',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnResourceDelete',
              ),
              'signature' => '0b936a3030581171c1d1f285fc9fd351',
            ),
            'c1277bd9a373d190a19e882e0b5bc056' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnResourceUndelete","priority":1,"propertyset":0}',
              'guid' => '67d3c50d46db39a473d3e24befa196a3',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnResourceUndelete',
              ),
              'signature' => '9ea555343ab636b358efcc5f9e5e56c6',
            ),
            'e1367a38d7f7fe70c065f663f5264d96' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnCommentSave","priority":1,"propertyset":0}',
              'guid' => '3f0410b961196b4e689eff969ebc7911',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnCommentSave',
              ),
              'signature' => '02f8f999ca74e15cfa8214835426e809',
            ),
            '5269373e3b0cdd07ef7125e2dd20e7a5' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnCommentRemove","priority":1,"propertyset":0}',
              'guid' => 'f1a830d615b44a005b4b5ee72b2a3e6c',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnCommentRemove',
              ),
              'signature' => '634903de10d1d651fcc8613ce3eeff8a',
            ),
            'bdb6a1f2e064bb87d4be4ee82f969d00' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnCommentDelete","priority":1,"propertyset":0}',
              'guid' => '4bec6bfa9b2cf033a59d09219cc3db92',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnCommentDelete',
              ),
              'signature' => '9049acc75120d8bff3ae60a0bdcab5b5',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'msearch2',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"msearch2-1.10.2-pl\\/modCategory\\/ee11f9d0552739a6d9070382cdc60d89\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"msearch2"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"msearch2-1.10.2-pl\\/modCategory\\/ee11f9d0552739a6d9070382cdc60d89\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"msearch2"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.10.2-pl\\/modCategory\\/ee11f9d0552739a6d9070382cdc60d89.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.10.2-pl\\/modCategory\\/ee11f9d0552739a6d9070382cdc60d89.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.10.2-pl\\/modCategory\\/ee11f9d0552739a6d9070382cdc60d89.resolve.update.resolver","type":"php","name":"resolve.update"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.10.2-pl\\/modCategory\\/ee11f9d0552739a6d9070382cdc60d89.resolve.dictionaries.resolver","type":"php","name":"resolve.dictionaries"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '438353ec14ecee1f99f1db84d8563f3e',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => 'ee11f9d0552739a6d9070382cdc60d89',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"mSearch2","rank":0}',
);